!function(){var e,t=function(e){var t;return function(n){return t||e(t={exports:{},parent:n},t.exports),t.exports}},n=t((function(e,t){(function(t,n){(function(){"use strict";var o;e.exports=d,d.ReadableState=p,Re.EventEmitter;var a=function(e,t){return e.listeners(t).length},s=Ct.Buffer,u=n.Uint8Array||function(){},f=Object.create(Pt);f.inherits=Je;var c,l=void 0;l=Bt&&Bt.debuglog?Bt.debuglog("stream"):function(){},f.inherits(d,vt);var h=["error","close","destroy","pause","resume"];function p(e,t){e=e||{};var n=t instanceof(o=o||i({}));this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var a=e.highWaterMark,s=e.readableHighWaterMark,u=this.objectMode?16:16384;this.highWaterMark=a||0===a?a:n&&(s||0===s)?s:u,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new Nt,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(c||(c=r({}).StringDecoder),this.decoder=new c(e.encoding),this.encoding=e.encoding)}function d(e){if(o=o||i({}),!(this instanceof d))return new d(e);this._readableState=new p(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),vt.call(this)}function g(e,t,n,r,i){var o,a=e._readableState;return null===t?(a.reading=!1,function(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,y(e)}}(e,a)):(i||(o=function(e,t){var n,r;return r=t,s.isBuffer(r)||r instanceof u||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}(a,t)),o?e.emit("error",o):a.objectMode||t&&t.length>0?("string"==typeof t||a.objectMode||Object.getPrototypeOf(t)===s.prototype||(t=function(e){return s.from(e)}(t)),r?a.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):m(e,a,t,!0):a.ended?e.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!n?(t=a.decoder.write(t),a.objectMode||0!==t.length?m(e,a,t,!1):w(e,a)):m(e,a,t,!1))):r||(a.reading=!1)),function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(a)}function m(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&y(e)),w(e,t)}Object.defineProperty(d.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),d.prototype.destroy=Ft.destroy,d.prototype._undestroy=Ft.undestroy,d.prototype._destroy=function(e,t){this.push(null),t(e)},d.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=s.from(e,t),t=""),n=!0),g(this,e,t,!1,n)},d.prototype.unshift=function(e){return g(this,e,null,!0,!1)},d.prototype.isPaused=function(){return!1===this._readableState.flowing},d.prototype.setEncoding=function(e){return c||(c=r({}).StringDecoder),this._readableState.decoder=new c(e),this._readableState.encoding=e,this};function v(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=8388608?e=8388608:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function y(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(l("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?dt.nextTick(b,e):b(e))}function b(e){l("emit readable"),e.emit("readable"),T(e)}function w(e,t){t.readingMore||(t.readingMore=!0,dt.nextTick(x,e,t))}function x(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(l("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function A(e){l("readable nexttick read 0"),e.read(0)}function E(e,t){t.reading||(l("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),T(e),t.flowing&&!t.reading&&e.read(0)}function T(e){var t=e._readableState;for(l("flow",t.flowing);t.flowing&&null!==e.read(););}function S(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=function(e,t,n){var r;return e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?function(e,t){var n=t.head,r=1,i=n.data;for(e-=i.length;n=n.next;){var o=n.data,a=e>o.length?o.length:e;if(a===o.length?i+=o:i+=o.slice(0,e),0==(e-=a)){a===o.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(a));break}++r}return t.length-=r,i}(e,t):function(e,t){var n=s.allocUnsafe(e),r=t.head,i=1;for(r.data.copy(n),e-=r.data.length;r=r.next;){var o=r.data,a=e>o.length?o.length:e;if(o.copy(n,n.length-e,0,a),0==(e-=a)){a===o.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(a));break}++i}return t.length-=i,n}(e,t),r}(e,t.buffer,t.decoder),n);var n}function k(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,dt.nextTick(_,t,e))}function _(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function C(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}d.prototype.read=function(e){l("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return l("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?k(this):y(this),null;if(0===(e=v(e,t))&&t.ended)return 0===t.length&&k(this),null;var r,i=t.needReadable;return l("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&l("length less than watermark",i=!0),t.ended||t.reading?l("reading or ended",i=!1):i&&(l("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=v(n,t))),null===(r=e>0?S(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&k(this)),null!==r&&this.emit("data",r),r},d.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},d.prototype.pipe=function(e,n){var r=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e)}i.pipesCount+=1,l("pipe count=%d opts=%j",i.pipesCount,n);var o=n&&!1===n.end||e===t.stdout||e===t.stderr?m:s;function s(){l("onend"),e.end()}i.endEmitted?dt.nextTick(o):r.once("end",o),e.on("unpipe",(function t(n,o){l("onunpipe"),n===r&&o&&!1===o.hasUnpiped&&(o.hasUnpiped=!0,l("cleanup"),e.removeListener("close",d),e.removeListener("finish",g),e.removeListener("drain",u),e.removeListener("error",p),e.removeListener("unpipe",t),r.removeListener("end",s),r.removeListener("end",m),r.removeListener("data",h),f=!0,!i.awaitDrain||e._writableState&&!e._writableState.needDrain||u())}));var u=function(e){return function(){var t=e._readableState;l("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&a(e,"data")&&(t.flowing=!0,T(e))}}(r);e.on("drain",u);var f=!1,c=!1;function h(t){l("ondata"),c=!1,!1!==e.write(t)||c||((1===i.pipesCount&&i.pipes===e||i.pipesCount>1&&-1!==C(i.pipes,e))&&!f&&(l("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,c=!0),r.pause())}function p(t){l("onerror",t),m(),e.removeListener("error",p),0===a(e,"error")&&e.emit("error",t)}function d(){e.removeListener("finish",g),m()}function g(){l("onfinish"),e.removeListener("close",d),m()}function m(){l("unpipe"),r.unpipe(e)}return r.on("data",h),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener("error",n);e._events&&e._events.error?mt(e._events.error)?e._events.error.unshift(n):e._events.error=[n,e._events.error]:e.on("error",n)}(e,0,p),e.once("close",d),e.once("finish",g),e.emit("pipe",r),i.flowing||(l("pipe resume"),r.resume()),e},d.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,n);return this}var a=C(t.pipes,e);return-1===a||(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},d.prototype.on=function(e,t){var n=vt.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&y(this):dt.nextTick(A,this))}return n},d.prototype.addListener=d.prototype.on,d.prototype.resume=function(){var e=this._readableState;return e.flowing||(l("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,dt.nextTick(E,e,t))}(this,e)),this},d.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this},d.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on("end",(function(){if(l("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){l("wrapped data"),n.decoder&&(i=n.decoder.write(i)),n.objectMode&&null==i||(n.objectMode||i&&i.length)&&(t.push(i)||(r=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<h.length;o++)e.on(h[o],this.emit.bind(this,h[o]));return this._read=function(t){l("wrapped _read",t),r&&(r=!1,e.resume())},this},Object.defineProperty(d.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),d._fromList=S}).call(this)}).call(this,tt,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})})),r=t((function(e,t){"use strict";var n=Ct.Buffer,r=n.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function i(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(n.isEncoding===r||!r(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=s,this.end=u,t=4;break;case"utf8":this.fillLast=a,t=4;break;case"base64":this.text=f,this.end=c,t=3;break;default:return this.write=l,void(this.end=h)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(t)}function o(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function a(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"\ufffd";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"\ufffd";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"\ufffd"}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function s(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function u(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function f(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function c(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function l(e){return e.toString(this.encoding)}function h(e){return e&&e.length?this.write(e):""}t.StringDecoder=i,i.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},i.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\ufffd":t},i.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var i=o(t[r]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--r<n||-2===i?0:(i=o(t[r]))>=0?(i>0&&(e.lastNeed=i-2),i):--r<n||-2===i?0:(i=o(t[r]))>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},i.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}})),i=t((function(e,t){"use strict";var r=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=l;var i=Object.create(Pt);i.inherits=Je;var a=n({}),s=o({});i.inherits(l,a);for(var u=r(s.prototype),f=0;f<u.length;f++){var c=u[f];l.prototype[c]||(l.prototype[c]=s.prototype[c])}function l(e){if(!(this instanceof l))return new l(e);a.call(this,e),s.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",h)}function h(){this.allowHalfOpen||this._writableState.ended||dt.nextTick(p,this)}function p(e){e.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),l.prototype._destroy=function(e,t){this.push(null),this.end(),dt.nextTick(t,e)}})),o=t((function(e,t){(function(t,n,r){(function(){"use strict";function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;for(e.entry=null;r;){var i=r.callback;t.pendingcb--,i(void 0),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}e.exports=g;var a,s=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?r:dt.nextTick;g.WritableState=d;var u=Object.create(Pt);u.inherits=Je;var f,c={deprecate:qt},l=Ct.Buffer,h=n.Uint8Array||function(){};function p(){}function d(e,t){a=a||i({}),e=e||{};var n=t instanceof a;this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var r=e.highWaterMark,u=e.writableHighWaterMark,f=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:n&&(u||0===u)?u:f,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var c=!1===e.decodeStrings;this.decodeStrings=!c,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,r=n.sync,i=n.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,r,i){--t.pendingcb,n?(dt.nextTick(i,r),dt.nextTick(x,e,t),e._writableState.errorEmitted=!0,e.emit("error",r)):(i(r),e._writableState.errorEmitted=!0,e.emit("error",r),x(e,t))}(e,n,r,t,i);else{var o=b(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||y(e,n),r?s(v,e,n,o,i):v(e,n,o,i)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function g(e){if(a=a||i({}),!(f.call(g,this)||this instanceof a))return new g(e);this._writableState=new d(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),vt.call(this)}function m(e,t,n,r,i,o,a){t.writelen=r,t.writecb=a,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function v(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),x(e,t)}function y(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,i=new Array(r),a=t.corkedRequestsFree;a.entry=n;for(var s=0,u=!0;n;)i[s]=n,n.isBuf||(u=!1),n=n.next,s+=1;i.allBuffers=u,m(e,t,!0,t.length,i,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new o(t),t.bufferedRequestCount=0}else{for(;n;){var f=n.chunk,c=n.encoding,l=n.callback;if(m(e,t,!1,t.objectMode?1:f.length,f,c,l),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function b(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function w(e,t){e._final((function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),x(e,t)}))}function x(e,t){var n=b(t);return n&&(function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,dt.nextTick(w,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}u.inherits(g,vt),d.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(d.prototype,"buffer",{get:c.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(f=Function.prototype[Symbol.hasInstance],Object.defineProperty(g,Symbol.hasInstance,{value:function(e){return!!f.call(this,e)||this===g&&e&&e._writableState instanceof d}})):f=function(e){return e instanceof this},g.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},g.prototype.write=function(e,t,n){var r,i=this._writableState,o=!1,a=!i.objectMode&&(r=e,l.isBuffer(r)||r instanceof h);return a&&!l.isBuffer(e)&&(e=function(e){return l.from(e)}(e)),"function"==typeof t&&(n=t,t=null),a?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof n&&(n=p),i.ended?function(e,t){var n=new Error("write after end");e.emit("error",n),dt.nextTick(t,n)}(this,n):(a||function(e,t,n,r){var i=!0,o=!1;return null===n?o=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),dt.nextTick(r,o),i=!1),i}(this,i,e,n))&&(i.pendingcb++,o=function(e,t,n,r,i,o){if(!n){var a=function(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=l.from(t,n)),t}(t,r,i);r!==a&&(n=!0,i="buffer",r=a)}var s=t.objectMode?1:r.length;t.length+=s;var u=t.length<t.highWaterMark;if(u||(t.needDrain=!0),t.writing||t.corked){var f=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},f?f.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else m(e,t,!1,s,r,i,o);return u}(this,i,a,e,t,n)),o},g.prototype.cork=function(){this._writableState.corked++},g.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||y(this,e))},g.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(g.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),g.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},g.prototype._writev=null,g.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(e,t,n){t.ending=!0,x(e,t),n&&(t.finished?dt.nextTick(n):e.once("finish",n)),t.ended=!0,e.writable=!1}(this,r,n)},Object.defineProperty(g.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),g.prototype.destroy=Ft.destroy,g.prototype._undestroy=Ft.undestroy,g.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this)}).call(this,tt,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},a({}).setImmediate)})),a=t((function(e,t){(function(e,n){(function(){var r=tt.nextTick,i=(Function.prototype.apply,Array.prototype.slice),o={},a=0;function s(e,t){this._id=e,this._clearFn=t}s.prototype.unref=s.prototype.ref=function(){},s.prototype.close=function(){this._clearFn.call(window,this._id)},t.setImmediate="function"==typeof e?e:function(e){var n=a++,s=!(arguments.length<2)&&i.call(arguments,1);return o[n]=!0,r((function(){o[n]&&(s?e.apply(null,s):e.call(null),t.clearImmediate(n))})),n},t.clearImmediate="function"==typeof n?n:function(e){delete o[e]}}).call(this)}).call(this,a({}).setImmediate,a({}).clearImmediate)})),s=t((function(t,n){(function(t){(function(){"use strict";n.Buffer=r,n.SlowBuffer=function(e){return+e!=e&&(e=0),r.alloc(+e)},n.INSPECT_MAX_BYTES=50;function t(e){if(e>2147483647)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return t.__proto__=r.prototype,t}function r(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return a(e)}return i(e,t,n)}function i(e,n,i){if("string"==typeof e)return function(e,n){if("string"==typeof n&&""!==n||(n="utf8"),!r.isEncoding(n))throw new TypeError("Unknown encoding: "+n);var i=0|f(e,n),o=t(i),a=o.write(e,n);return a!==i&&(o=o.slice(0,a)),o}(e,n);if(ArrayBuffer.isView(e))return s(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(B(e,ArrayBuffer)||e&&B(e.buffer,ArrayBuffer))return function(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var i;return(i=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n)).__proto__=r.prototype,i}(e,n,i);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var o=e.valueOf&&e.valueOf();if(null!=o&&o!==e)return r.from(o,n,i);var a=function(e){if(r.isBuffer(e)){var n=0|u(e.length),i=t(n);return 0===i.length||e.copy(i,0,0,n),i}return void 0!==e.length?"number"!=typeof e.length||N(e.length)?t(0):s(e):"Buffer"===e.type&&Array.isArray(e.data)?s(e.data):void 0}(e);if(a)return a;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return r.from(e[Symbol.toPrimitive]("string"),n,i);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function o(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function a(e){return o(e),t(e<0?0:0|u(e))}function s(e){for(var n=e.length<0?0:0|u(e.length),r=t(n),i=0;i<n;i+=1)r[i]=255&e[i];return r}function u(e){if(e>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|e}function f(e,t){if(r.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||B(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===n)return 0;for(var o=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return M(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return L(e).length;default:if(o)return i?-1:M(e).length;t=(""+t).toLowerCase(),o=!0}}function c(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function l(e,t,n,i,o){if(0===e.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),N(n=+n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof t&&(t=r.from(t,i)),r.isBuffer(t))return 0===t.length?-1:h(e,t,n,i,o);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):h(e,[t],n,i,o);throw new TypeError("val must be string, number or Buffer")}function h(e,t,n,r,i){var o,a=1,s=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,n/=2}function f(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var c=-1;for(o=n;o<s;o++)if(f(e,o)===f(t,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===u)return c*a}else-1!==c&&(o-=o-c),c=-1}else for(n+u>s&&(n=s-u),o=n;o>=0;o--){for(var l=!0,h=0;h<u;h++)if(f(e,o+h)!==f(t,h)){l=!1;break}if(l)return o}return-1}function p(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(N(s))return a;e[n+a]=s}return a}function d(e,t,n,r){return P(M(t,e.length-n),e,n,r)}function g(e,t,n,r){return P(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function m(e,t,n,r){return g(e,t,n,r)}function v(e,t,n,r){return P(L(t),e,n,r)}function y(e,t,n,r){return P(function(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=(n=e.charCodeAt(a))>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function b(e,t,n){return 0===t&&n===e.length?yt.fromByteArray(e):yt.fromByteArray(e.slice(t,n))}function w(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,a,s,u,f=e[i],c=null,l=f>239?4:f>223?3:f>191?2:1;if(i+l<=n)switch(l){case 1:f<128&&(c=f);break;case 2:128==(192&(o=e[i+1]))&&(u=(31&f)<<6|63&o)>127&&(c=u);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&(u=(15&f)<<12|(63&o)<<6|63&a)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(u=(15&f)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(c=u)}null===c?(c=65533,l=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=l}return function(e){var t=e.length;if(t<=x)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=x));return n}(r)}n.kMaxLength=2147483647,r.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()}catch(e){return!1}}(),r.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(r.prototype,"parent",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.buffer}}),Object.defineProperty(r.prototype,"offset",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&r[Symbol.species]===r&&Object.defineProperty(r,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),r.poolSize=8192,r.from=function(e,t,n){return i(e,t,n)},r.prototype.__proto__=Uint8Array.prototype,r.__proto__=Uint8Array,r.alloc=function(e,n,r){return function(e,n,r){return o(e),e<=0?t(e):void 0!==n?"string"==typeof r?t(e).fill(n,r):t(e).fill(n):t(e)}(e,n,r)},r.allocUnsafe=function(e){return a(e)},r.allocUnsafeSlow=function(e){return a(e)},r.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==r.prototype},r.compare=function(e,t){if(B(e,Uint8Array)&&(e=r.from(e,e.offset,e.byteLength)),B(t,Uint8Array)&&(t=r.from(t,t.offset,t.byteLength)),!r.isBuffer(e)||!r.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,i=t.length,o=0,a=Math.min(n,i);o<a;++o)if(e[o]!==t[o]){n=e[o],i=t[o];break}return n<i?-1:i<n?1:0},r.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return r.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var i=r.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){var a=e[n];if(B(a,Uint8Array)&&(a=r.from(a)),!r.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(i,o),o+=a.length}return i},r.byteLength=f,r.prototype._isBuffer=!0,r.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)c(this,t,t+1);return this},r.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)c(this,t,t+3),c(this,t+1,t+2);return this},r.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)c(this,t,t+7),c(this,t+1,t+6),c(this,t+2,t+5),c(this,t+3,t+4);return this},r.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?w(this,0,e):function(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return T(this,t,n);case"utf8":case"utf-8":return w(this,t,n);case"ascii":return A(this,t,n);case"latin1":case"binary":return E(this,t,n);case"base64":return b(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}.apply(this,arguments)},r.prototype.toLocaleString=r.prototype.toString,r.prototype.equals=function(e){if(!r.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===r.compare(this,e)},r.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},r.prototype.compare=function(e,t,n,i,o){if(B(e,Uint8Array)&&(e=r.from(e,e.offset,e.byteLength)),!r.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===i&&(i=0),void 0===o&&(o=this.length),t<0||n>e.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&t>=n)return 0;if(i>=o)return-1;if(t>=n)return 1;if(this===e)return 0;for(var a=(o>>>=0)-(i>>>=0),s=(n>>>=0)-(t>>>=0),u=Math.min(a,s),f=this.slice(i,o),c=e.slice(t,n),l=0;l<u;++l)if(f[l]!==c[l]){a=f[l],s=c[l];break}return a<s?-1:s<a?1:0},r.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},r.prototype.indexOf=function(e,t,n){return l(this,e,t,n,!0)},r.prototype.lastIndexOf=function(e,t,n){return l(this,e,t,n,!1)},r.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return p(this,e,t,n);case"utf8":case"utf-8":return d(this,e,t,n);case"ascii":return g(this,e,t,n);case"latin1":case"binary":return m(this,e,t,n);case"base64":return v(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return y(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var x=4096;function A(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function E(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function T(e,t,n){var r,i=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>i)&&(n=i);for(var o="",a=t;a<n;++a)o+=(r=e[a])<16?"0"+r.toString(16):r.toString(16);return o}function S(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function k(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function _(e,t,n,i,o,a){if(!r.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<a)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}function C(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function j(e,t,n,r,i){return t=+t,n>>>=0,i||C(e,0,n,4),_t.write(e,t,n,r,23,4),n+4}function O(e,t,n,r,i){return t=+t,n>>>=0,i||C(e,0,n,8),_t.write(e,t,n,r,52,8),n+8}r.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var i=this.subarray(e,t);return i.__proto__=r.prototype,i},r.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||k(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},r.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||k(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},r.prototype.readUInt8=function(e,t){return e>>>=0,t||k(e,1,this.length),this[e]},r.prototype.readUInt16LE=function(e,t){return e>>>=0,t||k(e,2,this.length),this[e]|this[e+1]<<8},r.prototype.readUInt16BE=function(e,t){return e>>>=0,t||k(e,2,this.length),this[e]<<8|this[e+1]},r.prototype.readUInt32LE=function(e,t){return e>>>=0,t||k(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},r.prototype.readUInt32BE=function(e,t){return e>>>=0,t||k(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},r.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||k(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},r.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||k(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},r.prototype.readInt8=function(e,t){return e>>>=0,t||k(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},r.prototype.readInt16LE=function(e,t){e>>>=0,t||k(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},r.prototype.readInt16BE=function(e,t){e>>>=0,t||k(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},r.prototype.readInt32LE=function(e,t){return e>>>=0,t||k(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},r.prototype.readInt32BE=function(e,t){return e>>>=0,t||k(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},r.prototype.readFloatLE=function(e,t){return e>>>=0,t||k(e,4,this.length),_t.read(this,e,!0,23,4)},r.prototype.readFloatBE=function(e,t){return e>>>=0,t||k(e,4,this.length),_t.read(this,e,!1,23,4)},r.prototype.readDoubleLE=function(e,t){return e>>>=0,t||k(e,8,this.length),_t.read(this,e,!0,52,8)},r.prototype.readDoubleBE=function(e,t){return e>>>=0,t||k(e,8,this.length),_t.read(this,e,!1,52,8)},r.prototype.writeUIntLE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||_(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},r.prototype.writeUIntBE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||_(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},r.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||_(this,e,t,1,255,0),this[t]=255&e,t+1},r.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||_(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},r.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||_(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},r.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||_(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},r.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||_(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},r.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);_(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},r.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);_(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},r.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||_(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},r.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||_(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},r.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||_(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},r.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||_(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},r.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||_(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},r.prototype.writeFloatLE=function(e,t,n){return j(this,e,t,!0,n)},r.prototype.writeFloatBE=function(e,t,n){return j(this,e,t,!1,n)},r.prototype.writeDoubleLE=function(e,t,n){return O(this,e,t,!0,n)},r.prototype.writeDoubleBE=function(e,t,n){return O(this,e,t,!1,n)},r.prototype.copy=function(e,t,n,i){if(!r.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);var o=i-n;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,n,i);else if(this===e&&n<t&&t<i)for(var a=o-1;a>=0;--a)e[a+t]=this[a+n];else Uint8Array.prototype.set.call(e,this.subarray(n,i),t);return o},r.prototype.fill=function(e,t,n,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!r.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(1===e.length){var o=e.charCodeAt(0);("utf8"===i&&o<128||"latin1"===i)&&(e=o)}}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var a;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var s=r.isBuffer(e)?e:r.from(e,i),u=s.length;if(0===u)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<n-t;++a)this[a+t]=s[a%u]}return this};var D=/[^+/0-9A-Za-z-_]/g;function M(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function L(e){return yt.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(D,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function P(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function B(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function N(e){return e!=e}}).call(this)}).call(this,s({}).Buffer)})),u={exports:{}};e=function(){var e=function(){function t(e){return i.appendChild(e.dom),e}function n(e){for(var t=0;t<i.children.length;t++)i.children[t].style.display=t===e?"block":"none";r=e}var r=0,i=document.createElement("div");i.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",i.addEventListener("click",(function(e){e.preventDefault(),n(++r%i.children.length)}),!1);var o=(performance||Date).now(),a=o,s=0,u=t(new e.Panel("FPS","#0ff","#002")),f=t(new e.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var c=t(new e.Panel("MB","#f08","#201"));return n(0),{REVISION:16,dom:i,addPanel:t,showPanel:n,begin:function(){o=(performance||Date).now()},end:function(){s++;var e=(performance||Date).now();if(f.update(e-o,200),e>a+1e3&&(u.update(1e3*s/(e-a),100),a=e,s=0,c)){var t=performance.memory;c.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},update:function(){o=this.end()},domElement:i,setMode:n}};return e.Panel=function(e,t,n){var r=1/0,i=0,o=Math.round,a=o(window.devicePixelRatio||1),s=80*a,u=48*a,f=3*a,c=2*a,l=3*a,h=15*a,p=74*a,d=30*a,g=document.createElement("canvas");g.width=s,g.height=u,g.style.cssText="width:80px;height:48px";var m=g.getContext("2d");return m.font="bold "+9*a+"px Helvetica,Arial,sans-serif",m.textBaseline="top",m.fillStyle=n,m.fillRect(0,0,s,u),m.fillStyle=t,m.fillText(e,f,c),m.fillRect(l,h,p,d),m.fillStyle=n,m.globalAlpha=.9,m.fillRect(l,h,p,d),{dom:g,update:function(u,v){r=Math.min(r,u),i=Math.max(i,u),m.fillStyle=n,m.globalAlpha=1,m.fillRect(0,0,s,h),m.fillStyle=t,m.fillText(o(u)+" "+e+" ("+o(r)+"-"+o(i)+")",f,c),m.drawImage(g,l+a,h,p-a,d,l,h,p-a,d),m.fillRect(l+p-a,h,a,d),m.fillStyle=n,m.globalAlpha=.9,m.fillRect(l+p-a,h,a,o((1-u/v)*d))}}},e},"object"==typeof u.exports?u.exports=e():"function"==typeof define&&define.amd?define(e):this.Stats=e(),u=u.exports;var f,c={exports:{}};f=function(){function e(e,t){this.id=q++,this.type=e,this.data=t}function t(e){return"["+function e(t){if(0===t.length)return[];var n=t.charAt(0),r=t.charAt(t.length-1);if(1<t.length&&n===r&&('"'===n||"'"===n))return['"'+t.substr(1,t.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(n=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(t))return e(t.substr(0,n.index)).concat(e(n[1])).concat(e(t.substr(n.index+n[0].length)));if(1===(n=t.split(".")).length)return['"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(t=[],r=0;r<n.length;++r)t=t.concat(e(n[r]));return t}(e).join("][")+"]"}function n(e){return"string"==typeof e?e.split():e}function r(e){return"string"==typeof e?document.querySelector(e):e}function i(e,t){for(var n=Array(e),r=0;r<e;++r)n[r]=t(r);return n}function o(e){var t,n;return t=(65535<e)<<4,t|=n=(255<(e>>>=t))<<3,(t|=n=(15<(e>>>=n))<<2)|(n=(3<(e>>>=n))<<1)|e>>>n>>1}function a(){function e(e){e:{for(var t=16;268435456>=t;t*=16)if(e<=t){e=t;break e}e=0}return 0<(t=n[o(e)>>2]).length?t.pop():new ArrayBuffer(e)}function t(e){n[o(e.byteLength)>>2].push(e)}var n=i(8,(function(){return[]}));return{alloc:e,free:t,allocType:function(t,n){var r=null;switch(t){case 5120:r=new Int8Array(e(n),0,n);break;case 5121:r=new Uint8Array(e(n),0,n);break;case 5122:r=new Int16Array(e(2*n),0,n);break;case 5123:r=new Uint16Array(e(2*n),0,n);break;case 5124:r=new Int32Array(e(4*n),0,n);break;case 5125:r=new Uint32Array(e(4*n),0,n);break;case 5126:r=new Float32Array(e(4*n),0,n);break;default:return null}return r.length!==n?r.subarray(0,n):r},freeType:function(e){t(e.buffer)}}}function s(e){return!!e&&"object"==typeof e&&Array.isArray(e.shape)&&Array.isArray(e.stride)&&"number"==typeof e.offset&&e.shape.length===e.stride.length&&(Array.isArray(e.data)||X(e.data))}function u(e,t,n,r,i,o){for(var a=0;a<t;++a)for(var s=e[a],u=0;u<n;++u)for(var f=s[u],c=0;c<r;++c)i[o++]=f[c]}function f(e){return 0|Y[Object.prototype.toString.call(e)]}function c(e,t){for(var n=0;n<t.length;++n)e[n]=t[n]}function l(e,t,n,r,i,o,a){for(var s=0,u=0;u<n;++u)for(var f=0;f<r;++f)e[s++]=t[i*u+o*f+a]}function h(e,t,n,r){function i(t){this.id=h++,this.buffer=e.createBuffer(),this.type=t,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,n.profile&&(this.stats={size:0})}function o(t,n,r){t.byteLength=n.byteLength,e.bufferData(t.type,n,r)}function a(e,t,n,r,i,a){if(e.usage=n,Array.isArray(t)){if(e.dtype=r||5126,0<t.length)if(Array.isArray(t[0])){i=Z(t);for(var u=r=1;u<i.length;++u)r*=i[u];e.dimension=r,o(e,t=J(t,i,e.dtype),n),a?e.persistentData=t:U.freeType(t)}else"number"==typeof t[0]?(e.dimension=i,c(i=U.allocType(e.dtype,t.length),t),o(e,i,n),a?e.persistentData=i:U.freeType(i)):X(t[0])&&(e.dimension=t[0].length,e.dtype=r||f(t[0])||5126,o(e,t=J(t,[t.length,t[0].length],e.dtype),n),a?e.persistentData=t:U.freeType(t))}else if(X(t))e.dtype=r||f(t),e.dimension=i,o(e,t,n),a&&(e.persistentData=new Uint8Array(new Uint8Array(t.buffer)));else if(s(t)){i=t.shape;var h=t.stride,p=(u=t.offset,0),d=0,g=0,m=0;1===i.length?(p=i[0],d=1,g=h[0],m=0):2===i.length&&(p=i[0],d=i[1],g=h[0],m=h[1]),e.dtype=r||f(t.data)||5126,e.dimension=d,l(i=U.allocType(e.dtype,p*d),t.data,p,d,g,m,u),o(e,i,n),a?e.persistentData=i:U.freeType(i)}else t instanceof ArrayBuffer&&(e.dtype=5121,e.dimension=i,o(e,t,n),a&&(e.persistentData=new Uint8Array(new Uint8Array(t))))}function u(n){t.bufferCount--,r(n),e.deleteBuffer(n.buffer),n.buffer=null,delete p[n.id]}var h=0,p={};i.prototype.bind=function(){e.bindBuffer(this.type,this.buffer)},i.prototype.destroy=function(){u(this)};var d=[];return n.profile&&(t.getTotalBufferSize=function(){var e=0;return Object.keys(p).forEach((function(t){e+=p[t].stats.size})),e}),{create:function(r,o,h,d){function g(t){var r=35044,i=null,o=0,u=0,f=1;return Array.isArray(t)||X(t)||s(t)||t instanceof ArrayBuffer?i=t:"number"==typeof t?o=0|t:t&&("data"in t&&(i=t.data),"usage"in t&&(r=K[t.usage]),"type"in t&&(u=Q[t.type]),"dimension"in t&&(f=0|t.dimension),"length"in t&&(o=0|t.length)),m.bind(),i?a(m,i,r,u,f,d):(o&&e.bufferData(m.type,o,r),m.dtype=u||5121,m.usage=r,m.dimension=f,m.byteLength=o),n.profile&&(m.stats.size=m.byteLength*ee[m.dtype]),g}t.bufferCount++;var m=new i(o);return p[m.id]=m,h||g(r),g._reglType="buffer",g._buffer=m,g.subdata=function(t,n){var r,i=0|(n||0);if(m.bind(),X(t)||t instanceof ArrayBuffer)e.bufferSubData(m.type,i,t);else if(Array.isArray(t)){if(0<t.length)if("number"==typeof t[0]){var o=U.allocType(m.dtype,t.length);c(o,t),e.bufferSubData(m.type,i,o),U.freeType(o)}else(Array.isArray(t[0])||X(t[0]))&&(r=Z(t),o=J(t,r,m.dtype),e.bufferSubData(m.type,i,o),U.freeType(o))}else if(s(t)){r=t.shape;var a=t.stride,u=o=0,h=0,p=0;1===r.length?(o=r[0],u=1,h=a[0],p=0):2===r.length&&(o=r[0],u=r[1],h=a[0],p=a[1]),r=Array.isArray(t.data)?m.dtype:f(t.data),l(r=U.allocType(r,o*u),t.data,o,u,h,p,t.offset),e.bufferSubData(m.type,i,r),U.freeType(r)}return g},n.profile&&(g.stats=m.stats),g.destroy=function(){u(m)},g},createStream:function(e,t){var n=d.pop();return n||(n=new i(e)),n.bind(),a(n,t,35040,0,1,!1),n},destroyStream:function(e){d.push(e)},clear:function(){$(p).forEach(u),d.forEach(u)},getBuffer:function(e){return e&&e._buffer instanceof i?e._buffer:null},restore:function(){$(p).forEach((function(t){t.buffer=e.createBuffer(),e.bindBuffer(t.type,t.buffer),e.bufferData(t.type,t.persistentData||t.byteLength,t.usage)}))},_initBuffer:a}}function p(e,t,n,r){function i(e){this.id=f++,u[this.id]=this,this.buffer=e,this.primType=4,this.type=this.vertCount=0}function o(r,i,o,a,u,f,c){var l;if(r.buffer.bind(),i?((l=c)||X(i)&&(!s(i)||X(i.data))||(l=t.oes_element_index_uint?5125:5123),n._initBuffer(r.buffer,i,o,l,3)):(e.bufferData(34963,f,o),r.buffer.dtype=l||5121,r.buffer.usage=o,r.buffer.dimension=3,r.buffer.byteLength=f),l=c,!c){switch(r.buffer.dtype){case 5121:case 5120:l=5121;break;case 5123:case 5122:l=5123;break;case 5125:case 5124:l=5125}r.buffer.dtype=l}r.type=l,0>(i=u)&&(i=r.buffer.byteLength,5123===l?i>>=1:5125===l&&(i>>=2)),r.vertCount=i,i=a,0>a&&(i=4,1===(a=r.buffer.dimension)&&(i=0),2===a&&(i=1),3===a&&(i=4)),r.primType=i}function a(e){r.elementsCount--,delete u[e.id],e.buffer.destroy(),e.buffer=null}var u={},f=0,c={uint8:5121,uint16:5123};t.oes_element_index_uint&&(c.uint32=5125),i.prototype.bind=function(){this.buffer.bind()};var l=[];return{create:function(e,t){function u(e){if(e)if("number"==typeof e)f(e),l.primType=4,l.vertCount=0|e,l.type=5121;else{var t=null,n=35044,r=-1,i=-1,a=0,h=0;Array.isArray(e)||X(e)||s(e)?t=e:("data"in e&&(t=e.data),"usage"in e&&(n=K[e.usage]),"primitive"in e&&(r=te[e.primitive]),"count"in e&&(i=0|e.count),"type"in e&&(h=c[e.type]),"length"in e?a=0|e.length:(a=i,5123===h||5122===h?a*=2:5125!==h&&5124!==h||(a*=4))),o(l,t,n,r,i,a,h)}else f(),l.primType=4,l.vertCount=0,l.type=5121;return u}var f=n.create(null,34963,!0),l=new i(f._buffer);return r.elementsCount++,u(e),u._reglType="elements",u._elements=l,u.subdata=function(e,t){return f.subdata(e,t),u},u.destroy=function(){a(l)},u},createStream:function(e){var t=l.pop();return t||(t=new i(n.create(null,34963,!0,!1)._buffer)),o(t,e,35040,-1,-1,0,0),t},destroyStream:function(e){l.push(e)},getElements:function(e){return"function"==typeof e&&e._elements instanceof i?e._elements:null},clear:function(){$(u).forEach(a)}}}function d(e){for(var t=U.allocType(5123,e.length),n=0;n<e.length;++n)if(isNaN(e[n]))t[n]=65535;else if(1/0===e[n])t[n]=31744;else if(-1/0===e[n])t[n]=64512;else{ne[0]=e[n];var r=(o=re[0])>>>31<<15,i=(o<<1>>>24)-127,o=o>>13&1023;t[n]=-24>i?r:-14>i?r+(o+1024>>-14-i):15<i?r+31744:r+(i+15<<10)+o}return t}function g(e){return Array.isArray(e)||X(e)}function m(e){return"[object "+e+"]"}function v(e){return Array.isArray(e)&&(0===e.length||"number"==typeof e[0])}function y(e){return!(!Array.isArray(e)||0===e.length||!g(e[0]))}function b(e){return Object.prototype.toString.call(e)}function w(e){if(!e)return!1;var t=b(e);return 0<=pe.indexOf(t)||v(e)||y(e)||s(e)}function x(e,t){36193===e.type?(e.data=d(t),U.freeType(t)):e.data=t}function A(e,t,n,r,i,o){if(e=void 0!==ge[e]?ge[e]:ae[e]*de[t],o&&(e*=6),i){for(r=0;1<=n;)r+=e*n*n,n/=2;return r}return e*n*r}function E(e,t,n,r,i,o,a){function u(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function f(e,t){e.internalformat=t.internalformat,e.format=t.format,e.type=t.type,e.compressed=t.compressed,e.premultiplyAlpha=t.premultiplyAlpha,e.flipY=t.flipY,e.unpackAlignment=t.unpackAlignment,e.colorSpace=t.colorSpace,e.width=t.width,e.height=t.height,e.channels=t.channels}function c(e,t){if("object"==typeof t&&t){"premultiplyAlpha"in t&&(e.premultiplyAlpha=t.premultiplyAlpha),"flipY"in t&&(e.flipY=t.flipY),"alignment"in t&&(e.unpackAlignment=t.alignment),"colorSpace"in t&&(e.colorSpace=W[t.colorSpace]),"type"in t&&(e.type=V[t.type]);var n=e.width,r=e.height,i=e.channels,o=!1;"shape"in t?(n=t.shape[0],r=t.shape[1],3===t.shape.length&&(i=t.shape[2],o=!0)):("radius"in t&&(n=r=t.radius),"width"in t&&(n=t.width),"height"in t&&(r=t.height),"channels"in t&&(i=t.channels,o=!0)),e.width=0|n,e.height=0|r,e.channels=0|i,n=!1,"format"in t&&(n=t.format,r=e.internalformat=Q[n],e.format=de[r],n in V&&!("type"in t)&&(e.type=V[n]),n in K&&(e.compressed=!0),n=!0),!o&&n?e.channels=ae[e.format]:o&&!n&&e.channels!==oe[e.format]&&(e.format=e.internalformat=oe[e.channels])}}function l(t){e.pixelStorei(37440,t.flipY),e.pixelStorei(37441,t.premultiplyAlpha),e.pixelStorei(37443,t.colorSpace),e.pixelStorei(3317,t.unpackAlignment)}function h(){u.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function p(e,t){var n=null;if(w(t)?n=t:t&&(c(e,t),"x"in t&&(e.xOffset=0|t.x),"y"in t&&(e.yOffset=0|t.y),w(t.data)&&(n=t.data)),t.copy){var r=i.viewportWidth,o=i.viewportHeight;e.width=e.width||r-e.xOffset,e.height=e.height||o-e.yOffset,e.needsCopy=!0}else if(n){if(X(n))e.channels=e.channels||4,e.data=n,"type"in t||5121!==e.type||(e.type=0|Y[Object.prototype.toString.call(n)]);else if(v(n)){switch(e.channels=e.channels||4,o=(r=n).length,e.type){case 5121:case 5123:case 5125:case 5126:(o=U.allocType(e.type,o)).set(r),e.data=o;break;case 36193:e.data=d(r)}e.alignment=1,e.needsFree=!0}else if(s(n)){r=n.data,Array.isArray(r)||5121!==e.type||(e.type=0|Y[Object.prototype.toString.call(r)]),o=n.shape;var a,u,f,l,h=n.stride;3===o.length?(f=o[2],l=h[2]):l=f=1,a=o[0],u=o[1],o=h[0],h=h[1],e.alignment=1,e.width=a,e.height=u,e.channels=f,e.format=e.internalformat=oe[f],e.needsFree=!0,a=l,n=n.offset,f=e.width,l=e.height,u=e.channels;for(var p=U.allocType(36193===e.type?5126:e.type,f*l*u),m=0,A=0;A<l;++A)for(var E=0;E<f;++E)for(var T=0;T<u;++T)p[m++]=r[o*E+h*A+a*T+n];x(e,p)}else if(b(n)===se||b(n)===ue||b(n)===fe)b(n)===se||b(n)===ue?e.element=n:e.element=n.canvas,e.width=e.element.width,e.height=e.element.height,e.channels=4;else if(b(n)===ce)e.element=n,e.width=n.width,e.height=n.height,e.channels=4;else if(b(n)===le)e.element=n,e.width=n.naturalWidth,e.height=n.naturalHeight,e.channels=4;else if(b(n)===he)e.element=n,e.width=n.videoWidth,e.height=n.videoHeight,e.channels=4;else if(y(n)){for(r=e.width||n[0].length,o=e.height||n.length,h=e.channels,h=g(n[0][0])?h||n[0][0].length:h||1,a=G.shape(n),f=1,l=0;l<a.length;++l)f*=a[l];f=U.allocType(36193===e.type?5126:e.type,f),G.flatten(n,a,"",f),x(e,f),e.alignment=1,e.width=r,e.height=o,e.channels=h,e.format=e.internalformat=oe[h],e.needsFree=!0}}else e.width=e.width||1,e.height=e.height||1,e.channels=e.channels||4}function m(t,n,i,o,a){var s=t.element,u=t.data,f=t.internalformat,c=t.format,h=t.type,p=t.width,d=t.height;l(t),s?e.texSubImage2D(n,a,i,o,c,h,s):t.compressed?e.compressedTexSubImage2D(n,a,i,o,f,p,d,u):t.needsCopy?(r(),e.copyTexSubImage2D(n,a,i,o,t.xOffset,t.yOffset,p,d)):e.texSubImage2D(n,a,i,o,p,d,c,h,u)}function E(){return ge.pop()||new h}function T(e){e.needsFree&&U.freeType(e.data),h.call(e),ge.push(e)}function S(){u.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function k(e,t,n){var r=e.images[0]=E();e.mipmask=1,r.width=e.width=t,r.height=e.height=n,r.channels=e.channels=4}function _(e,t){var n=null;if(w(t))f(n=e.images[0]=E(),e),p(n,t),e.mipmask=1;else if(c(e,t),Array.isArray(t.mipmap))for(var r=t.mipmap,i=0;i<r.length;++i)f(n=e.images[i]=E(),e),n.width>>=i,n.height>>=i,p(n,r[i]),e.mipmask|=1<<i;else f(n=e.images[0]=E(),e),p(n,t),e.mipmask=1;f(e,e.images[0])}function C(t,n){for(var i=t.images,o=0;o<i.length&&i[o];++o){var a=i[o],s=n,u=o,f=a.element,c=a.data,h=a.internalformat,p=a.format,d=a.type,g=a.width,m=a.height;l(a),f?e.texImage2D(s,u,p,p,d,f):a.compressed?e.compressedTexImage2D(s,u,h,g,m,0,c):a.needsCopy?(r(),e.copyTexImage2D(s,u,p,a.xOffset,a.yOffset,g,m,0)):e.texImage2D(s,u,p,g,m,0,p,d,c||null)}}function j(){var e=me.pop()||new S;u.call(e);for(var t=e.mipmask=0;16>t;++t)e.images[t]=null;return e}function O(e){for(var t=e.images,n=0;n<t.length;++n)t[n]&&T(t[n]),t[n]=null;me.push(e)}function D(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function M(e,t){"min"in t&&(e.minFilter=z[t.min],0<=ie.indexOf(e.minFilter)&&!("faces"in t)&&(e.genMipmaps=!0)),"mag"in t&&(e.magFilter=H[t.mag]);var n=e.wrapS,r=e.wrapT;if("wrap"in t){var i=t.wrap;"string"==typeof i?n=r=q[i]:Array.isArray(i)&&(n=q[i[0]],r=q[i[1]])}else"wrapS"in t&&(n=q[t.wrapS]),"wrapT"in t&&(r=q[t.wrapT]);if(e.wrapS=n,e.wrapT=r,"anisotropic"in t&&(e.anisotropic=t.anisotropic),"mipmap"in t){switch(n=!1,typeof t.mipmap){case"string":e.mipmapHint=I[t.mipmap],n=e.genMipmaps=!0;break;case"boolean":n=e.genMipmaps=t.mipmap;break;case"object":e.genMipmaps=!1,n=!0}!n||"min"in t||(e.minFilter=9984)}}function L(n,r){e.texParameteri(r,10241,n.minFilter),e.texParameteri(r,10240,n.magFilter),e.texParameteri(r,10242,n.wrapS),e.texParameteri(r,10243,n.wrapT),t.ext_texture_filter_anisotropic&&e.texParameteri(r,34046,n.anisotropic),n.genMipmaps&&(e.hint(33170,n.mipmapHint),e.generateMipmap(r))}function P(t){u.call(this),this.mipmask=0,this.internalformat=6408,this.id=ve++,this.refCount=1,this.target=t,this.texture=e.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new D,a.profile&&(this.stats={size:0})}function B(t){e.activeTexture(33984),e.bindTexture(t.target,t.texture)}function N(){var t=we[0];t?e.bindTexture(t.target,t.texture):e.bindTexture(3553,null)}function R(t){var n=t.texture,r=t.unit,i=t.target;0<=r&&(e.activeTexture(33984+r),e.bindTexture(i,null),we[r]=null),e.deleteTexture(n),t.texture=null,t.params=null,t.pixels=null,t.refCount=0,delete ye[t.id],o.textureCount--}var I={"don't care":4352,"dont care":4352,nice:4354,fast:4353},q={repeat:10497,clamp:33071,mirror:33648},H={nearest:9728,linear:9729},z=F({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},H),W={none:0,browser:37444},V={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},Q={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},K={};t.ext_srgb&&(Q.srgb=35904,Q.srgba=35906),t.oes_texture_float&&(V.float32=V.float=5126),t.oes_texture_half_float&&(V.float16=V["half float"]=36193),t.webgl_depth_texture&&(F(Q,{depth:6402,"depth stencil":34041}),F(V,{uint16:5123,uint32:5125,"depth stencil":34042})),t.webgl_compressed_texture_s3tc&&F(K,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),t.webgl_compressed_texture_atc&&F(K,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),t.webgl_compressed_texture_pvrtc&&F(K,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),t.webgl_compressed_texture_etc1&&(K["rgb etc1"]=36196);var J=Array.prototype.slice.call(e.getParameter(34467));Object.keys(K).forEach((function(e){var t=K[e];0<=J.indexOf(t)&&(Q[e]=t)}));var Z=Object.keys(Q);n.textureFormats=Z;var ee=[];Object.keys(Q).forEach((function(e){ee[Q[e]]=e}));var te=[];Object.keys(V).forEach((function(e){te[V[e]]=e}));var ne=[];Object.keys(H).forEach((function(e){ne[H[e]]=e}));var re=[];Object.keys(z).forEach((function(e){re[z[e]]=e}));var pe=[];Object.keys(q).forEach((function(e){pe[q[e]]=e}));var de=Z.reduce((function(e,n){var r=Q[n];return 6409===r||6406===r||6409===r||6410===r||6402===r||34041===r||t.ext_srgb&&(35904===r||35906===r)?e[r]=r:32855===r||0<=n.indexOf("rgba")?e[r]=6408:e[r]=6407,e}),{}),ge=[],me=[],ve=0,ye={},be=n.maxTextureUnits,we=Array(be).map((function(){return null}));return F(P.prototype,{bind:function(){this.bindCount+=1;var t=this.unit;if(0>t){for(var n=0;n<be;++n){var r=we[n];if(r){if(0<r.bindCount)continue;r.unit=-1}we[n]=this,t=n;break}a.profile&&o.maxTextureUnits<t+1&&(o.maxTextureUnits=t+1),this.unit=t,e.activeTexture(33984+t),e.bindTexture(this.target,this.texture)}return t},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&R(this)}}),a.profile&&(o.getTotalTextureSize=function(){var e=0;return Object.keys(ye).forEach((function(t){e+=ye[t].stats.size})),e}),{create2D:function(t,n){function r(e,t){var n=i.texInfo;D.call(n);var o=j();return"number"==typeof e?k(o,0|e,"number"==typeof t?0|t:0|e):e?(M(n,e),_(o,e)):k(o,1,1),n.genMipmaps&&(o.mipmask=(o.width<<1)-1),i.mipmask=o.mipmask,f(i,o),i.internalformat=o.internalformat,r.width=o.width,r.height=o.height,B(i),C(o,3553),L(n,3553),N(),O(o),a.profile&&(i.stats.size=A(i.internalformat,i.type,o.width,o.height,n.genMipmaps,!1)),r.format=ee[i.internalformat],r.type=te[i.type],r.mag=ne[n.magFilter],r.min=re[n.minFilter],r.wrapS=pe[n.wrapS],r.wrapT=pe[n.wrapT],r}var i=new P(3553);return ye[i.id]=i,o.textureCount++,r(t,n),r.subimage=function(e,t,n,o){t|=0,n|=0,o|=0;var a=E();return f(a,i),a.width=0,a.height=0,p(a,e),a.width=a.width||(i.width>>o)-t,a.height=a.height||(i.height>>o)-n,B(i),m(a,3553,t,n,o),N(),T(a),r},r.resize=function(t,n){var o=0|t,s=0|n||o;if(o===i.width&&s===i.height)return r;r.width=i.width=o,r.height=i.height=s,B(i);for(var u=0;i.mipmask>>u;++u){var f=o>>u,c=s>>u;if(!f||!c)break;e.texImage2D(3553,u,i.format,f,c,0,i.format,i.type,null)}return N(),a.profile&&(i.stats.size=A(i.internalformat,i.type,o,s,!1,!1)),r},r._reglType="texture2d",r._texture=i,a.profile&&(r.stats=i.stats),r.destroy=function(){i.decRef()},r},createCube:function(t,n,r,i,s,u){function l(e,t,n,r,i,o){var s,u=h.texInfo;for(D.call(u),s=0;6>s;++s)d[s]=j();if("number"!=typeof e&&e){if("object"==typeof e)if(t)_(d[0],e),_(d[1],t),_(d[2],n),_(d[3],r),_(d[4],i),_(d[5],o);else if(M(u,e),c(h,e),"faces"in e)for(e=e.faces,s=0;6>s;++s)f(d[s],h),_(d[s],e[s]);else for(s=0;6>s;++s)_(d[s],e)}else for(e=0|e||1,s=0;6>s;++s)k(d[s],e,e);for(f(h,d[0]),h.mipmask=u.genMipmaps?(d[0].width<<1)-1:d[0].mipmask,h.internalformat=d[0].internalformat,l.width=d[0].width,l.height=d[0].height,B(h),s=0;6>s;++s)C(d[s],34069+s);for(L(u,34067),N(),a.profile&&(h.stats.size=A(h.internalformat,h.type,l.width,l.height,u.genMipmaps,!0)),l.format=ee[h.internalformat],l.type=te[h.type],l.mag=ne[u.magFilter],l.min=re[u.minFilter],l.wrapS=pe[u.wrapS],l.wrapT=pe[u.wrapT],s=0;6>s;++s)O(d[s]);return l}var h=new P(34067);ye[h.id]=h,o.cubeCount++;var d=Array(6);return l(t,n,r,i,s,u),l.subimage=function(e,t,n,r,i){n|=0,r|=0,i|=0;var o=E();return f(o,h),o.width=0,o.height=0,p(o,t),o.width=o.width||(h.width>>i)-n,o.height=o.height||(h.height>>i)-r,B(h),m(o,34069+e,n,r,i),N(),T(o),l},l.resize=function(t){if((t|=0)!==h.width){l.width=h.width=t,l.height=h.height=t,B(h);for(var n=0;6>n;++n)for(var r=0;h.mipmask>>r;++r)e.texImage2D(34069+n,r,h.format,t>>r,t>>r,0,h.format,h.type,null);return N(),a.profile&&(h.stats.size=A(h.internalformat,h.type,l.width,l.height,!1,!0)),l}},l._reglType="textureCube",l._texture=h,a.profile&&(l.stats=h.stats),l.destroy=function(){h.decRef()},l},clear:function(){for(var t=0;t<be;++t)e.activeTexture(33984+t),e.bindTexture(3553,null),we[t]=null;$(ye).forEach(R),o.cubeCount=0,o.textureCount=0},getTexture:function(e){return null},restore:function(){for(var t=0;t<be;++t){var n=we[t];n&&(n.bindCount=0,n.unit=-1,we[t]=null)}$(ye).forEach((function(t){t.texture=e.createTexture(),e.bindTexture(t.target,t.texture);for(var n=0;32>n;++n)if(0!=(t.mipmask&1<<n))if(3553===t.target)e.texImage2D(3553,n,t.internalformat,t.width>>n,t.height>>n,0,t.internalformat,t.type,null);else for(var r=0;6>r;++r)e.texImage2D(34069+r,n,t.internalformat,t.width>>n,t.height>>n,0,t.internalformat,t.type,null);L(t.texInfo,t.target)}))},refresh:function(){for(var t=0;t<be;++t){var n=we[t];n&&(n.bindCount=0,n.unit=-1,we[t]=null),e.activeTexture(33984+t),e.bindTexture(3553,null),e.bindTexture(34067,null)}}}}function T(e,t,n,r,i,o){function a(e,t,n){this.target=e,this.texture=t,this.renderbuffer=n;var r=e=0;t?(e=t.width,r=t.height):n&&(e=n.width,r=n.height),this.width=e,this.height=r}function s(e){e&&(e.texture&&e.texture._texture.decRef(),e.renderbuffer&&e.renderbuffer._renderbuffer.decRef())}function u(e,t,n){e&&(e.texture?e.texture._texture.refCount+=1:e.renderbuffer._renderbuffer.refCount+=1)}function f(t,n){n&&(n.texture?e.framebufferTexture2D(36160,t,n.target,n.texture._texture.texture,0):e.framebufferRenderbuffer(36160,t,36161,n.renderbuffer._renderbuffer.renderbuffer))}function c(e){var t=3553,n=null,r=null,i=e;return"object"==typeof e&&(i=e.data,"target"in e&&(t=0|e.target)),"texture2d"===(e=i._reglType)||"textureCube"===e?n=i:"renderbuffer"===e&&(r=i,t=36161),new a(t,n,r)}function l(e,t,n,o,s){return n?((e=r.create2D({width:e,height:t,format:o,type:s}))._texture.refCount=0,new a(3553,e,null)):((e=i.create({width:e,height:t,format:o}))._renderbuffer.refCount=0,new a(36161,null,e))}function h(e){return e&&(e.texture||e.renderbuffer)}function p(e,t,n){e&&(e.texture?e.texture.resize(t,n):e.renderbuffer&&e.renderbuffer.resize(t,n),e.width=t,e.height=n)}function d(){this.id=E++,T[this.id]=this,this.framebuffer=e.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function g(e){e.colorAttachments.forEach(s),s(e.depthAttachment),s(e.stencilAttachment),s(e.depthStencilAttachment)}function m(t){e.deleteFramebuffer(t.framebuffer),t.framebuffer=null,o.framebufferCount--,delete T[t.id]}function v(t){var r;e.bindFramebuffer(36160,t.framebuffer);var i=t.colorAttachments;for(r=0;r<i.length;++r)f(36064+r,i[r]);for(r=i.length;r<n.maxColorAttachments;++r)e.framebufferTexture2D(36160,36064+r,3553,null,0);e.framebufferTexture2D(36160,33306,3553,null,0),e.framebufferTexture2D(36160,36096,3553,null,0),e.framebufferTexture2D(36160,36128,3553,null,0),f(36096,t.depthAttachment),f(36128,t.stencilAttachment),f(33306,t.depthStencilAttachment),e.checkFramebufferStatus(36160),e.isContextLost(),e.bindFramebuffer(36160,b.next?b.next.framebuffer:null),b.cur=b.next,e.getError()}function y(e,t){function n(e,t){var i,o=0,a=0,s=!0,f=!0;i=null;var p=!0,d="rgba",m="uint8",y=1,b=null,A=null,E=null,T=!1;"number"==typeof e?(o=0|e,a=0|t||o):e?("shape"in e?(o=(a=e.shape)[0],a=a[1]):("radius"in e&&(o=a=e.radius),"width"in e&&(o=e.width),"height"in e&&(a=e.height)),("color"in e||"colors"in e)&&(i=e.color||e.colors,Array.isArray(i)),i||("colorCount"in e&&(y=0|e.colorCount),"colorTexture"in e&&(p=!!e.colorTexture,d="rgba4"),"colorType"in e&&(m=e.colorType,!p)&&("half float"===m||"float16"===m?d="rgba16f":"float"!==m&&"float32"!==m||(d="rgba32f")),"colorFormat"in e&&(d=e.colorFormat,0<=w.indexOf(d)?p=!0:0<=x.indexOf(d)&&(p=!1))),("depthTexture"in e||"depthStencilTexture"in e)&&(T=!(!e.depthTexture&&!e.depthStencilTexture)),"depth"in e&&("boolean"==typeof e.depth?s=e.depth:(b=e.depth,f=!1)),"stencil"in e&&("boolean"==typeof e.stencil?f=e.stencil:(A=e.stencil,s=!1)),"depthStencil"in e&&("boolean"==typeof e.depthStencil?s=f=e.depthStencil:(E=e.depthStencil,f=s=!1))):o=a=1;var S=null,k=null,_=null,C=null;if(Array.isArray(i))S=i.map(c);else if(i)S=[c(i)];else for(S=Array(y),i=0;i<y;++i)S[i]=l(o,a,p,d,m);for(o=o||S[0].width,a=a||S[0].height,b?k=c(b):s&&!f&&(k=l(o,a,T,"depth","uint32")),A?_=c(A):f&&!s&&(_=l(o,a,!1,"stencil","uint8")),E?C=c(E):!b&&!A&&f&&s&&(C=l(o,a,T,"depth stencil","depth stencil")),s=null,i=0;i<S.length;++i)u(S[i]),S[i]&&S[i].texture&&(f=ye[S[i].texture._texture.format]*be[S[i].texture._texture.type],null===s&&(s=f));return u(k),u(_),u(C),g(r),r.width=o,r.height=a,r.colorAttachments=S,r.depthAttachment=k,r.stencilAttachment=_,r.depthStencilAttachment=C,n.color=S.map(h),n.depth=h(k),n.stencil=h(_),n.depthStencil=h(C),n.width=r.width,n.height=r.height,v(r),n}var r=new d;return o.framebufferCount++,n(e,t),F(n,{resize:function(e,t){var i=Math.max(0|e,1),o=Math.max(0|t||i,1);if(i===r.width&&o===r.height)return n;for(var a=r.colorAttachments,s=0;s<a.length;++s)p(a[s],i,o);return p(r.depthAttachment,i,o),p(r.stencilAttachment,i,o),p(r.depthStencilAttachment,i,o),r.width=n.width=i,r.height=n.height=o,v(r),n},_reglType:"framebuffer",_framebuffer:r,destroy:function(){m(r),g(r)},use:function(e){b.setFBO({framebuffer:n},e)}})}var b={cur:null,next:null,dirty:!1,setFBO:null},w=["rgba"],x=["rgba4","rgb565","rgb5 a1"];t.ext_srgb&&x.push("srgba"),t.ext_color_buffer_half_float&&x.push("rgba16f","rgb16f"),t.webgl_color_buffer_float&&x.push("rgba32f");var A=["uint8"];t.oes_texture_half_float&&A.push("half float","float16"),t.oes_texture_float&&A.push("float","float32");var E=0,T={};return F(b,{getFramebuffer:function(e){return"function"==typeof e&&"framebuffer"===e._reglType&&(e=e._framebuffer)instanceof d?e:null},create:y,createCube:function(e){function t(e){var i,o={color:null},a=0,s=null;i="rgba";var u="uint8",f=1;if("number"==typeof e?a=0|e:e?("shape"in e?a=e.shape[0]:("radius"in e&&(a=0|e.radius),"width"in e?a=0|e.width:"height"in e&&(a=0|e.height)),("color"in e||"colors"in e)&&(s=e.color||e.colors,Array.isArray(s)),s||("colorCount"in e&&(f=0|e.colorCount),"colorType"in e&&(u=e.colorType),"colorFormat"in e&&(i=e.colorFormat)),"depth"in e&&(o.depth=e.depth),"stencil"in e&&(o.stencil=e.stencil),"depthStencil"in e&&(o.depthStencil=e.depthStencil)):a=1,s)if(Array.isArray(s))for(e=[],i=0;i<s.length;++i)e[i]=s[i];else e=[s];else for(e=Array(f),s={radius:a,format:i,type:u},i=0;i<f;++i)e[i]=r.createCube(s);for(o.color=Array(e.length),i=0;i<e.length;++i)f=e[i],a=a||f.width,o.color[i]={target:34069,data:e[i]};for(i=0;6>i;++i){for(f=0;f<e.length;++f)o.color[f].target=34069+i;0<i&&(o.depth=n[0].depth,o.stencil=n[0].stencil,o.depthStencil=n[0].depthStencil),n[i]?n[i](o):n[i]=y(o)}return F(t,{width:a,height:a,color:e})}var n=Array(6);return t(e),F(t,{faces:n,resize:function(e){var r=0|e;if(r===t.width)return t;var i=t.color;for(e=0;e<i.length;++e)i[e].resize(r);for(e=0;6>e;++e)n[e].resize(r);return t.width=t.height=r,t},_reglType:"framebufferCube",destroy:function(){n.forEach((function(e){e.destroy()}))}})},clear:function(){$(T).forEach(m)},restore:function(){b.cur=null,b.next=null,b.dirty=!0,$(T).forEach((function(t){t.framebuffer=e.createFramebuffer(),v(t)}))}})}function S(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function k(e,t,n,r,i){function o(){this.id=++f,this.attributes=[];var e=t.oes_vertex_array_object;this.vao=e?e.createVertexArrayOES():null,c[this.id]=this,this.buffers=[]}var a=n.maxAttributes,u=Array(a);for(n=0;n<a;++n)u[n]=new S;var f=0,c={},l={Record:S,scope:{},state:u,currentVAO:null,targetVAO:null,restore:t.oes_vertex_array_object?function(){t.oes_vertex_array_object&&$(c).forEach((function(e){e.refresh()}))}:function(){},createVAO:function(e){function t(e){var r={},o=n.attributes;o.length=e.length;for(var a=0;a<e.length;++a){var u,f=e[a],c=o[a]=new S,l=f.data||f;Array.isArray(l)||X(l)||s(l)?(n.buffers[a]&&(u=n.buffers[a],X(l)&&u._buffer.byteLength>=l.byteLength?u.subdata(l):(u.destroy(),n.buffers[a]=null)),n.buffers[a]||(u=n.buffers[a]=i.create(f,34962,!1,!0)),c.buffer=i.getBuffer(u),c.size=0|c.buffer.dimension,c.normalized=!1,c.type=c.buffer.dtype,c.offset=0,c.stride=0,c.divisor=0,c.state=1,r[a]=1):i.getBuffer(f)?(c.buffer=i.getBuffer(f),c.size=0|c.buffer.dimension,c.normalized=!1,c.type=c.buffer.dtype,c.offset=0,c.stride=0,c.divisor=0,c.state=1):i.getBuffer(f.buffer)?(c.buffer=i.getBuffer(f.buffer),c.size=0|(+f.size||c.buffer.dimension),c.normalized=!!f.normalized||!1,c.type="type"in f?Q[f.type]:c.buffer.dtype,c.offset=0|(f.offset||0),c.stride=0|(f.stride||0),c.divisor=0|(f.divisor||0),c.state=1):"x"in f&&(c.x=+f.x||0,c.y=+f.y||0,c.z=+f.z||0,c.w=+f.w||0,c.state=2)}for(e=0;e<n.buffers.length;++e)!r[e]&&n.buffers[e]&&(n.buffers[e].destroy(),n.buffers[e]=null);return n.refresh(),t}var n=new o;return r.vaoCount+=1,t.destroy=function(){for(var e=0;e<n.buffers.length;++e)n.buffers[e]&&n.buffers[e].destroy();n.buffers.length=0,n.destroy()},t._vao=n,t._reglType="vao",t(e)},getVAO:function(e){return"function"==typeof e&&e._vao?e._vao:null},destroyBuffer:function(t){for(var n=0;n<u.length;++n){var r=u[n];r.buffer===t&&(e.disableVertexAttribArray(n),r.buffer=null)}},setVAO:t.oes_vertex_array_object?function(e){if(e!==l.currentVAO){var n=t.oes_vertex_array_object;e?n.bindVertexArrayOES(e.vao):n.bindVertexArrayOES(null),l.currentVAO=e}}:function(n){if(n!==l.currentVAO){if(n)n.bindAttrs();else for(var r=t.angle_instanced_arrays,i=0;i<u.length;++i){var o=u[i];o.buffer?(e.enableVertexAttribArray(i),e.vertexAttribPointer(i,o.size,o.type,o.normalized,o.stride,o.offfset),r&&o.divisor&&r.vertexAttribDivisorANGLE(i,o.divisor)):(e.disableVertexAttribArray(i),e.vertexAttrib4f(i,o.x,o.y,o.z,o.w))}l.currentVAO=n}},clear:t.oes_vertex_array_object?function(){$(c).forEach((function(e){e.destroy()}))}:function(){}};return o.prototype.bindAttrs=function(){for(var n=t.angle_instanced_arrays,r=this.attributes,i=0;i<r.length;++i){var o=r[i];o.buffer?(e.enableVertexAttribArray(i),e.bindBuffer(34962,o.buffer.buffer),e.vertexAttribPointer(i,o.size,o.type,o.normalized,o.stride,o.offset),n&&o.divisor&&n.vertexAttribDivisorANGLE(i,o.divisor)):(e.disableVertexAttribArray(i),e.vertexAttrib4f(i,o.x,o.y,o.z,o.w))}for(n=r.length;n<a;++n)e.disableVertexAttribArray(n)},o.prototype.refresh=function(){var e=t.oes_vertex_array_object;e&&(e.bindVertexArrayOES(this.vao),this.bindAttrs(),l.currentVAO=this)},o.prototype.destroy=function(){if(this.vao){var e=t.oes_vertex_array_object;this===l.currentVAO&&(l.currentVAO=null,e.bindVertexArrayOES(null)),e.deleteVertexArrayOES(this.vao),this.vao=null}c[this.id]&&(delete c[this.id],--r.vaoCount)},l}function _(e,t,n,r){function i(e,t,n,r){this.name=e,this.id=t,this.location=n,this.info=r}function o(e,t){for(var n=0;n<e.length;++n)if(e[n].id===t.id)return void(e[n].location=t.location);e.push(t)}function a(n,r,i){if(!(a=(i=35632===n?f:c)[r])){var o=t.str(r),a=e.createShader(n);e.shaderSource(a,o),e.compileShader(a),i[r]=a}return a}function s(e,t){this.id=p++,this.fragId=e,this.vertId=t,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,r.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function u(n,s,u){var f;f=a(35632,n.fragId);var c=a(35633,n.vertId);if(s=n.program=e.createProgram(),e.attachShader(s,f),e.attachShader(s,c),u)for(f=0;f<u.length;++f)c=u[f],e.bindAttribLocation(s,c[0],c[1]);e.linkProgram(s),c=e.getProgramParameter(s,35718),r.profile&&(n.stats.uniformsCount=c);var l=n.uniforms;for(f=0;f<c;++f)if(u=e.getActiveUniform(s,f))if(1<u.size)for(var h=0;h<u.size;++h){var p=u.name.replace("[0]","["+h+"]");o(l,new i(p,t.id(p),e.getUniformLocation(s,p),u))}else o(l,new i(u.name,t.id(u.name),e.getUniformLocation(s,u.name),u));for(c=e.getProgramParameter(s,35721),r.profile&&(n.stats.attributesCount=c),n=n.attributes,f=0;f<c;++f)(u=e.getActiveAttrib(s,f))&&o(n,new i(u.name,t.id(u.name),e.getAttribLocation(s,u.name),u))}var f={},c={},l={},h=[],p=0;return r.profile&&(n.getMaxUniformsCount=function(){var e=0;return h.forEach((function(t){t.stats.uniformsCount>e&&(e=t.stats.uniformsCount)})),e},n.getMaxAttributesCount=function(){var e=0;return h.forEach((function(t){t.stats.attributesCount>e&&(e=t.stats.attributesCount)})),e}),{clear:function(){var t=e.deleteShader.bind(e);$(f).forEach(t),f={},$(c).forEach(t),c={},h.forEach((function(t){e.deleteProgram(t.program)})),h.length=0,l={},n.shaderCount=0},program:function(t,r,i,o){var a=l[r];a||(a=l[r]={});var p=a[t];if(p&&(p.refCount++,!o))return p;var d=new s(r,t);return n.shaderCount++,u(d,i,o),p||(a[t]=d),h.push(d),F(d,{destroy:function(){if(d.refCount--,0>=d.refCount){e.deleteProgram(d.program);var t=h.indexOf(d);h.splice(t,1),n.shaderCount--}0>=a[d.vertId].refCount&&(e.deleteShader(c[d.vertId]),delete c[d.vertId],delete l[d.fragId][d.vertId]),Object.keys(l[d.fragId]).length||(e.deleteShader(f[d.fragId]),delete f[d.fragId],delete l[d.fragId])}})},restore:function(){f={},c={};for(var e=0;e<h.length;++e)u(h[e],null,h[e].attributes.map((function(e){return[e.location,e.name]})))},shader:a,frag:-1,vert:-1}}function C(e,t,n,r,i,o,a){function s(i){var o;o=null===t.next?5121:t.next.colorAttachments[0].texture._texture.type;var a=0,s=0,u=r.framebufferWidth,f=r.framebufferHeight,c=null;return X(i)?c=i:i&&(a=0|i.x,s=0|i.y,u=0|(i.width||r.framebufferWidth-a),f=0|(i.height||r.framebufferHeight-s),c=i.data||null),n(),i=u*f*4,c||(5121===o?c=new Uint8Array(i):5126===o&&(c=c||new Float32Array(i))),e.pixelStorei(3333,4),e.readPixels(a,s,u,f,6408,o,c),c}return function(e){return e&&"framebuffer"in e?function(e){var n;return t.setFBO({framebuffer:e.framebuffer},(function(){n=s(e)})),n}(e):s(e)}}function j(e){return Array.prototype.slice.call(e)}function O(e){return j(e).join("")}function D(e){return Array.isArray(e)||X(e)||s(e)}function M(e){return e.sort((function(e,t){return"viewport"===e?-1:"viewport"===t?1:e<t?-1:1}))}function L(e,t,n,r){this.thisDep=e,this.contextDep=t,this.propDep=n,this.append=r}function P(e){return e&&!(e.thisDep||e.contextDep||e.propDep)}function B(e){return new L(!1,!1,!1,e)}function N(e,t){var n=e.type;if(0===n)return new L(!0,1<=(n=e.data.length),2<=n,t);if(4===n)return new L((n=e.data).thisDep,n.contextDep,n.propDep,t);if(5===n)return new L(!1,!1,!1,t);if(6===n){for(var r=n=!1,i=!1,o=0;o<e.data.length;++o){var a=e.data[o];1===a.type?i=!0:2===a.type?r=!0:3===a.type?n=!0:0===a.type?(n=!0,1<=(a=a.data)&&(r=!0),2<=a&&(i=!0)):4===a.type&&(n=n||a.data.thisDep,r=r||a.data.contextDep,i=i||a.data.propDep)}return new L(n,r,i,t)}return new L(3===n,2===n,1===n,t)}function R(e,t,n,r,o,a,s,u,f,c,l,h,p,d,m){function v(e){return e.replace(".","_")}function y(e,t,n){var r=v(e);oe.push(e),ie[r]=re[r]=!!n,ae[r]=t}function b(e,t,n){var r=v(e);oe.push(e),Array.isArray(n)?(re[r]=n.slice(),ie[r]=n.slice()):re[r]=ie[r]=n,se[r]=t}function w(){var e=function(){function e(){var e=[],t=[];return F((function(){e.push.apply(e,j(arguments))}),{def:function(){var r="v"+n++;return t.push(r),0<arguments.length&&(e.push(r,"="),e.push.apply(e,j(arguments)),e.push(";")),r},toString:function(){return O([0<t.length?"var "+t.join(",")+";":"",O(e)])}})}function t(){function t(e,t){r(e,t,"=",n.def(e,t),";")}var n=e(),r=e(),i=n.toString,o=r.toString;return F((function(){n.apply(n,j(arguments))}),{def:n.def,entry:n,exit:r,save:t,set:function(e,r,i){t(e,r),n(e,r,"=",i,";")},toString:function(){return i()+o()}})}var n=0,r=[],i=[],o=e(),a={};return{global:o,link:function(e){for(var t=0;t<i.length;++t)if(i[t]===e)return r[t];return t="g"+n++,r.push(t),i.push(e),t},block:e,proc:function(e,n){function r(){var e="a"+i.length;return i.push(e),e}var i=[];n=n||0;for(var o=0;o<n;++o)r();var s=(o=t()).toString;return a[e]=F(o,{arg:r,toString:function(){return O(["function(",i.join(),"){",s(),"}"])}})},scope:t,cond:function(){var e=O(arguments),n=t(),r=t(),i=n.toString,o=r.toString;return F(n,{then:function(){return n.apply(n,j(arguments)),this},else:function(){return r.apply(r,j(arguments)),this},toString:function(){var t=o();return t&&(t="else{"+t+"}"),O(["if(",e,"){",i(),"}",t])}})},compile:function(){var e=['"use strict";',o,"return {"];Object.keys(a).forEach((function(t){e.push('"',t,'":',a[t].toString(),",")})),e.push("}");var t=O(e).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,r.concat(t)).apply(null,i)}}}(),n=e.link,r=e.global;e.id=ce++,e.batchId="0";var i=n(ue),o=e.shared={props:"a0"};Object.keys(ue).forEach((function(e){o[e]=r.def(i,".",e)}));var a=e.next={},s=e.current={};Object.keys(se).forEach((function(e){Array.isArray(re[e])&&(a[e]=r.def(o.next,".",e),s[e]=r.def(o.current,".",e))}));var u=e.constants={};Object.keys(fe).forEach((function(e){u[e]=r.def(JSON.stringify(fe[e]))})),e.invoke=function(t,r){switch(r.type){case 0:var i=["this",o.context,o.props,e.batchId];return t.def(n(r.data),".call(",i.slice(0,Math.max(r.data.length+1,4)),")");case 1:return t.def(o.props,r.data);case 2:return t.def(o.context,r.data);case 3:return t.def("this",r.data);case 4:return r.data.append(e,t),r.data.ref;case 5:return r.data.toString();case 6:return r.data.map((function(n){return e.invoke(t,n)}))}},e.attribCache={};var f={};return e.scopeAttrib=function(e){if((e=t.id(e))in f)return f[e];var r=c.scope[e];return r||(r=c.scope[e]=new J),f[e]=n(r)},e}function x(e,t){var n=e.static,r=e.dynamic;if("framebuffer"in n){var i=n.framebuffer;return i?(i=u.getFramebuffer(i),B((function(e,t){var n=e.link(i),r=e.shared;return t.set(r.framebuffer,".next",n),r=r.context,t.set(r,".framebufferWidth",n+".width"),t.set(r,".framebufferHeight",n+".height"),n}))):B((function(e,t){var n=e.shared;return t.set(n.framebuffer,".next","null"),n=n.context,t.set(n,".framebufferWidth",n+".drawingBufferWidth"),t.set(n,".framebufferHeight",n+".drawingBufferHeight"),"null"}))}if("framebuffer"in r){var o=r.framebuffer;return N(o,(function(e,t){var n=e.invoke(t,o),r=e.shared,i=r.framebuffer;return n=t.def(i,".getFramebuffer(",n,")"),t.set(i,".next",n),r=r.context,t.set(r,".framebufferWidth",n+"?"+n+".width:"+r+".drawingBufferWidth"),t.set(r,".framebufferHeight",n+"?"+n+".height:"+r+".drawingBufferHeight"),n}))}return null}function A(e,n,r){function i(e){if(e in o){var n=t.id(o[e]);return(e=B((function(){return n}))).id=n,e}if(e in a){var r=a[e];return N(r,(function(e,t){var n=e.invoke(t,r);return t.def(e.shared.strings,".id(",n,")")}))}return null}var o=e.static,a=e.dynamic,s=i("frag"),u=i("vert"),f=null;return P(s)&&P(u)?(f=l.program(u.id,s.id,null,r),e=B((function(e,t){return e.link(f)}))):e=new L(s&&s.thisDep||u&&u.thisDep,s&&s.contextDep||u&&u.contextDep,s&&s.propDep||u&&u.propDep,(function(e,t){var n,r,i=e.shared.shader;return n=s?s.append(e,t):t.def(i,".","frag"),r=u?u.append(e,t):t.def(i,".","vert"),t.def(i+".program("+r+","+n+")")})),{frag:s,vert:u,progVar:e,program:f}}function E(e,t){function n(e,t){if(e in r){var n=0|r[e];return B((function(e,r){return t&&(e.OFFSET=n),n}))}if(e in i){var a=i[e];return N(a,(function(e,n){var r=e.invoke(n,a);return t&&(e.OFFSET=r),r}))}return t&&o?B((function(e,t){return e.OFFSET="0",0})):null}var r=e.static,i=e.dynamic,o=function(){if("elements"in r){var e=r.elements;D(e)?e=a.getElements(a.create(e,!0)):e&&(e=a.getElements(e));var t=B((function(t,n){if(e){var r=t.link(e);return t.ELEMENTS=r}return t.ELEMENTS=null}));return t.value=e,t}if("elements"in i){var n=i.elements;return N(n,(function(e,t){var r=(i=e.shared).isBufferArgs,i=i.elements,o=e.invoke(t,n),a=t.def("null");return r=t.def(r,"(",o,")"),o=e.cond(r).then(a,"=",i,".createStream(",o,");").else(a,"=",i,".getElements(",o,");"),t.entry(o),t.exit(e.cond(r).then(i,".destroyStream(",a,");")),e.ELEMENTS=a}))}return null}(),s=n("offset",!0);return{elements:o,primitive:function(){if("primitive"in r){var e=r.primitive;return B((function(t,n){return te[e]}))}if("primitive"in i){var t=i.primitive;return N(t,(function(e,n){var r=e.constants.primTypes,i=e.invoke(n,t);return n.def(r,"[",i,"]")}))}return o?P(o)?o.value?B((function(e,t){return t.def(e.ELEMENTS,".primType")})):B((function(){return 4})):new L(o.thisDep,o.contextDep,o.propDep,(function(e,t){var n=e.ELEMENTS;return t.def(n,"?",n,".primType:",4)})):null}(),count:function(){if("count"in r){var e=0|r.count;return B((function(){return e}))}if("count"in i){var t=i.count;return N(t,(function(e,n){return e.invoke(n,t)}))}return o?P(o)?o?s?new L(s.thisDep,s.contextDep,s.propDep,(function(e,t){return t.def(e.ELEMENTS,".vertCount-",e.OFFSET)})):B((function(e,t){return t.def(e.ELEMENTS,".vertCount")})):B((function(){return-1})):new L(o.thisDep||s.thisDep,o.contextDep||s.contextDep,o.propDep||s.propDep,(function(e,t){var n=e.ELEMENTS;return e.OFFSET?t.def(n,"?",n,".vertCount-",e.OFFSET,":-1"):t.def(n,"?",n,".vertCount:-1")})):null}(),instances:n("instances",!1),offset:s}}function T(e,n){var r=e.static,i=e.dynamic,a={};return Object.keys(r).forEach((function(e){var n=r[e],i=t.id(e),s=new J;if(D(n))s.state=1,s.buffer=o.getBuffer(o.create(n,34962,!1,!0)),s.type=0;else if(f=o.getBuffer(n))s.state=1,s.buffer=f,s.type=0;else if("constant"in n){var u=n.constant;s.buffer="null",s.state=2,"number"==typeof u?s.x=u:we.forEach((function(e,t){t<u.length&&(s[e]=u[t])}))}else{var f=D(n.buffer)?o.getBuffer(o.create(n.buffer,34962,!1,!0)):o.getBuffer(n.buffer),c=0|n.offset,l=0|n.stride,h=0|n.size,p=!!n.normalized,d=0;"type"in n&&(d=Q[n.type]),n=0|n.divisor,s.buffer=f,s.state=1,s.size=h,s.normalized=p,s.type=d||f.dtype,s.offset=c,s.stride=l,s.divisor=n}a[e]=B((function(e,t){var n=e.attribCache;if(i in n)return n[i];var r={isStream:!1};return Object.keys(s).forEach((function(e){r[e]=s[e]})),s.buffer&&(r.buffer=e.link(s.buffer),r.type=r.type||r.buffer+".dtype"),n[i]=r}))})),Object.keys(i).forEach((function(e){var t=i[e];a[e]=N(t,(function(e,n){function r(e){n(u[e],"=",i,".",e,"|0;")}var i=e.invoke(n,t),o=e.shared,a=e.constants,s=o.isBufferArgs,u=(o=o.buffer,{isStream:n.def(!1)}),f=new J;f.state=1,Object.keys(f).forEach((function(e){u[e]=n.def(""+f[e])}));var c=u.buffer,l=u.type;return n("if(",s,"(",i,")){",u.isStream,"=true;",c,"=",o,".createStream(",34962,",",i,");",l,"=",c,".dtype;","}else{",c,"=",o,".getBuffer(",i,");","if(",c,"){",l,"=",c,".dtype;",'}else if("constant" in ',i,"){",u.state,"=",2,";","if(typeof "+i+'.constant === "number"){',u[we[0]],"=",i,".constant;",we.slice(1).map((function(e){return u[e]})).join("="),"=0;","}else{",we.map((function(e,t){return u[e]+"="+i+".constant.length>"+t+"?"+i+".constant["+t+"]:0;"})).join(""),"}}else{","if(",s,"(",i,".buffer)){",c,"=",o,".createStream(",34962,",",i,".buffer);","}else{",c,"=",o,".getBuffer(",i,".buffer);","}",l,'="type" in ',i,"?",a.glTypes,"[",i,".type]:",c,".dtype;",u.normalized,"=!!",i,".normalized;"),r("size"),r("offset"),r("stride"),r("divisor"),n("}}"),n.exit("if(",u.isStream,"){",o,".destroyStream(",c,");","}"),u}))})),a}function S(e,t,r,o,a){function s(e){var t=f[e];t&&(h[e]=t)}var u=function(e,t){if("string"==typeof(n=e.static).frag&&"string"==typeof n.vert){if(0<Object.keys(t.dynamic).length)return null;var n=t.static,r=Object.keys(n);if(0<r.length&&"number"==typeof n[r[0]]){for(var i=[],o=0;o<r.length;++o)i.push([0|n[r[o]],r[o]]);return i}}return null}(e,t),f=function(e,t,n){function r(e){if(e in i){var n=i[e];e=!0;var r,a,s=0|n.x,u=0|n.y;return"width"in n?r=0|n.width:e=!1,"height"in n?a=0|n.height:e=!1,new L(!e&&t&&t.thisDep,!e&&t&&t.contextDep,!e&&t&&t.propDep,(function(e,t){var i=e.shared.context,o=r;"width"in n||(o=t.def(i,".","framebufferWidth","-",s));var f=a;return"height"in n||(f=t.def(i,".","framebufferHeight","-",u)),[s,u,o,f]}))}if(e in o){var f=o[e];return e=N(f,(function(e,t){var n=e.invoke(t,f),r=e.shared.context,i=t.def(n,".x|0"),o=t.def(n,".y|0");return[i,o,t.def('"width" in ',n,"?",n,".width|0:","(",r,".","framebufferWidth","-",i,")"),n=t.def('"height" in ',n,"?",n,".height|0:","(",r,".","framebufferHeight","-",o,")")]})),t&&(e.thisDep=e.thisDep||t.thisDep,e.contextDep=e.contextDep||t.contextDep,e.propDep=e.propDep||t.propDep),e}return t?new L(t.thisDep,t.contextDep,t.propDep,(function(e,t){var n=e.shared.context;return[0,0,t.def(n,".","framebufferWidth"),t.def(n,".","framebufferHeight")]})):null}var i=e.static,o=e.dynamic;if(e=r("viewport")){var a=e;e=new L(e.thisDep,e.contextDep,e.propDep,(function(e,t){var n=a.append(e,t),r=e.shared.context;return t.set(r,".viewportWidth",n[2]),t.set(r,".viewportHeight",n[3]),n}))}return{viewport:e,scissor_box:r("scissor.box")}}(e,d=x(e)),l=E(e),h=function(e,t){var n=e.static,r=e.dynamic,o={};return oe.forEach((function(e){function t(t,i){if(e in n){var s=t(n[e]);o[a]=B((function(){return s}))}else if(e in r){var u=r[e];o[a]=N(u,(function(e,t){return i(e,t,e.invoke(t,u))}))}}var a=v(e);switch(e){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":return t((function(e){return e}),(function(e,t,n){return n}));case"depth.func":return t((function(e){return Ee[e]}),(function(e,t,n){return t.def(e.constants.compareFuncs,"[",n,"]")}));case"depth.range":return t((function(e){return e}),(function(e,t,n){return[t.def("+",n,"[0]"),t=t.def("+",n,"[1]")]}));case"blend.func":return t((function(e){return[Ae["srcRGB"in e?e.srcRGB:e.src],Ae["dstRGB"in e?e.dstRGB:e.dst],Ae["srcAlpha"in e?e.srcAlpha:e.src],Ae["dstAlpha"in e?e.dstAlpha:e.dst]]}),(function(e,t,n){function r(e,r){return t.def('"',e,r,'" in ',n,"?",n,".",e,r,":",n,".",e)}e=e.constants.blendFuncs;var i=r("src","RGB"),o=r("dst","RGB"),a=(i=t.def(e,"[",i,"]"),t.def(e,"[",r("src","Alpha"),"]"));return[i,o=t.def(e,"[",o,"]"),a,e=t.def(e,"[",r("dst","Alpha"),"]")]}));case"blend.equation":return t((function(e){return"string"==typeof e?[Z[e],Z[e]]:"object"==typeof e?[Z[e.rgb],Z[e.alpha]]:void 0}),(function(e,t,n){var r=e.constants.blendEquations,i=t.def(),o=t.def();return(e=e.cond("typeof ",n,'==="string"')).then(i,"=",o,"=",r,"[",n,"];"),e.else(i,"=",r,"[",n,".rgb];",o,"=",r,"[",n,".alpha];"),t(e),[i,o]}));case"blend.color":return t((function(e){return i(4,(function(t){return+e[t]}))}),(function(e,t,n){return i(4,(function(e){return t.def("+",n,"[",e,"]")}))}));case"stencil.mask":return t((function(e){return 0|e}),(function(e,t,n){return t.def(n,"|0")}));case"stencil.func":return t((function(e){return[Ee[e.cmp||"keep"],e.ref||0,"mask"in e?e.mask:-1]}),(function(e,t,n){return[e=t.def('"cmp" in ',n,"?",e.constants.compareFuncs,"[",n,".cmp]",":",7680),t.def(n,".ref|0"),t=t.def('"mask" in ',n,"?",n,".mask|0:-1")]}));case"stencil.opFront":case"stencil.opBack":return t((function(t){return["stencil.opBack"===e?1029:1028,Te[t.fail||"keep"],Te[t.zfail||"keep"],Te[t.zpass||"keep"]]}),(function(t,n,r){function i(e){return n.def('"',e,'" in ',r,"?",o,"[",r,".",e,"]:",7680)}var o=t.constants.stencilOps;return["stencil.opBack"===e?1029:1028,i("fail"),i("zfail"),i("zpass")]}));case"polygonOffset.offset":return t((function(e){return[0|e.factor,0|e.units]}),(function(e,t,n){return[t.def(n,".factor|0"),t=t.def(n,".units|0")]}));case"cull.face":return t((function(e){var t=0;return"front"===e?t=1028:"back"===e&&(t=1029),t}),(function(e,t,n){return t.def(n,'==="front"?',1028,":",1029)}));case"lineWidth":return t((function(e){return e}),(function(e,t,n){return n}));case"frontFace":return t((function(e){return Se[e]}),(function(e,t,n){return t.def(n+'==="cw"?2304:2305')}));case"colorMask":return t((function(e){return e.map((function(e){return!!e}))}),(function(e,t,n){return i(4,(function(e){return"!!"+n+"["+e+"]"}))}));case"sample.coverage":return t((function(e){return["value"in e?e.value:1,!!e.invert]}),(function(e,t,n){return[t.def('"value" in ',n,"?+",n,".value:1"),t=t.def("!!",n,".invert")]}))}})),o}(e),p=A(e,0,u);s("viewport"),s(v("scissor.box"));var d,m=0<Object.keys(h).length;if((d={framebuffer:d,draw:l,shader:p,state:h,dirty:m,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}}).profile=function(e){var t,n=e.static;if(e=e.dynamic,"profile"in n){var r=!!n.profile;(t=B((function(e,t){return r}))).enable=r}else if("profile"in e){var i=e.profile;t=N(i,(function(e,t){return e.invoke(t,i)}))}return t}(e),d.uniforms=function(e,t){var n=e.static,r=e.dynamic,o={};return Object.keys(n).forEach((function(e){var t,r=n[e];if("number"==typeof r||"boolean"==typeof r)t=B((function(){return r}));else if("function"==typeof r){var a=r._reglType;"texture2d"===a||"textureCube"===a?t=B((function(e){return e.link(r)})):"framebuffer"!==a&&"framebufferCube"!==a||(t=B((function(e){return e.link(r.color[0])})))}else g(r)&&(t=B((function(e){return e.global.def("[",i(r.length,(function(e){return r[e]})),"]")})));t.value=r,o[e]=t})),Object.keys(r).forEach((function(e){var t=r[e];o[e]=N(t,(function(e,n){return e.invoke(n,t)}))})),o}(r),d.drawVAO=d.scopeVAO=function(e,t){var n=e.static,r=e.dynamic;if("vao"in n){var i=n.vao;return null!==i&&null===c.getVAO(i)&&(i=c.createVAO(i)),B((function(e){return e.link(c.getVAO(i))}))}if("vao"in r){var o=r.vao;return N(o,(function(e,t){var n=e.invoke(t,o);return t.def(e.shared.vao+".getVAO("+n+")")}))}return null}(e),!d.drawVAO&&p.program&&!u&&n.angle_instanced_arrays){var y=!0;if(e=p.program.attributes.map((function(e){return e=t.static[e],y=y&&!!e,e})),y&&0<e.length){var b=c.getVAO(c.createVAO(e));d.drawVAO=new L(null,null,null,(function(e,t){return e.link(b)})),d.useVAO=!0}}return u?d.useVAO=!0:d.attributes=T(t),d.context=function(e){var t=e.static,n=e.dynamic,r={};return Object.keys(t).forEach((function(e){var n=t[e];r[e]=B((function(e,t){return"number"==typeof n||"boolean"==typeof n?""+n:e.link(n)}))})),Object.keys(n).forEach((function(e){var t=n[e];r[e]=N(t,(function(e,n){return e.invoke(n,t)}))})),r}(o),d}function k(e,t,n){var r=e.shared.context,i=e.scope();Object.keys(n).forEach((function(o){t.save(r,"."+o);var a=n[o].append(e,t);Array.isArray(a)?i(r,".",o,"=[",a.join(),"];"):i(r,".",o,"=",a,";")})),t(i)}function _(e,t,n,r){var i,o=(s=e.shared).gl,a=s.framebuffer;ne&&(i=t.def(s.extensions,".webgl_draw_buffers"));var s=(u=e.constants).drawBuffer,u=u.backBuffer;e=n?n.append(e,t):t.def(a,".next"),r||t("if(",e,"!==",a,".cur){"),t("if(",e,"){",o,".bindFramebuffer(",36160,",",e,".framebuffer);"),ne&&t(i,".drawBuffersWEBGL(",s,"[",e,".colorAttachments.length]);"),t("}else{",o,".bindFramebuffer(",36160,",null);"),ne&&t(i,".drawBuffersWEBGL(",u,");"),t("}",a,".cur=",e,";"),r||t("}")}function C(e,t,n){var r=e.shared,o=r.gl,a=e.current,s=e.next,u=r.current,f=r.next,c=e.cond(u,".dirty");oe.forEach((function(t){var r,l;if(!((t=v(t))in n.state))if(t in s){r=s[t],l=a[t];var h=i(re[t].length,(function(e){return c.def(r,"[",e,"]")}));c(e.cond(h.map((function(e,t){return e+"!=="+l+"["+t+"]"})).join("||")).then(o,".",se[t],"(",h,");",h.map((function(e,t){return l+"["+t+"]="+e})).join(";"),";"))}else r=c.def(f,".",t),h=e.cond(r,"!==",u,".",t),c(h),t in ae?h(e.cond(r).then(o,".enable(",ae[t],");").else(o,".disable(",ae[t],");"),u,".",t,"=",r,";"):h(o,".",se[t],"(",r,");",u,".",t,"=",r,";")})),0===Object.keys(n.state).length&&c(u,".dirty=false;"),t(c)}function R(e,t,n,r){var i=e.shared,o=e.current,a=i.current,s=i.gl;M(Object.keys(n)).forEach((function(i){var u=n[i];if(!r||r(u)){var f=u.append(e,t);if(ae[i]){var c=ae[i];P(u)?t(s,f?".enable(":".disable(",c,");"):t(e.cond(f).then(s,".enable(",c,");").else(s,".disable(",c,");")),t(a,".",i,"=",f,";")}else if(g(f)){var l=o[i];t(s,".",se[i],"(",f,");",f.map((function(e,t){return l+"["+t+"]="+e})).join(";"),";")}else t(s,".",se[i],"(",f,");",a,".",i,"=",f,";")}}))}function I(e,t){ee&&(e.instancing=t.def(e.shared.extensions,".angle_instanced_arrays"))}function q(e,t,n,r,i){function o(){return"undefined"==typeof performance?"Date.now()":"performance.now()"}function a(e){e(f=t.def(),"=",o(),";"),"string"==typeof i?e(h,".count+=",i,";"):e(h,".count++;"),d&&(r?e(c=t.def(),"=",g,".getNumPendingQueries();"):e(g,".beginQuery(",h,");"))}function s(e){e(h,".cpuTime+=",o(),"-",f,";"),d&&(r?e(g,".pushScopeStats(",c,",",g,".getNumPendingQueries(),",h,");"):e(g,".endQuery();"))}function u(e){var n=t.def(p,".profile");t(p,".profile=",e,";"),t.exit(p,".profile=",n,";")}var f,c,l=e.shared,h=e.stats,p=l.current,g=l.timer;if(n=n.profile){if(P(n))return void(n.enable?(a(t),s(t.exit),u("true")):u("false"));u(n=n.append(e,t))}else n=t.def(p,".profile");a(l=e.block()),t("if(",n,"){",l,"}"),s(e=e.block()),t.exit("if(",n,"){",e,"}")}function z(e,t,n,r,i){function o(n,r,i){function o(){t("if(!",c,".buffer){",u,".enableVertexAttribArray(",f,");}");var n,o=i.type;n=i.size?t.def(i.size,"||",r):r,t("if(",c,".type!==",o,"||",c,".size!==",n,"||",p.map((function(e){return c+"."+e+"!=="+i[e]})).join("||"),"){",u,".bindBuffer(",34962,",",l,".buffer);",u,".vertexAttribPointer(",[f,n,o,i.normalized,i.stride,i.offset],");",c,".type=",o,";",c,".size=",n,";",p.map((function(e){return c+"."+e+"="+i[e]+";"})).join(""),"}"),ee&&(o=i.divisor,t("if(",c,".divisor!==",o,"){",e.instancing,".vertexAttribDivisorANGLE(",[f,o],");",c,".divisor=",o,";}"))}function s(){t("if(",c,".buffer){",u,".disableVertexAttribArray(",f,");",c,".buffer=null;","}if(",we.map((function(e,t){return c+"."+e+"!=="+h[t]})).join("||"),"){",u,".vertexAttrib4f(",f,",",h,");",we.map((function(e,t){return c+"."+e+"="+h[t]+";"})).join(""),"}")}var u=a.gl,f=t.def(n,".location"),c=t.def(a.attributes,"[",f,"]");n=i.state;var l=i.buffer,h=[i.x,i.y,i.z,i.w],p=["buffer","normalized","offset","stride"];1===n?o():2===n?s():(t("if(",n,"===",1,"){"),o(),t("}else{"),s(),t("}"))}var a=e.shared;r.forEach((function(r){var a,s=r.name,u=n.attributes[s];if(u){if(!i(u))return;a=u.append(e,t)}else{if(!i(ke))return;var f=e.scopeAttrib(s);a={},Object.keys(new J).forEach((function(e){a[e]=t.def(f,".",e)}))}o(e.link(r),function(e){switch(e){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(r.info.type),a)}))}function W(e,n,r,o,a){for(var s,u=e.shared,f=u.gl,c=0;c<o.length;++c){var l,h=(m=o[c]).name,p=m.info.type,d=r.uniforms[h],m=e.link(m)+".location";if(d){if(!a(d))continue;if(P(d)){if(h=d.value,35678===p||35680===p)n(f,".uniform1i(",m,",",(p=e.link(h._texture||h.color[0]._texture))+".bind());"),n.exit(p,".unbind();");else if(35674===p||35675===p||35676===p)d=2,35675===p?d=3:35676===p&&(d=4),n(f,".uniformMatrix",d,"fv(",m,",false,",h=e.global.def("new Float32Array(["+Array.prototype.slice.call(h)+"])"),");");else{switch(p){case 5126:s="1f";break;case 35664:s="2f";break;case 35665:s="3f";break;case 35666:s="4f";break;case 35670:case 5124:s="1i";break;case 35671:case 35667:s="2i";break;case 35672:case 35668:s="3i";break;case 35673:s="4i";break;case 35669:s="4i"}n(f,".uniform",s,"(",m,",",g(h)?Array.prototype.slice.call(h):h,");")}continue}l=d.append(e,n)}else{if(!a(ke))continue;l=n.def(u.uniforms,"[",t.id(h),"]")}switch(35678===p?n("if(",l,"&&",l,'._reglType==="framebuffer"){',l,"=",l,".color[0];","}"):35680===p&&n("if(",l,"&&",l,'._reglType==="framebufferCube"){',l,"=",l,".color[0];","}"),h=1,p){case 35678:case 35680:p=n.def(l,"._texture"),n(f,".uniform1i(",m,",",p,".bind());"),n.exit(p,".unbind();");continue;case 5124:case 35670:s="1i";break;case 35667:case 35671:s="2i",h=2;break;case 35668:case 35672:s="3i",h=3;break;case 35669:case 35673:s="4i",h=4;break;case 5126:s="1f";break;case 35664:s="2f",h=2;break;case 35665:s="3f",h=3;break;case 35666:s="4f",h=4;break;case 35674:s="Matrix2fv";break;case 35675:s="Matrix3fv";break;case 35676:s="Matrix4fv"}if(n(f,".uniform",s,"(",m,","),"M"===s.charAt(0)){m=Math.pow(p-35674+2,2);var v=e.global.def("new Float32Array(",m,")");Array.isArray(l)?n("false,(",i(m,(function(e){return v+"["+e+"]="+l[e]})),",",v,")"):n("false,(Array.isArray(",l,")||",l," instanceof Float32Array)?",l,":(",i(m,(function(e){return v+"["+e+"]="+l+"["+e+"]"})),",",v,")")}else n(1<h?i(h,(function(e){return Array.isArray(l)?l[e]:l+"["+e+"]"})):l);n(");")}}function U(e,t,n,r){function i(i){var o=h[i];return o?o.contextDep&&r.contextDynamic||o.propDep?o.append(e,n):o.append(e,t):t.def(l,".",i)}function o(){function e(){n(u,".drawElementsInstancedANGLE(",[d,m,v,g+"<<(("+v+"-5121)>>1)",s],");")}function t(){n(u,".drawArraysInstancedANGLE(",[d,g,m,s],");")}p?y?e():(n("if(",p,"){"),e(),n("}else{"),t(),n("}")):t()}function a(){function e(){n(c+".drawElements("+[d,m,v,g+"<<(("+v+"-5121)>>1)"]+");")}function t(){n(c+".drawArrays("+[d,g,m]+");")}p?y?e():(n("if(",p,"){"),e(),n("}else{"),t(),n("}")):t()}var s,u,f=e.shared,c=f.gl,l=f.draw,h=r.draw,p=function(){var i=h.elements,o=t;return i?((i.contextDep&&r.contextDynamic||i.propDep)&&(o=n),i=i.append(e,o)):i=o.def(l,".","elements"),i&&o("if("+i+")"+c+".bindBuffer(34963,"+i+".buffer.buffer);"),i}(),d=i("primitive"),g=i("offset"),m=function(){var i=h.count,o=t;return i?((i.contextDep&&r.contextDynamic||i.propDep)&&(o=n),i=i.append(e,o)):i=o.def(l,".","count"),i}();if("number"==typeof m){if(0===m)return}else n("if(",m,"){"),n.exit("}");ee&&(s=i("instances"),u=e.instancing);var v=p+".type",y=h.elements&&P(h.elements);ee&&("number"!=typeof s||0<=s)?"string"==typeof s?(n("if(",s,">0){"),o(),n("}else if(",s,"<0){"),a(),n("}")):o():a()}function V(e,t,n,r,i){return i=(t=w()).proc("body",i),ee&&(t.instancing=i.def(t.shared.extensions,".angle_instanced_arrays")),e(t,i,n,r),t.compile().body}function X(e,t,n,r){I(e,t),n.useVAO?n.drawVAO?t(e.shared.vao,".setVAO(",n.drawVAO.append(e,t),");"):t(e.shared.vao,".setVAO(",e.shared.vao,".targetVAO);"):(t(e.shared.vao,".setVAO(null);"),z(e,t,n,r.attributes,(function(){return!0}))),W(e,t,n,r.uniforms,(function(){return!0})),U(e,t,t,n)}function $(e,t,n,r){function i(){return!0}e.batchId="a1",I(e,t),z(e,t,n,r.attributes,i),W(e,t,n,r.uniforms,i),U(e,t,t,n)}function G(e,t,n,r){function i(e){return e.contextDep&&a||e.propDep}function o(e){return!i(e)}I(e,t);var a=n.contextDep,s=t.def(),u=t.def();e.shared.props=u,e.batchId=s;var f=e.scope(),c=e.scope();t(f.entry,"for(",s,"=0;",s,"<","a1",";++",s,"){",u,"=","a0","[",s,"];",c,"}",f.exit),n.needsContext&&k(e,c,n.context),n.needsFramebuffer&&_(e,c,n.framebuffer),R(e,c,n.state,i),n.profile&&i(n.profile)&&q(e,c,n,!1,!0),r?(n.useVAO?n.drawVAO?i(n.drawVAO)?c(e.shared.vao,".setVAO(",n.drawVAO.append(e,c),");"):f(e.shared.vao,".setVAO(",n.drawVAO.append(e,f),");"):f(e.shared.vao,".setVAO(",e.shared.vao,".targetVAO);"):(f(e.shared.vao,".setVAO(null);"),z(e,f,n,r.attributes,o),z(e,c,n,r.attributes,i)),W(e,f,n,r.uniforms,o),W(e,c,n,r.uniforms,i),U(e,f,c,n)):(t=e.global.def("{}"),r=n.shader.progVar.append(e,c),u=c.def(r,".id"),f=c.def(t,"[",u,"]"),c(e.shared.gl,".useProgram(",r,".program);","if(!",f,"){",f,"=",t,"[",u,"]=",e.link((function(t){return V($,e,n,t,2)})),"(",r,");}",f,".call(this,a0[",s,"],",s,");"))}function Y(e,n){function r(t){var r=n.shader[t];r&&i.set(o.shader,"."+t,r.append(e,i))}var i=e.proc("scope",3);e.batchId="a2";var o=e.shared,a=o.current;k(e,i,n.context),n.framebuffer&&n.framebuffer.append(e,i),M(Object.keys(n.state)).forEach((function(t){var r=n.state[t].append(e,i);g(r)?r.forEach((function(n,r){i.set(e.next[t],"["+r+"]",n)})):i.set(o.next,"."+t,r)})),q(e,i,n,!0,!0),["elements","offset","count","instances","primitive"].forEach((function(t){var r=n.draw[t];r&&i.set(o.draw,"."+t,""+r.append(e,i))})),Object.keys(n.uniforms).forEach((function(r){var a=n.uniforms[r].append(e,i);Array.isArray(a)&&(a="["+a.join()+"]"),i.set(o.uniforms,"["+t.id(r)+"]",a)})),Object.keys(n.attributes).forEach((function(t){var r=n.attributes[t].append(e,i),o=e.scopeAttrib(t);Object.keys(new J).forEach((function(e){i.set(o,"."+e,r[e])}))})),n.scopeVAO&&i.set(o.vao,".targetVAO",n.scopeVAO.append(e,i)),r("vert"),r("frag"),0<Object.keys(n.state).length&&(i(a,".dirty=true;"),i.exit(a,".dirty=true;")),i("a1(",e.shared.context,",a0,",e.batchId,");")}function K(e,t,n){var r=t.static[n];if(r&&function(e){if("object"==typeof e&&!g(e)){for(var t=Object.keys(e),n=0;n<t.length;++n)if(H.isDynamic(e[t[n]]))return!0;return!1}}(r)){var i=e.global,o=Object.keys(r),a=!1,s=!1,u=!1,f=e.global.def("{}");o.forEach((function(t){var n=r[t];if(H.isDynamic(n))"function"==typeof n&&(n=r[t]=H.unbox(n)),t=N(n,null),a=a||t.thisDep,u=u||t.propDep,s=s||t.contextDep;else{switch(i(f,".",t,"="),typeof n){case"number":i(n);break;case"string":i('"',n,'"');break;case"object":Array.isArray(n)&&i("[",n.join(),"]");break;default:i(e.link(n))}i(";")}})),t.dynamic[n]=new H.DynamicVariable(4,{thisDep:a,contextDep:s,propDep:u,ref:f,append:function(e,t){o.forEach((function(n){var i=r[n];H.isDynamic(i)&&(i=e.invoke(t,i),t(f,".",n,"=",i,";"))}))}}),delete t.static[n]}}var J=c.Record,Z={add:32774,subtract:32778,"reverse subtract":32779};n.ext_blend_minmax&&(Z.min=32775,Z.max=32776);var ee=n.angle_instanced_arrays,ne=n.webgl_draw_buffers,re={dirty:!0,profile:m.profile},ie={},oe=[],ae={},se={};y("dither",3024),y("blend.enable",3042),b("blend.color","blendColor",[0,0,0,0]),b("blend.equation","blendEquationSeparate",[32774,32774]),b("blend.func","blendFuncSeparate",[1,0,1,0]),y("depth.enable",2929,!0),b("depth.func","depthFunc",513),b("depth.range","depthRange",[0,1]),b("depth.mask","depthMask",!0),b("colorMask","colorMask",[!0,!0,!0,!0]),y("cull.enable",2884),b("cull.face","cullFace",1029),b("frontFace","frontFace",2305),b("lineWidth","lineWidth",1),y("polygonOffset.enable",32823),b("polygonOffset.offset","polygonOffset",[0,0]),y("sample.alpha",32926),y("sample.enable",32928),b("sample.coverage","sampleCoverage",[1,!1]),y("stencil.enable",2960),b("stencil.mask","stencilMask",-1),b("stencil.func","stencilFunc",[519,0,-1]),b("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),b("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),y("scissor.enable",3089),b("scissor.box","scissor",[0,0,e.drawingBufferWidth,e.drawingBufferHeight]),b("viewport","viewport",[0,0,e.drawingBufferWidth,e.drawingBufferHeight]);var ue={gl:e,context:p,strings:t,next:ie,current:re,draw:h,elements:a,buffer:o,shader:l,attributes:c.state,vao:c,uniforms:f,framebuffer:u,extensions:n,timer:d,isBufferArgs:D},fe={primTypes:te,compareFuncs:Ee,blendFuncs:Ae,blendEquations:Z,stencilOps:Te,glTypes:Q,orientationType:Se};ne&&(fe.backBuffer=[1029],fe.drawBuffer=i(r.maxDrawbuffers,(function(e){return 0===e?[0]:i(e,(function(e){return 36064+e}))})));var ce=0;return{next:ie,current:re,procs:function(){var e=w(),t=e.proc("poll"),o=e.proc("refresh"),a=e.block();t(a),o(a);var s,u=e.shared,f=u.gl,c=u.next,l=u.current;a(l,".dirty=false;"),_(e,t),_(e,o,null,!0),ee&&(s=e.link(ee)),n.oes_vertex_array_object&&o(e.link(n.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var h=0;h<r.maxAttributes;++h){var p=o.def(u.attributes,"[",h,"]"),d=e.cond(p,".buffer");d.then(f,".enableVertexAttribArray(",h,");",f,".bindBuffer(",34962,",",p,".buffer.buffer);",f,".vertexAttribPointer(",h,",",p,".size,",p,".type,",p,".normalized,",p,".stride,",p,".offset);").else(f,".disableVertexAttribArray(",h,");",f,".vertexAttrib4f(",h,",",p,".x,",p,".y,",p,".z,",p,".w);",p,".buffer=null;"),o(d),ee&&o(s,".vertexAttribDivisorANGLE(",h,",",p,".divisor);")}return o(e.shared.vao,".currentVAO=null;",e.shared.vao,".setVAO(",e.shared.vao,".targetVAO);"),Object.keys(ae).forEach((function(n){var r=ae[n],i=a.def(c,".",n),s=e.block();s("if(",i,"){",f,".enable(",r,")}else{",f,".disable(",r,")}",l,".",n,"=",i,";"),o(s),t("if(",i,"!==",l,".",n,"){",s,"}")})),Object.keys(se).forEach((function(n){var r,s,u=se[n],h=re[n],p=e.block();p(f,".",u,"("),g(h)?(u=h.length,r=e.global.def(c,".",n),s=e.global.def(l,".",n),p(i(u,(function(e){return r+"["+e+"]"})),");",i(u,(function(e){return s+"["+e+"]="+r+"["+e+"];"})).join("")),t("if(",i(u,(function(e){return r+"["+e+"]!=="+s+"["+e+"]"})).join("||"),"){",p,"}")):(r=a.def(c,".",n),s=a.def(l,".",n),p(r,");",l,".",n,"=",r,";"),t("if(",r,"!==",s,"){",p,"}")),o(p)})),e.compile()}(),compile:function(e,t,n,r,i){var o=w();o.stats=o.link(i),Object.keys(t.static).forEach((function(e){K(o,t,e)})),xe.forEach((function(t){K(o,e,t)}));var a=S(e,t,n,r);return function(e,t){var n=e.proc("draw",1);I(e,n),k(e,n,t.context),_(e,n,t.framebuffer),C(e,n,t),R(e,n,t.state),q(e,n,t,!1,!0);var r=t.shader.progVar.append(e,n);if(n(e.shared.gl,".useProgram(",r,".program);"),t.shader.program)X(e,n,t,t.shader.program);else{n(e.shared.vao,".setVAO(null);");var i=e.global.def("{}"),o=n.def(r,".id"),a=n.def(i,"[",o,"]");n(e.cond(a).then(a,".call(this,a0);").else(a,"=",i,"[",o,"]=",e.link((function(n){return V(X,e,t,n,1)})),"(",r,");",a,".call(this,a0);"))}0<Object.keys(t.state).length&&n(e.shared.current,".dirty=true;")}(o,a),Y(o,a),function(e,t){function n(e){return e.contextDep&&i||e.propDep}var r=e.proc("batch",2);e.batchId="0",I(e,r);var i=!1,o=!0;Object.keys(t.context).forEach((function(e){i=i||t.context[e].propDep})),i||(k(e,r,t.context),o=!1);var a=!1;if((s=t.framebuffer)?(s.propDep?i=a=!0:s.contextDep&&i&&(a=!0),a||_(e,r,s)):_(e,r,null),t.state.viewport&&t.state.viewport.propDep&&(i=!0),C(e,r,t),R(e,r,t.state,(function(e){return!n(e)})),t.profile&&n(t.profile)||q(e,r,t,!1,"a1"),t.contextDep=i,t.needsContext=o,t.needsFramebuffer=a,(o=t.shader.progVar).contextDep&&i||o.propDep)G(e,r,t,null);else if(o=o.append(e,r),r(e.shared.gl,".useProgram(",o,".program);"),t.shader.program)G(e,r,t,t.shader.program);else{r(e.shared.vao,".setVAO(null);");var s=e.global.def("{}"),u=(a=r.def(o,".id"),r.def(s,"[",a,"]"));r(e.cond(u).then(u,".call(this,a0,a1);").else(u,"=",s,"[",a,"]=",e.link((function(n){return V(G,e,t,n,2)})),"(",o,");",u,".call(this,a0,a1);"))}0<Object.keys(t.state).length&&r(e.shared.current,".dirty=true;")}(o,a),F(o.compile(),{destroy:function(){a.shader.program.destroy()}})}}}function I(e,t){for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}var F=function(e,t){for(var n=Object.keys(t),r=0;r<n.length;++r)e[n[r]]=t[n[r]];return e},q=0,H={DynamicVariable:e,define:function(n,r){return new e(n,t(r+""))},isDynamic:function(t){return"function"==typeof t&&!t._reglType||t instanceof e},unbox:function t(n,r){return"function"==typeof n?new e(0,n):"number"==typeof n||"boolean"==typeof n?new e(5,n):Array.isArray(n)?new e(6,n.map((function(e,n){return t(e,r+"["+n+"]")}))):n instanceof e?n:void 0},accessor:t},z={next:"function"==typeof requestAnimationFrame?function(e){return requestAnimationFrame(e)}:function(e){return setTimeout(e,16)},cancel:"function"==typeof cancelAnimationFrame?function(e){return cancelAnimationFrame(e)}:clearTimeout},W="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date},U=a();U.zero=a();var V=function(e,t){var n=1;t.ext_texture_filter_anisotropic&&(n=e.getParameter(34047));var r=1,i=1;t.webgl_draw_buffers&&(r=e.getParameter(34852),i=e.getParameter(36063));var o=!!t.oes_texture_float;if(o){o=e.createTexture(),e.bindTexture(3553,o),e.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var a=e.createFramebuffer();if(e.bindFramebuffer(36160,a),e.framebufferTexture2D(36160,36064,3553,o,0),e.bindTexture(3553,null),36053!==e.checkFramebufferStatus(36160))o=!1;else{e.viewport(0,0,1,1),e.clearColor(1,0,0,1),e.clear(16384);var s=U.allocType(5126,4);e.readPixels(0,0,1,1,6408,5126,s),e.getError()?o=!1:(e.deleteFramebuffer(a),e.deleteTexture(o),o=1===s[0]),U.freeType(s)}}return s=!0,"undefined"!=typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(s=e.createTexture(),a=U.allocType(5121,36),e.activeTexture(33984),e.bindTexture(34067,s),e.texImage2D(34069,0,6408,3,3,0,6408,5121,a),U.freeType(a),e.bindTexture(34067,null),e.deleteTexture(s),s=!e.getError()),{colorBits:[e.getParameter(3410),e.getParameter(3411),e.getParameter(3412),e.getParameter(3413)],depthBits:e.getParameter(3414),stencilBits:e.getParameter(3415),subpixelBits:e.getParameter(3408),extensions:Object.keys(t).filter((function(e){return!!t[e]})),maxAnisotropic:n,maxDrawbuffers:r,maxColorAttachments:i,pointSizeDims:e.getParameter(33901),lineWidthDims:e.getParameter(33902),maxViewportDims:e.getParameter(3386),maxCombinedTextureUnits:e.getParameter(35661),maxCubeMapSize:e.getParameter(34076),maxRenderbufferSize:e.getParameter(34024),maxTextureUnits:e.getParameter(34930),maxTextureSize:e.getParameter(3379),maxAttributes:e.getParameter(34921),maxVertexUniforms:e.getParameter(36347),maxVertexTextureUnits:e.getParameter(35660),maxVaryingVectors:e.getParameter(36348),maxFragmentUniforms:e.getParameter(36349),glsl:e.getParameter(35724),renderer:e.getParameter(7937),vendor:e.getParameter(7936),version:e.getParameter(7938),readFloat:o,npotTextureCube:s}},X=function(e){return e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Float32Array||e instanceof Float64Array||e instanceof Uint8ClampedArray},$=function(e){return Object.keys(e).map((function(t){return e[t]}))},G={shape:function(e){for(var t=[];e.length;e=e[0])t.push(e.length);return t},flatten:function(e,t,n,r){var i=1;if(t.length)for(var o=0;o<t.length;++o)i*=t[o];else i=0;switch(n=r||U.allocType(n,i),t.length){case 0:break;case 1:for(r=t[0],t=0;t<r;++t)n[t]=e[t];break;case 2:for(r=t[0],t=t[1],o=i=0;o<r;++o)for(var a=e[o],s=0;s<t;++s)n[i++]=a[s];break;case 3:u(e,t[0],t[1],t[2],n,0);break;default:!function e(t,n,r,i,o){for(var a=1,s=r+1;s<n.length;++s)a*=n[s];var f=n[r];if(4==n.length-r){var c=n[r+1],l=n[r+2];for(n=n[r+3],s=0;s<f;++s)u(t[s],c,l,n,i,o),o+=a}else for(s=0;s<f;++s)e(t[s],n,r+1,i,o),o+=a}(e,t,0,n,0)}return n}},Y={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Q={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},K={dynamic:35048,stream:35040,static:35044},J=G.flatten,Z=G.shape,ee=[];ee[5120]=1,ee[5122]=2,ee[5124]=4,ee[5121]=1,ee[5123]=2,ee[5125]=4,ee[5126]=4;var te={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},ne=new Float32Array(1),re=new Uint32Array(ne.buffer),ie=[9984,9986,9985,9987],oe=[0,6409,6410,6407,6408],ae={};ae[6409]=ae[6406]=ae[6402]=1,ae[34041]=ae[6410]=2,ae[6407]=ae[35904]=3,ae[6408]=ae[35906]=4;var se=m("HTMLCanvasElement"),ue=m("OffscreenCanvas"),fe=m("CanvasRenderingContext2D"),ce=m("ImageBitmap"),le=m("HTMLImageElement"),he=m("HTMLVideoElement"),pe=Object.keys(Y).concat([se,ue,fe,ce,le,he]),de=[];de[5121]=1,de[5126]=4,de[36193]=2,de[5123]=2,de[5125]=4;var ge=[];ge[32854]=2,ge[32855]=2,ge[36194]=2,ge[34041]=4,ge[33776]=.5,ge[33777]=.5,ge[33778]=1,ge[33779]=1,ge[35986]=.5,ge[35987]=1,ge[34798]=1,ge[35840]=.5,ge[35841]=.25,ge[35842]=.5,ge[35843]=.25,ge[36196]=.5;var me=[];me[32854]=2,me[32855]=2,me[36194]=2,me[33189]=2,me[36168]=1,me[34041]=4,me[35907]=4,me[34836]=16,me[34842]=8,me[34843]=6;var ve=function(e,t,n,r,i){function o(e){this.id=f++,this.refCount=1,this.renderbuffer=e,this.format=32854,this.height=this.width=0,i.profile&&(this.stats={size:0})}function a(t){var n=t.renderbuffer;e.bindRenderbuffer(36161,null),e.deleteRenderbuffer(n),t.renderbuffer=null,t.refCount=0,delete c[t.id],r.renderbufferCount--}var s={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};t.ext_srgb&&(s.srgba=35907),t.ext_color_buffer_half_float&&(s.rgba16f=34842,s.rgb16f=34843),t.webgl_color_buffer_float&&(s.rgba32f=34836);var u=[];Object.keys(s).forEach((function(e){u[s[e]]=e}));var f=0,c={};return o.prototype.decRef=function(){0>=--this.refCount&&a(this)},i.profile&&(r.getTotalRenderbufferSize=function(){var e=0;return Object.keys(c).forEach((function(t){e+=c[t].stats.size})),e}),{create:function(t,n){function a(t,n){var r=0,o=0,c=32854;if("object"==typeof t&&t?("shape"in t?(r=0|(o=t.shape)[0],o=0|o[1]):("radius"in t&&(r=o=0|t.radius),"width"in t&&(r=0|t.width),"height"in t&&(o=0|t.height)),"format"in t&&(c=s[t.format])):"number"==typeof t?(r=0|t,o="number"==typeof n?0|n:r):t||(r=o=1),r!==f.width||o!==f.height||c!==f.format)return a.width=f.width=r,a.height=f.height=o,f.format=c,e.bindRenderbuffer(36161,f.renderbuffer),e.renderbufferStorage(36161,c,r,o),i.profile&&(f.stats.size=me[f.format]*f.width*f.height),a.format=u[f.format],a}var f=new o(e.createRenderbuffer());return c[f.id]=f,r.renderbufferCount++,a(t,n),a.resize=function(t,n){var r=0|t,o=0|n||r;return r===f.width&&o===f.height||(a.width=f.width=r,a.height=f.height=o,e.bindRenderbuffer(36161,f.renderbuffer),e.renderbufferStorage(36161,f.format,r,o),i.profile&&(f.stats.size=me[f.format]*f.width*f.height)),a},a._reglType="renderbuffer",a._renderbuffer=f,i.profile&&(a.stats=f.stats),a.destroy=function(){f.decRef()},a},clear:function(){$(c).forEach(a)},restore:function(){$(c).forEach((function(t){t.renderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,t.renderbuffer),e.renderbufferStorage(36161,t.format,t.width,t.height)})),e.bindRenderbuffer(36161,null)}}},ye=[];ye[6408]=4,ye[6407]=3;var be=[];be[5121]=1,be[5126]=4,be[36193]=2;var we=["x","y","z","w"],xe="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),Ae={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Ee={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Te={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Se={cw:2304,ccw:2305},ke=new L(!1,!1,!1,(function(){}));return function(e){function t(){if(0===K.length)S&&S.update(),te=null;else{te=z.next(t),d();for(var e=K.length-1;0<=e;--e){var n=K[e];n&&n(M,null,0)}v.flush(),S&&S.update()}}function i(){!te&&0<K.length&&(te=z.next(t))}function o(){te&&(z.cancel(t),te=null)}function a(e){e.preventDefault(),o(),J.forEach((function(e){e()}))}function s(e){v.getError(),b.restore(),q.restore(),P.restore(),U.restore(),X.restore(),$.restore(),B.restore(),S&&S.restore(),G.procs.refresh(),i(),Z.forEach((function(e){e()}))}function u(e){function t(e,t){var n={},r={};return Object.keys(e).forEach((function(i){var o=e[i];if(H.isDynamic(o))r[i]=H.unbox(o,i);else{if(t&&Array.isArray(o))for(var a=0;a<o.length;++a)if(H.isDynamic(o[a]))return void(r[i]=H.unbox(o,i));n[i]=o}})),{dynamic:r,static:n}}var n=t(e.context||{},!0),r=t(e.uniforms||{},!0),i=t(e.attributes||{},!1);e=t(function(e){function t(e){if(e in n){var t=n[e];delete n[e],Object.keys(t).forEach((function(r){n[e+"."+r]=t[r]}))}}var n=F({},e);return delete n.uniforms,delete n.attributes,delete n.context,delete n.vao,"stencil"in n&&n.stencil.op&&(n.stencil.opBack=n.stencil.opFront=n.stencil.op,delete n.stencil.op),t("blend"),t("depth"),t("cull"),t("stencil"),t("polygonOffset"),t("scissor"),t("sample"),"vao"in e&&(n.vao=e.vao),n}(e),!1);var o={gpuTime:0,cpuTime:0,count:0},a=G.compile(e,i,r,n,o),s=a.draw,u=a.batch,f=a.scope,c=[];return F((function(e,t){var n;if("function"==typeof e)return f.call(this,null,e,0);if("function"==typeof t)if("number"==typeof e)for(n=0;n<e;++n)f.call(this,null,t,n);else{if(!Array.isArray(e))return f.call(this,e,t,0);for(n=0;n<e.length;++n)f.call(this,e[n],t,n)}else if("number"==typeof e){if(0<e)return u.call(this,function(e){for(;c.length<e;)c.push(null);return c}(0|e),0|e)}else{if(!Array.isArray(e))return s.call(this,e);if(e.length)return u.call(this,e,e.length)}}),{stats:o,destroy:function(){a.destroy()}})}function f(e,t){var n=0;G.procs.poll();var r=t.color;r&&(v.clearColor(+r[0]||0,+r[1]||0,+r[2]||0,+r[3]||0),n|=16384),"depth"in t&&(v.clearDepth(+t.depth),n|=256),"stencil"in t&&(v.clearStencil(0|t.stencil),n|=1024),v.clear(n)}function c(e){return K.push(e),i(),{cancel:function(){var t=I(K,e);K[t]=function e(){var t=I(K,e);K[t]=K[K.length-1],--K.length,0>=K.length&&o()}}}}function l(){var e=Y.viewport,t=Y.scissor_box;e[0]=e[1]=t[0]=t[1]=0,M.viewportWidth=M.framebufferWidth=M.drawingBufferWidth=e[2]=t[2]=v.drawingBufferWidth,M.viewportHeight=M.framebufferHeight=M.drawingBufferHeight=e[3]=t[3]=v.drawingBufferHeight}function d(){M.tick+=1,M.time=m(),l(),G.procs.poll()}function g(){U.refresh(),l(),G.procs.refresh(),S&&S.update()}function m(){return(W()-j)/1e3}if(!(e=function(e){var t,i,o,a,s=e||{};e={};var u=[],f=[],c="undefined"==typeof window?1:window.devicePixelRatio,l=!1,h=function(e){},p=function(){};if("string"==typeof s?t=document.querySelector(s):"object"==typeof s&&("string"==typeof s.nodeName&&"function"==typeof s.appendChild&&"function"==typeof s.getBoundingClientRect?t=s:"function"==typeof s.drawArrays||"function"==typeof s.drawElements?o=(a=s).canvas:("gl"in s?a=s.gl:"canvas"in s?o=r(s.canvas):"container"in s&&(i=r(s.container)),"attributes"in s&&(e=s.attributes),"extensions"in s&&(u=n(s.extensions)),"optionalExtensions"in s&&(f=n(s.optionalExtensions)),"onDone"in s&&(h=s.onDone),"profile"in s&&(l=!!s.profile),"pixelRatio"in s&&(c=+s.pixelRatio))),t&&("canvas"===t.nodeName.toLowerCase()?o=t:i=t),!a){if(!o){if(!(t=function(e,t,n){function r(){var t=window.innerWidth,r=window.innerHeight;e!==document.body&&(t=(r=e.getBoundingClientRect()).right-r.left,r=r.bottom-r.top),o.width=n*t,o.height=n*r,F(o.style,{width:t+"px",height:r+"px"})}var i,o=document.createElement("canvas");return F(o.style,{border:0,margin:0,padding:0,top:0,left:0}),e.appendChild(o),e===document.body&&(o.style.position="absolute",F(e.style,{margin:0,padding:0})),e!==document.body&&"function"==typeof ResizeObserver?(i=new ResizeObserver((function(){setTimeout(r)}))).observe(e):window.addEventListener("resize",r,!1),r(),{canvas:o,onDestroy:function(){i?i.disconnect():window.removeEventListener("resize",r),e.removeChild(o)}}}(i||document.body,0,c)))return null;o=t.canvas,p=t.onDestroy}void 0===e.premultipliedAlpha&&(e.premultipliedAlpha=!0),a=function(e,t){function n(n){try{return e.getContext(n,t)}catch(o){return null}}return n("webgl")||n("experimental-webgl")||n("webgl-experimental")}(o,e)}return a?{gl:a,canvas:o,container:i,extensions:u,optionalExtensions:f,pixelRatio:c,profile:l,onDone:h,onDestroy:p}:(p(),h("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}(e)))return null;var v=e.gl,y=v.getContextAttributes();v.isContextLost();var b=function(e,t){function n(t){var n;t=t.toLowerCase();try{n=r[t]=e.getExtension(t)}catch(i){}return!!n}for(var r={},i=0;i<t.extensions.length;++i){var o=t.extensions[i];if(!n(o))return t.onDestroy(),t.onDone('"'+o+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return t.optionalExtensions.forEach(n),{extensions:r,restore:function(){Object.keys(r).forEach((function(e){if(r[e]&&!n(e))throw Error("(regl): error restoring extension "+e)}))}}}(v,e);if(!b)return null;var w=function(){var e={"":0},t=[""];return{id:function(n){var r=e[n];return r||(r=e[n]=t.length,t.push(n),r)},str:function(e){return t[e]}}}(),x={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},A=b.extensions,S=function(e,t){function n(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function r(e,t,r){var i=a.pop()||new n;i.startQueryIndex=e,i.endQueryIndex=t,i.sum=0,i.stats=r,s.push(i)}if(!t.ext_disjoint_timer_query)return null;var i=[],o=[],a=[],s=[],u=[],f=[];return{beginQuery:function(e){var n=i.pop()||t.ext_disjoint_timer_query.createQueryEXT();t.ext_disjoint_timer_query.beginQueryEXT(35007,n),o.push(n),r(o.length-1,o.length,e)},endQuery:function(){t.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:r,update:function(){var e,n;if(0!==(e=o.length)){f.length=Math.max(f.length,e+1),u.length=Math.max(u.length,e+1),u[0]=0;var r=f[0]=0;for(n=e=0;n<o.length;++n){var c=o[n];t.ext_disjoint_timer_query.getQueryObjectEXT(c,34919)?(r+=t.ext_disjoint_timer_query.getQueryObjectEXT(c,34918),i.push(c)):o[e++]=c,u[n+1]=r,f[n+1]=e}for(o.length=e,n=e=0;n<s.length;++n){var l=(r=s[n]).startQueryIndex;c=r.endQueryIndex,r.sum+=u[c]-u[l],l=f[l],(c=f[c])===l?(r.stats.gpuTime+=r.sum/1e6,a.push(r)):(r.startQueryIndex=l,r.endQueryIndex=c,s[e++]=r)}s.length=e}},getNumPendingQueries:function(){return o.length},clear:function(){i.push.apply(i,o);for(var e=0;e<i.length;e++)t.ext_disjoint_timer_query.deleteQueryEXT(i[e]);o.length=0,i.length=0},restore:function(){o.length=0,i.length=0}}}(0,A),j=W(),O=v.drawingBufferWidth,D=v.drawingBufferHeight,M={tick:0,time:0,viewportWidth:O,viewportHeight:D,framebufferWidth:O,framebufferHeight:D,drawingBufferWidth:O,drawingBufferHeight:D,pixelRatio:e.pixelRatio},L=V(v,A),P=h(v,x,e,(function(e){return B.destroyBuffer(e)})),B=k(v,A,L,x,P),N=p(v,A,P,x),q=_(v,w,x,e),U=E(v,A,L,(function(){G.procs.poll()}),M,x,e),X=ve(v,A,0,x,e),$=T(v,A,L,U,X,x),G=R(v,w,A,L,P,N,0,$,{},B,q,{elements:null,primitive:4,count:-1,offset:0,instances:-1},M,S,e),Y=(w=C(v,$,G.procs.poll,M),G.next),Q=v.canvas,K=[],J=[],Z=[],ee=[e.onDestroy],te=null;Q&&(Q.addEventListener("webglcontextlost",a,!1),Q.addEventListener("webglcontextrestored",s,!1));var ne=$.setFBO=u({framebuffer:H.define.call(null,1,"framebuffer")});return g(),y=F(u,{clear:function(e){if("framebuffer"in e)if(e.framebuffer&&"framebufferCube"===e.framebuffer_reglType)for(var t=0;6>t;++t)ne(F({framebuffer:e.framebuffer.faces[t]},e),f);else ne(e,f);else f(0,e)},prop:H.define.bind(null,1),context:H.define.bind(null,2),this:H.define.bind(null,3),draw:u({}),buffer:function(e){return P.create(e,34962,!1,!1)},elements:function(e){return N.create(e,!1)},texture:U.create2D,cube:U.createCube,renderbuffer:X.create,framebuffer:$.create,framebufferCube:$.createCube,vao:B.createVAO,attributes:y,frame:c,on:function(e,t){var n;switch(e){case"frame":return c(t);case"lost":n=J;break;case"restore":n=Z;break;case"destroy":n=ee}return n.push(t),{cancel:function(){for(var e=0;e<n.length;++e)if(n[e]===t){n[e]=n[n.length-1],n.pop();break}}}},limits:L,hasExtension:function(e){return 0<=L.extensions.indexOf(e.toLowerCase())},read:w,destroy:function(){K.length=0,o(),Q&&(Q.removeEventListener("webglcontextlost",a),Q.removeEventListener("webglcontextrestored",s)),q.clear(),$.clear(),X.clear(),U.clear(),N.clear(),P.clear(),B.clear(),S&&S.clear(),ee.forEach((function(e){e()}))},_gl:v,_refresh:g,poll:function(){d(),S&&S.update()},now:m,stats:x}),e.onDone(null,y),y}},"object"==typeof c.exports?c.exports=f():"function"==typeof define&&define.amd?define(f):this.createREGL=f(),c=c.exports;var l;(l=function(e){return e&&e.__esModule?e:{default:e}}).default=l,l.__esModule=!0;var h;(h=function(e){if(Array.isArray(e))return e}).default=h,h.__esModule=!0;var p;(p=function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(u){s=!0,i=u}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}).default=p,p.__esModule=!0;var d;(d=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}).default=d,d.__esModule=!0;var g;(g=function(e,t){if(e){if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}).default=g,g.__esModule=!0;var m;(m=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}).default=m,m.__esModule=!0;var v;(v=function(e,t){return h(e)||p(e,t)||g(e,t)||m()}).default=v,v.__esModule=!0;var y;(y=function(e){if(Array.isArray(e))return d(e)}).default=y,y.__esModule=!0;var b;(b=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}).default=b,b.__esModule=!0;var w;(w=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}).default=w,w.__esModule=!0;var x;(x=function(e){return y(e)||b(e)||g(e)||w()}).default=x,x.__esModule=!0;var A=l(v),E=l(x),T=function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;return e.map((function(e){return[(i*e[t]+n)/2,(i*e[1-t]+r)/2]}))};function S(e,t,n){t=.5-t/4,n*=Math.pow(4,e),console.time("hilbert");var r=function e(t){if(1===t)return T([[0,0],[0,1],[1,1],[1,0]],0,.5,.5);var n=e(t-1);return[].concat((0,E.default)(T(n,1,0,0)),(0,E.default)(T(n,0,0,1)),(0,E.default)(T(n,0,1,1)),(0,E.default)(T(n,1,2,1,-1)))}(e);console.timeEnd("hilbert"),r.unshift(r[3]),r.push(r[r.length-4]),console.time("dir");for(var i=[],o=0;o<r.length-2;o++){var a=r[o],s=r[o+1],u=r[o+2],f=[s[0]-a[0],s[1]-a[1]],c=[u[0]-s[0],u[1]-s[1]];i[o]={p0:a,p1:s,p2:u,s:Math.sign(f[0]*c[1]-f[1]*c[0])}}console.timeEnd("dir");var l=i.slice(0).reverse();l=l.map((function(e){var t=e.p0,n=e.p1;return{p0:e.p2,p1:n,p2:t,s:-e.s}})),e%2?i.splice(-3):l.splice(0,3),i=i.concat(l);var h=function(e){-1===i[e+1].s&&-1===i[e+2].s&&(i[e].s--,i[e+3].s--,i[e].p2=i[e+3].p1,i[e+3].p0=i[e].p1,i.splice(e+1,2))};console.time("rnd wall");for(var p=0;p<n;p++){for(var d=Math.floor(Math.random()*(i.length-3));-1!==i[d+1].s||-1!==i[d+2].s;)d=(d+1)%(i.length-3);h(d)}console.timeEnd("rnd wall"),console.time("pretty wall");for(var g=0;g<i.length-3;g++)1!==i[g].s&&1!==i[g+3].s||h(g);console.timeEnd("pretty wall");var m=[];return console.time("border"),i.map((function(e){var n=e.p0,r=e.p1,i=e.p2,o=e.s,a=[(r[0]-n[0])*t,(r[1]-n[1])*t],s=[(i[0]-r[0])*t,(i[1]-r[1])*t];0!==o&&m.push([r[0]+o*(a[0]-s[0]),r[1]+o*(a[1]-s[1])])})),console.timeEnd("border"),e%2?m.splice(0,1,m[m.length-1]):m.splice(-1,1,m[0]),m}function k(e,t,n,r,i,o){for(var a=t.slice(n,r).reverse(),s=t.slice(i,o),u=a.length/s.length;a.length>0&&s.length>0;)e.push(a.length/s.length>u?a.pop():s.pop());for(;a.length>0;)e.push(a.pop());for(;s.length>0;)e.push(s.pop());return e}function _(e,t,n){console.time("gen grid");var r=function(e){return console.time("split segments"),e=e.map((function(e){var t=Math.hypot(e[1][0]-e[0][0],e[1][1]-e[0][1]);if((t=Math.ceil(t/8-.3))<=0)return{parts:[e],seg:e};for(var n=[],r=0;r<=1;r+=1/t)n.push([e[0][0]*(1-r)+e[1][0]*r,e[0][1]*(1-r)+e[1][1]*r]);return{seg:e,parts:n.slice(0,-1).map((function(e,t){return[e,n[t+1]]}))}})),console.timeEnd("split segments"),e}(e),i=Math.pow(2,t),o=Array(i*i).fill().map((function(){return[]})),a=Array(i*i).fill().map((function(){return[]}));r.map((function(e){var t=e.seg;return e.parts.map((function(e){for(var r=0,s=[Math.round(e[0][0]/n-.5)+Math.round(e[0][1]/n-.5)*i,Math.round(e[1][0]/n-.5)+Math.round(e[1][1]/n-.5)*i,Math.round((e[0][0]+e[1][0])/2/n-.5)+Math.round((e[0][1]+e[1][1])/2/n-.5)*i];r<s.length;r++){var u=s[r];o[u]||(o[u]=[]),o[u].includes(t)||o[u].push(t),a[u]||(a[u]=[]),a[u].includes(e)||a[u].push(e)}}))}));var s=r.flatMap((function(e){return e.parts})),u=(s=function(e,t){var n;console.time("reorder placements");var r=e;e=[];for(var i=0,o=r.length-1,a=[],s=[],u=0,f=function(){var n=Math.floor((r[i][0][0]+r[i][1][0])/4/t),f=Math.floor((r[i][0][1]+r[i][1][1])/4/t),c=Math.floor((r[o][0][0]+r[o][1][0])/4/t),l=Math.floor((r[o][0][1]+r[o][1][1])/4/t);if(n==c&&f==l)k(e,r,i-u,i+1,o,o+u+1),a=[],s=[],u=0;else{var h=s.findIndex((function(e){var t=(0,A.default)(e,2),r=t[0],i=t[1];return r===n&&i===f})),p=a.findIndex((function(e){var t=(0,A.default)(e,2),n=t[0],r=t[1];return n===c&&r===l}));-1!==h?(k(e,r,i-u,i+1,o+u-h,o+u+1),o+=u-h,a=[],s=[],u=0):-1!==p?(k(e,r,i-u,i-u+p+1,o,o+u+1),i-=u-p,a=[],s=[],u=0):(a.push([n,f]),s.push([c,l]),u++)}i++,o--};i<o;)f();return(n=e).push.apply(n,(0,E.default)(r.slice(i-u,o+u+1))),console.timeEnd("reorder placements"),e}(s=s.filter((function(e){var t=(0,A.default)(e,2),n=(0,A.default)(t[0],2),r=n[0],i=n[1],o=(0,A.default)(t[1],2),a=o[0],s=o[1];return Math.hypot(r-a,i-s)>1})),n)).map((function(e){return[(Math.round((e[0][0]+e[1][0])/2/n+.5)-.5)*n,(Math.round((e[0][1]+e[1][1])/2/n+.5)-.5)*n]}));return console.timeEnd("gen grid"),{getGridSegments:function(e,t){return o[Math.round(e/n-.5)+Math.round(t/n-.5)*i]||[]},getGridParts:function(e,t){return a[Math.round(e/n-.5)+Math.round(t/n-.5)*i]||[]},getAreaIndex:function(e,t){var r=u.findIndex((function(r){return Math.abs(r[0]-e)<n/2&&Math.abs(r[1]-t)<n/2}));return-1===r&&(r=u.findIndex((function(r){return Math.abs(r[0]-e)+Math.abs(r[1]-t)<n}))),r},placements:s}}var C={exports:{}},j=function(e){"use strict";var t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(O){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof g?t:g,o=Object.create(i.prototype),a=new _(r||[]);return o._invoke=function(e,t,n){var r=c;return function(i,o){if(r===h)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw o;return j()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=T(a,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===c)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=h;var u=f(e,t,n);if("normal"===u.type){if(r=n.done?p:l,u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=p,n.method="throw",n.arg=u.arg)}}}(e,n,a),o}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(O){return{type:"throw",arg:O}}}e.wrap=u;var c="suspendedStart",l="suspendedYield",h="executing",p="completed",d={};function g(){}function m(){}function v(){}var y={};s(y,i,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(C([])));w&&w!==t&&n.call(w,i)&&(y=w);var x=v.prototype=g.prototype=Object.create(y);function A(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){var r;this._invoke=function(i,o){function a(){return new t((function(r,a){!function r(i,o,a,s){var u=f(e[i],e,o);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==typeof l&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(l).then((function(e){c.value=e,a(c)}),(function(e){return r("throw",e,a,s)}))}s(u.arg)}(i,o,r,a)}))}return r=r?r.then(a,a):a()}}function T(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,T(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=f(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function C(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:j}}function j(){return{value:void 0,done:!0}}return m.prototype=v,s(x,"constructor",v),s(v,"constructor",m),m.displayName=s(v,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,s(e,a,"GeneratorFunction")),e.prototype=Object.create(x),e},e.awrap=function(e){return{__await:e}},A(E.prototype),s(E.prototype,o,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new E(u(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},A(x),s(x,a,"Generator"),s(x,i,(function(){return this})),s(x,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=C,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:C(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}(C.exports);try{regeneratorRuntime=j}catch(Mn){"object"==typeof globalThis?globalThis.regeneratorRuntime=j:Function("r","regeneratorRuntime = r")(j)}var O,D=C=C.exports;function M(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(f){return void n(f)}s.done?t(u):Promise.resolve(u).then(r,i)}(O=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){M(o,r,i,a,s,"next",e)}function s(e){M(o,r,i,a,s,"throw",e)}a(void 0)}))}}).default=O,O.__esModule=!0;var L,P,B=l(D),N=l(O),R=(L=(0,N.default)(B.default.mark((function e(t,n){var r,i,o;return B.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(n);case 2:return r=e.sent,e.next=5,r.blob();case 5:return i=e.sent,e.next=8,createImageBitmap(i);case 8:o=e.sent,t({data:o,wrapS:"repeat",wrapT:"repeat"});case 10:case"end":return e.stop()}}),e)}))),function(e,t){return L.apply(this,arguments)});(P=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}).default=P,P.__esModule=!0;var I={exports:{}};!function(e,t){"use strict";"object"==typeof I.exports?I.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,(function(t,n){"use strict";var r=[],i=Object.getPrototypeOf,o=r.slice,a=r.flat?function(e){return r.flat.call(e)}:function(e){return r.concat.apply([],e)},s=r.push,u=r.indexOf,f={},c=f.toString,l=f.hasOwnProperty,h=l.toString,p=h.call(Object),d={},g=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item},m=function(e){return null!=e&&e===e.window},v=t.document,y={type:!0,src:!0,nonce:!0,noModule:!0};function b(e,t,n){var r,i,o=(n=n||v).createElement("script");if(o.text=e,t)for(r in y)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function w(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?f[c.call(e)]||"object":typeof e}var x=function(e,t){return new x.fn.init(e,t)};function A(e){var t=!!e&&"length"in e&&e.length,n=w(e);return!g(e)&&!m(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}x.fn=x.prototype={jquery:"3.6.3",constructor:x,length:0,toArray:function(){return o.call(this)},get:function(e){return null==e?o.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=x.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return x.each(this,e)},map:function(e){return this.pushStack(x.map(this,(function(t,n){return e.call(t,n,t)})))},slice:function(){return this.pushStack(o.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(x.grep(this,(function(e,t){return(t+1)%2})))},odd:function(){return this.pushStack(x.grep(this,(function(e,t){return t%2})))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:r.sort,splice:r.splice},x.extend=x.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,f=!1;for("boolean"==typeof a&&(f=a,a=arguments[s]||{},s++),"object"==typeof a||g(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],"__proto__"!==t&&a!==r&&(f&&r&&(x.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[t],o=i&&!Array.isArray(n)?[]:i||x.isPlainObject(n)?n:{},i=!1,a[t]=x.extend(f,o,r)):void 0!==r&&(a[t]=r));return a},x.extend({expando:"jQuery"+("3.6.3"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==c.call(e)||(t=i(e))&&("function"!=typeof(n=l.call(t,"constructor")&&t.constructor)||h.call(n)!==p))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){b(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(A(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(A(Object(e))?x.merge(n,"string"==typeof e?[e]:e):s.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:u.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,s=[];if(A(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&s.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&s.push(i);return a(s)},guid:1,support:d}),"function"==typeof Symbol&&(x.fn[Symbol.iterator]=r[Symbol.iterator]),x.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){f["[object "+t+"]"]=t.toLowerCase()}));var E=function(t){var n,r,i,o,a,s,u,f,c,l,h,p,d,g,m,v,y,b,w,x="sizzle"+1*new Date,A=t.document,E=0,T=0,S=fe(),k=fe(),_=fe(),C=fe(),j=function(e,t){return e===t&&(h=!0),0},O={}.hasOwnProperty,D=[],M=D.pop,L=D.push,P=D.push,B=D.slice,N=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},R="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",I="[\\x20\\t\\r\\n\\f]",F="(?:\\\\[\\da-fA-F]{1,6}"+I+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",q="\\["+I+"*("+F+")(?:"+I+"*([*^$|!~]?=)"+I+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+F+"))|)"+I+"*\\]",H=":("+F+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+q+")*)|.*)\\)|)",z=new RegExp(I+"+","g"),W=new RegExp("^"+I+"+|((?:^|[^\\\\])(?:\\\\.)*)"+I+"+$","g"),U=new RegExp("^"+I+"*,"+I+"*"),V=new RegExp("^"+I+"*([>+~]|"+I+")"+I+"*"),X=new RegExp(I+"|>"),$=new RegExp(H),G=new RegExp("^"+F+"$"),Y={ID:new RegExp("^#("+F+")"),CLASS:new RegExp("^\\.("+F+")"),TAG:new RegExp("^("+F+"|[*])"),ATTR:new RegExp("^"+q),PSEUDO:new RegExp("^"+H),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+I+"*(even|odd|(([+-]|)(\\d*)n|)"+I+"*(?:([+-]|)"+I+"*(\\d+)|))"+I+"*\\)|)","i"),bool:new RegExp("^(?:"+R+")$","i"),needsContext:new RegExp("^"+I+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+I+"*((?:-\\d)?\\d*)"+I+"*\\)|)(?=[^-]|$)","i")},Q=/HTML$/i,K=/^(?:input|select|textarea|button)$/i,J=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,ee=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,te=/[+~]/,ne=new RegExp("\\\\[\\da-fA-F]{1,6}"+I+"?|\\\\([^\\r\\n\\f])","g"),re=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},ie=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,oe=function(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},ae=function(){p()},se=xe((function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{P.apply(D=B.call(A.childNodes),A.childNodes),D[A.childNodes.length].nodeType}catch(e){P={apply:D.length?function(e,t){L.apply(e,B.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}function ue(e,t,n,i){var o,a,u,c,l,h,g,y=t&&t.ownerDocument,b=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==b&&9!==b&&11!==b)return n;if(!i&&(p(t),t=t||d,m)){if(11!==b&&(l=ee.exec(e)))if(o=l[1]){if(9===b){if(!(u=t.getElementById(o)))return n;if(u.id===o)return n.push(u),n}else if(y&&(u=y.getElementById(o))&&w(t,u)&&u.id===o)return n.push(u),n}else{if(l[2])return P.apply(n,t.getElementsByTagName(e)),n;if((o=l[3])&&r.getElementsByClassName&&t.getElementsByClassName)return P.apply(n,t.getElementsByClassName(o)),n}if(r.qsa&&!C[e+" "]&&(!v||!v.test(e))&&(1!==b||"object"!==t.nodeName.toLowerCase())){if(g=e,y=t,1===b&&(X.test(e)||V.test(e))){for((y=te.test(e)&&ye(t.parentNode)||t)===t&&r.scope||((c=t.getAttribute("id"))?c=c.replace(ie,oe):t.setAttribute("id",c=x)),a=(h=s(e)).length;a--;)h[a]=(c?"#"+c:":scope")+" "+we(h[a]);g=h.join(",")}try{if(r.cssSupportsSelector&&!CSS.supports("selector(:is("+g+"))"))throw new Error;return P.apply(n,y.querySelectorAll(g)),n}catch(A){C(e,!0)}finally{c===x&&t.removeAttribute("id")}}}return f(e.replace(W,"$1"),t,n,i)}function fe(){var e=[];return function t(n,r){return e.push(n+" ")>i.cacheLength&&delete t[e.shift()],t[n+" "]=r}}function ce(e){return e[x]=!0,e}function le(t){var n=d.createElement("fieldset");try{return!!t(n)}catch(e){return!1}finally{n.parentNode&&n.parentNode.removeChild(n),n=null}}function he(e,t){for(var n=e.split("|"),r=n.length;r--;)i.attrHandle[n[r]]=t}function pe(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function de(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function ge(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function me(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&se(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function ve(e){return ce((function(t){return t=+t,ce((function(n,r){for(var i,o=e([],n.length,t),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))}))}))}function ye(e){return e&&void 0!==e.getElementsByTagName&&e}for(n in r=ue.support={},a=ue.isXML=function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!Q.test(t||n&&n.nodeName||"HTML")},p=ue.setDocument=function(e){var t,n,o=e?e.ownerDocument||e:A;return o!=d&&9===o.nodeType&&o.documentElement?(g=(d=o).documentElement,m=!a(d),A!=d&&(n=d.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",ae,!1):n.attachEvent&&n.attachEvent("onunload",ae)),r.scope=le((function(e){return g.appendChild(e).appendChild(d.createElement("div")),void 0!==e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length})),r.cssSupportsSelector=le((function(){return CSS.supports("selector(*)")&&d.querySelectorAll(":is(:jqfake)")&&!CSS.supports("selector(:is(*,:jqfake))")})),r.attributes=le((function(e){return e.className="i",!e.getAttribute("className")})),r.getElementsByTagName=le((function(e){return e.appendChild(d.createComment("")),!e.getElementsByTagName("*").length})),r.getElementsByClassName=Z.test(d.getElementsByClassName),r.getById=le((function(e){return g.appendChild(e).id=x,!d.getElementsByName||!d.getElementsByName(x).length})),r.getById?(i.filter.ID=function(e){var t=e.replace(ne,re);return function(e){return e.getAttribute("id")===t}},i.find.ID=function(e,t){if(void 0!==t.getElementById&&m){var n=t.getElementById(e);return n?[n]:[]}}):(i.filter.ID=function(e){var t=e.replace(ne,re);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},i.find.ID=function(e,t){if(void 0!==t.getElementById&&m){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];for(i=t.getElementsByName(e),r=0;o=i[r++];)if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),i.find.TAG=r.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):r.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},i.find.CLASS=r.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&m)return t.getElementsByClassName(e)},y=[],v=[],r.qsa=Z.test(d.querySelectorAll),r.matchesSelector=Z.test(b=g.matches||g.webkitMatchesSelector||g.mozMatchesSelector||g.oMatchesSelector||g.msMatchesSelector),r.cssSupportsSelector||v.push(":has"),v=v.length&&new RegExp(v.join("|")),y=y.length&&new RegExp(y.join("|")),t=Z.test(g.compareDocumentPosition),w=t||Z.test(g.contains)?function(e,t){var n=9===e.nodeType&&e.documentElement||e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},j=t?function(e,t){if(e===t)return h=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!r.sortDetached&&t.compareDocumentPosition(e)===n?e==d||e.ownerDocument==A&&w(A,e)?-1:t==d||t.ownerDocument==A&&w(A,t)?1:l?N(l,e)-N(l,t):0:4&n?-1:1)}:function(e,t){if(e===t)return h=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e==d?-1:t==d?1:i?-1:o?1:l?N(l,e)-N(l,t):0;if(i===o)return pe(e,t);for(n=e;n=n.parentNode;)a.unshift(n);for(n=t;n=n.parentNode;)s.unshift(n);for(;a[r]===s[r];)r++;return r?pe(a[r],s[r]):a[r]==A?-1:s[r]==A?1:0},d):d},ue.matches=function(e,t){return ue(e,null,null,t)},ue.matchesSelector=function(t,n){if(p(t),r.matchesSelector&&m&&!C[n+" "]&&(!y||!y.test(n))&&(!v||!v.test(n)))try{var i=b.call(t,n);if(i||r.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(e){C(n,!0)}return ue(n,d,null,[t]).length>0},ue.contains=function(e,t){return(e.ownerDocument||e)!=d&&p(e),w(e,t)},ue.attr=function(e,t){(e.ownerDocument||e)!=d&&p(e);var n=i.attrHandle[t.toLowerCase()],o=n&&O.call(i.attrHandle,t.toLowerCase())?n(e,t,!m):void 0;return void 0!==o?o:r.attributes||!m?e.getAttribute(t):(o=e.getAttributeNode(t))&&o.specified?o.value:null},ue.escape=function(e){return(e+"").replace(ie,oe)},ue.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ue.uniqueSort=function(e){var t,n=[],i=0,o=0;if(h=!r.detectDuplicates,l=!r.sortStable&&e.slice(0),e.sort(j),h){for(;t=e[o++];)t===e[o]&&(i=n.push(o));for(;i--;)e.splice(n[i],1)}return l=null,e},o=ue.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=o(t);return n},(i=ue.selectors={cacheLength:50,createPseudo:ce,match:Y,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ne,re),e[3]=(e[3]||e[4]||e[5]||"").replace(ne,re),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ue.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ue.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return Y.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&$.test(n)&&(t=s(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(ne,re).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=S[e+" "];return t||(t=new RegExp("(^|"+I+")"+e+"("+I+"|$)"))&&S(e,(function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,n){return function(r){var i=ue.attr(r,e);return null==i?"!="===t:!t||(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i.replace(z," ")+" ").indexOf(n)>-1:"|="===t&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var f,c,l,h,p,d,g=o!==a?"nextSibling":"previousSibling",m=t.parentNode,v=s&&t.nodeName.toLowerCase(),y=!u&&!s,b=!1;if(m){if(o){for(;g;){for(h=t;h=h[g];)if(s?h.nodeName.toLowerCase()===v:1===h.nodeType)return!1;d=g="only"===e&&!d&&"nextSibling"}return!0}if(d=[a?m.firstChild:m.lastChild],a&&y){for(b=(p=(f=(c=(l=(h=m)[x]||(h[x]={}))[h.uniqueID]||(l[h.uniqueID]={}))[e]||[])[0]===E&&f[1])&&f[2],h=p&&m.childNodes[p];h=++p&&h&&h[g]||(b=p=0)||d.pop();)if(1===h.nodeType&&++b&&h===t){c[e]=[E,p,b];break}}else if(y&&(b=p=(f=(c=(l=(h=t)[x]||(h[x]={}))[h.uniqueID]||(l[h.uniqueID]={}))[e]||[])[0]===E&&f[1]),!1===b)for(;(h=++p&&h&&h[g]||(b=p=0)||d.pop())&&((s?h.nodeName.toLowerCase()!==v:1!==h.nodeType)||!++b||(y&&((c=(l=h[x]||(h[x]={}))[h.uniqueID]||(l[h.uniqueID]={}))[e]=[E,b]),h!==t)););return(b-=i)===r||b%r==0&&b/r>=0}}},PSEUDO:function(e,t){var n,r=i.pseudos[e]||i.setFilters[e.toLowerCase()]||ue.error("unsupported pseudo: "+e);return r[x]?r(t):r.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?ce((function(e,n){for(var i,o=r(e,t),a=o.length;a--;)e[i=N(e,o[a])]=!(n[i]=o[a])})):function(e){return r(e,0,n)}):r}},pseudos:{not:ce((function(e){var t=[],n=[],r=u(e.replace(W,"$1"));return r[x]?ce((function(e,t,n,i){for(var o,a=r(e,null,i,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))})):function(e,i,o){return t[0]=e,r(t,null,o,n),t[0]=null,!n.pop()}})),has:ce((function(e){return function(t){return ue(e,t).length>0}})),contains:ce((function(e){return e=e.replace(ne,re),function(t){return(t.textContent||o(t)).indexOf(e)>-1}})),lang:ce((function(e){return G.test(e||"")||ue.error("unsupported lang: "+e),e=e.replace(ne,re).toLowerCase(),function(t){var n;do{if(n=m?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(e){return e===g},focus:function(e){return e===d.activeElement&&(!d.hasFocus||d.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:me(!1),disabled:me(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return J.test(e.nodeName)},input:function(e){return K.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ve((function(){return[0]})),last:ve((function(e,t){return[t-1]})),eq:ve((function(e,t,n){return[n<0?n+t:n]})),even:ve((function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e})),odd:ve((function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e})),lt:ve((function(e,t,n){for(var r=n<0?n+t:n>t?t:n;--r>=0;)e.push(r);return e})),gt:ve((function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e}))}}).pseudos.nth=i.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[n]=de(n);for(n in{submit:!0,reset:!0})i.pseudos[n]=ge(n);function be(){}function we(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function xe(e,t,n){var r=t.dir,i=t.next,o=i||r,a=n&&"parentNode"===o,s=T++;return t.first?function(t,n,i){for(;t=t[r];)if(1===t.nodeType||a)return e(t,n,i);return!1}:function(t,n,u){var f,c,l,h=[E,s];if(u){for(;t=t[r];)if((1===t.nodeType||a)&&e(t,n,u))return!0}else for(;t=t[r];)if(1===t.nodeType||a)if(c=(l=t[x]||(t[x]={}))[t.uniqueID]||(l[t.uniqueID]={}),i&&i===t.nodeName.toLowerCase())t=t[r]||t;else{if((f=c[o])&&f[0]===E&&f[1]===s)return h[2]=f[2];if(c[o]=h,h[2]=e(t,n,u))return!0}return!1}}function Ae(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function Ee(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,f=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),f&&t.push(s)));return a}function Te(e,t,n,r,i,o){return r&&!r[x]&&(r=Te(r)),i&&!i[x]&&(i=Te(i,o)),ce((function(o,a,s,u){var f,c,l,h=[],p=[],d=a.length,g=o||function(e,t,n){for(var r=0,i=t.length;r<i;r++)ue(e,t[r],n);return n}(t||"*",s.nodeType?[s]:s,[]),m=!e||!o&&t?g:Ee(g,h,e,s,u),v=n?i||(o?e:d||r)?[]:a:m;if(n&&n(m,v,s,u),r)for(f=Ee(v,p),r(f,[],s,u),c=f.length;c--;)(l=f[c])&&(v[p[c]]=!(m[p[c]]=l));if(o){if(i||e){if(i){for(f=[],c=v.length;c--;)(l=v[c])&&f.push(m[c]=l);i(null,v=[],f,u)}for(c=v.length;c--;)(l=v[c])&&(f=i?N(o,l):h[c])>-1&&(o[f]=!(a[f]=l))}}else v=Ee(v===a?v.splice(d,v.length):v),i?i(null,a,v,u):P.apply(a,v)}))}function Se(e){for(var t,n,r,o=e.length,a=i.relative[e[0].type],s=a||i.relative[" "],u=a?1:0,f=xe((function(e){return e===t}),s,!0),l=xe((function(e){return N(t,e)>-1}),s,!0),h=[function(e,n,r){var i=!a&&(r||n!==c)||((t=n).nodeType?f(e,n,r):l(e,n,r));return t=null,i}];u<o;u++)if(n=i.relative[e[u].type])h=[xe(Ae(h),n)];else{if((n=i.filter[e[u].type].apply(null,e[u].matches))[x]){for(r=++u;r<o&&!i.relative[e[r].type];r++);return Te(u>1&&Ae(h),u>1&&we(e.slice(0,u-1).concat({value:" "===e[u-2].type?"*":""})).replace(W,"$1"),n,u<r&&Se(e.slice(u,r)),r<o&&Se(e=e.slice(r)),r<o&&we(e))}h.push(n)}return Ae(h)}return be.prototype=i.filters=i.pseudos,i.setFilters=new be,s=ue.tokenize=function(e,t){var n,r,o,a,s,u,f,c=k[e+" "];if(c)return t?0:c.slice(0);for(s=e,u=[],f=i.preFilter;s;){for(a in n&&!(r=U.exec(s))||(r&&(s=s.slice(r[0].length)||s),u.push(o=[])),n=!1,(r=V.exec(s))&&(n=r.shift(),o.push({value:n,type:r[0].replace(W," ")}),s=s.slice(n.length)),i.filter)!(r=Y[a].exec(s))||f[a]&&!(r=f[a](r))||(n=r.shift(),o.push({value:n,type:a,matches:r}),s=s.slice(n.length));if(!n)break}return t?s.length:s?ue.error(e):k(e,u).slice(0)},u=ue.compile=function(e,t){var n,r=[],o=[],a=_[e+" "];if(!a){for(t||(t=s(e)),n=t.length;n--;)(a=Se(t[n]))[x]?r.push(a):o.push(a);(a=_(e,function(e,t){var n=t.length>0,r=e.length>0,o=function(o,a,s,u,f){var l,h,g,v=0,y="0",b=o&&[],w=[],x=c,A=o||r&&i.find.TAG("*",f),T=E+=null==x?1:Math.random()||.1,S=A.length;for(f&&(c=a==d||a||f);y!==S&&null!=(l=A[y]);y++){if(r&&l){for(h=0,a||l.ownerDocument==d||(p(l),s=!m);g=e[h++];)if(g(l,a||d,s)){u.push(l);break}f&&(E=T)}n&&((l=!g&&l)&&v--,o&&b.push(l))}if(v+=y,n&&y!==v){for(h=0;g=t[h++];)g(b,w,a,s);if(o){if(v>0)for(;y--;)b[y]||w[y]||(w[y]=M.call(u));w=Ee(w)}P.apply(u,w),f&&!o&&w.length>0&&v+t.length>1&&ue.uniqueSort(u)}return f&&(E=T,c=x),b};return n?ce(o):o}(o,r))).selector=e}return a},f=ue.select=function(e,t,n,r){var o,a,f,c,l,h="function"==typeof e&&e,p=!r&&s(e=h.selector||e);if(n=n||[],1===p.length){if((a=p[0]=p[0].slice(0)).length>2&&"ID"===(f=a[0]).type&&9===t.nodeType&&m&&i.relative[a[1].type]){if(!(t=(i.find.ID(f.matches[0].replace(ne,re),t)||[])[0]))return n;h&&(t=t.parentNode),e=e.slice(a.shift().value.length)}for(o=Y.needsContext.test(e)?0:a.length;o--&&(f=a[o],!i.relative[c=f.type]);)if((l=i.find[c])&&(r=l(f.matches[0].replace(ne,re),te.test(a[0].type)&&ye(t.parentNode)||t))){if(a.splice(o,1),!(e=r.length&&we(a)))return P.apply(n,r),n;break}}return(h||u(e,p))(r,t,!m,n,!t||te.test(e)&&ye(t.parentNode)||t),n},r.sortStable=x.split("").sort(j).join("")===x,r.detectDuplicates=!!h,p(),r.sortDetached=le((function(e){return 1&e.compareDocumentPosition(d.createElement("fieldset"))})),le((function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")}))||he("type|href|height|width",(function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)})),r.attributes&&le((function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}))||he("value",(function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue})),le((function(e){return null==e.getAttribute("disabled")}))||he(R,(function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null})),ue}(t);x.find=E,x.expr=E.selectors,x.expr[":"]=x.expr.pseudos,x.uniqueSort=x.unique=E.uniqueSort,x.text=E.getText,x.isXMLDoc=E.isXML,x.contains=E.contains,x.escapeSelector=E.escape;var T=function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&x(e).is(n))break;r.push(e)}return r},S=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},k=x.expr.match.needsContext;function _(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var C=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function j(e,t,n){return g(t)?x.grep(e,(function(e,r){return!!t.call(e,r,e)!==n})):t.nodeType?x.grep(e,(function(e){return e===t!==n})):"string"!=typeof t?x.grep(e,(function(e){return u.call(t,e)>-1!==n})):x.filter(t,e,n)}x.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?x.find.matchesSelector(r,e)?[r]:[]:x.find.matches(e,x.grep(t,(function(e){return 1===e.nodeType})))},x.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(x(e).filter((function(){for(t=0;t<r;t++)if(x.contains(i[t],this))return!0})));for(n=this.pushStack([]),t=0;t<r;t++)x.find(e,i[t],n);return r>1?x.uniqueSort(n):n},filter:function(e){return this.pushStack(j(this,e||[],!1))},not:function(e){return this.pushStack(j(this,e||[],!0))},is:function(e){return!!j(this,"string"==typeof e&&k.test(e)?x(e):e||[],!1).length}});var O,D=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(x.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||O,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:D.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof x?t[0]:t,x.merge(this,x.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:v,!0)),C.test(r[1])&&x.isPlainObject(t))for(r in t)g(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=v.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):g(e)?void 0!==n.ready?n.ready(e):e(x):x.makeArray(e,this)}).prototype=x.fn,O=x(v);var M=/^(?:parents|prev(?:Until|All))/,L={children:!0,contents:!0,next:!0,prev:!0};function P(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}x.fn.extend({has:function(e){var t=x(e,this),n=t.length;return this.filter((function(){for(var e=0;e<n;e++)if(x.contains(this,t[e]))return!0}))},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!=typeof e&&x(e);if(!k.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&x.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?x.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?u.call(x(e),this[0]):u.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(x.uniqueSort(x.merge(this.get(),x(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),x.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return T(e,"parentNode")},parentsUntil:function(e,t,n){return T(e,"parentNode",n)},next:function(e){return P(e,"nextSibling")},prev:function(e){return P(e,"previousSibling")},nextAll:function(e){return T(e,"nextSibling")},prevAll:function(e){return T(e,"previousSibling")},nextUntil:function(e,t,n){return T(e,"nextSibling",n)},prevUntil:function(e,t,n){return T(e,"previousSibling",n)},siblings:function(e){return S((e.parentNode||{}).firstChild,e)},children:function(e){return S(e.firstChild)},contents:function(e){return null!=e.contentDocument&&i(e.contentDocument)?e.contentDocument:(_(e,"template")&&(e=e.content||e),x.merge([],e.childNodes))}},(function(e,t){x.fn[e]=function(n,r){var i=x.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=x.filter(r,i)),this.length>1&&(L[e]||x.uniqueSort(i),M.test(e)&&i.reverse()),this.pushStack(i)}}));var B=/[^\x20\t\r\n\f]+/g;function N(e){return e}function R(e){throw e}function I(e,t,n,r){var i;try{e&&g(i=e.promise)?i.call(e).done(t).fail(n):e&&g(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}x.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return x.each(e.match(B)||[],(function(e,n){t[n]=!0})),t}(e):x.extend({},e);var t,n,r,i,o=[],a=[],s=-1,u=function(){for(i=i||e.once,r=t=!0;a.length;s=-1)for(n=a.shift();++s<o.length;)!1===o[s].apply(n[0],n[1])&&e.stopOnFalse&&(s=o.length,n=!1);e.memory||(n=!1),t=!1,i&&(o=n?[]:"")},f={add:function(){return o&&(n&&!t&&(s=o.length-1,a.push(n)),function t(n){x.each(n,(function(n,r){g(r)?e.unique&&f.has(r)||o.push(r):r&&r.length&&"string"!==w(r)&&t(r)}))}(arguments),n&&!t&&u()),this},remove:function(){return x.each(arguments,(function(e,t){for(var n;(n=x.inArray(t,o,n))>-1;)o.splice(n,1),n<=s&&s--})),this},has:function(e){return e?x.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=a=[],o=n="",this},disabled:function(){return!o},lock:function(){return i=a=[],n||t||(o=n=""),this},locked:function(){return!!i},fireWith:function(e,n){return i||(n=[e,(n=n||[]).slice?n.slice():n],a.push(n),t||u()),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!r}};return f},x.extend({Deferred:function(n){var r=[["notify","progress",x.Callbacks("memory"),x.Callbacks("memory"),2],["resolve","done",x.Callbacks("once memory"),x.Callbacks("once memory"),0,"resolved"],["reject","fail",x.Callbacks("once memory"),x.Callbacks("once memory"),1,"rejected"]],i="pending",o={state:function(){return i},always:function(){return a.done(arguments).fail(arguments),this},catch:function(e){return o.then(null,e)},pipe:function(){var e=arguments;return x.Deferred((function(t){x.each(r,(function(n,r){var i=g(e[r[4]])&&e[r[4]];a[r[1]]((function(){var e=i&&i.apply(this,arguments);e&&g(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[r[0]+"With"](this,i?[e]:arguments)}))})),e=null})).promise()},then:function(n,i,o){var a=0;function s(n,r,i,o){return function(){var u=this,f=arguments,c=function(){var e,t;if(!(n<a)){if((e=i.apply(u,f))===r.promise())throw new TypeError("Thenable self-resolution");t=e&&("object"==typeof e||"function"==typeof e)&&e.then,g(t)?o?t.call(e,s(a,r,N,o),s(a,r,R,o)):(a++,t.call(e,s(a,r,N,o),s(a,r,R,o),s(a,r,N,r.notifyWith))):(i!==N&&(u=void 0,f=[e]),(o||r.resolveWith)(u,f))}},l=o?c:function(){try{c()}catch(e){x.Deferred.exceptionHook&&x.Deferred.exceptionHook(e,l.stackTrace),n+1>=a&&(i!==R&&(u=void 0,f=[e]),r.rejectWith(u,f))}};n?l():(x.Deferred.getStackHook&&(l.stackTrace=x.Deferred.getStackHook()),t.setTimeout(l))}}return x.Deferred((function(e){r[0][3].add(s(0,e,g(o)?o:N,e.notifyWith)),r[1][3].add(s(0,e,g(n)?n:N)),r[2][3].add(s(0,e,g(i)?i:R))})).promise()},promise:function(e){return null!=e?x.extend(e,o):o}},a={};return x.each(r,(function(e,t){var n=t[2],s=t[5];o[t[1]]=n.add,s&&n.add((function(){i=s}),r[3-e][2].disable,r[3-e][3].disable,r[0][2].lock,r[0][3].lock),n.add(t[3].fire),a[t[0]]=function(){return a[t[0]+"With"](this===a?void 0:this,arguments),this},a[t[0]+"With"]=n.fireWith})),o.promise(a),n&&n.call(a,a),a},when:function(e){var t=arguments.length,n=t,r=Array(n),i=o.call(arguments),a=x.Deferred(),s=function(e){return function(n){r[e]=this,i[e]=arguments.length>1?o.call(arguments):n,--t||a.resolveWith(r,i)}};if(t<=1&&(I(e,a.done(s(n)).resolve,a.reject,!t),"pending"===a.state()||g(i[n]&&i[n].then)))return a.then();for(;n--;)I(i[n],s(n),a.reject);return a.promise()}});var F=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;x.Deferred.exceptionHook=function(e,n){t.console&&t.console.warn&&e&&F.test(e.name)&&t.console.warn("jQuery.Deferred exception: "+e.message,e.stack,n)},x.readyException=function(e){t.setTimeout((function(){throw e}))};var q=x.Deferred();function H(){v.removeEventListener("DOMContentLoaded",H),t.removeEventListener("load",H),x.ready()}x.fn.ready=function(e){return q.then(e).catch((function(e){x.readyException(e)})),this},x.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--x.readyWait:x.isReady)||(x.isReady=!0,!0!==e&&--x.readyWait>0||q.resolveWith(v,[x]))}}),x.ready.then=q.then,"complete"===v.readyState||"loading"!==v.readyState&&!v.documentElement.doScroll?t.setTimeout(x.ready):(v.addEventListener("DOMContentLoaded",H),t.addEventListener("load",H));var z=function(e,t,n,r,i,o,a){var s=0,u=e.length,f=null==n;if("object"===w(n))for(s in i=!0,n)z(e,t,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,g(r)||(a=!0),f&&(a?(t.call(e,r),t=null):(f=t,t=function(e,t,n){return f.call(x(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:f?t.call(e):u?t(e[0],n):o},W=/^-ms-/,U=/-([a-z])/g;function V(e,t){return t.toUpperCase()}function X(e){return e.replace(W,"ms-").replace(U,V)}var $=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function G(){this.expando=x.expando+G.uid++}G.uid=1,G.prototype={cache:function(e){var t=e[this.expando];return t||(t={},$(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[X(t)]=n;else for(r in t)i[X(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][X(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(X):(t=X(t))in r?[t]:t.match(B)||[]).length;for(;n--;)delete r[t[n]]}(void 0===t||x.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!x.isEmptyObject(t)}};var Y=new G,Q=new G,K=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,J=/[A-Z]/g;function Z(t,n,r){var i;if(void 0===r&&1===t.nodeType)if(i="data-"+n.replace(J,"-$&").toLowerCase(),"string"==typeof(r=t.getAttribute(i))){try{r=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:K.test(e)?JSON.parse(e):e)}(r)}catch(e){}Q.set(t,n,r)}else r=void 0;return r}x.extend({hasData:function(e){return Q.hasData(e)||Y.hasData(e)},data:function(e,t,n){return Q.access(e,t,n)},removeData:function(e,t){Q.remove(e,t)},_data:function(e,t,n){return Y.access(e,t,n)},_removeData:function(e,t){Y.remove(e,t)}}),x.fn.extend({data:function(e,t){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(i=Q.get(o),1===o.nodeType&&!Y.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&0===(r=a[n].name).indexOf("data-")&&(r=X(r.slice(5)),Z(o,r,i[r]));Y.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each((function(){Q.set(this,e)})):z(this,(function(t){var n;if(o&&void 0===t)return void 0!==(n=Q.get(o,e))||void 0!==(n=Z(o,e))?n:void 0;this.each((function(){Q.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){Q.remove(this,e)}))}}),x.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=Y.get(e,t),n&&(!r||Array.isArray(n)?r=Y.access(e,t,x.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=x.queue(e,t),r=n.length,i=n.shift(),o=x._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,(function(){x.dequeue(e,t)}),o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Y.get(e,n)||Y.access(e,n,{empty:x.Callbacks("once memory").add((function(){Y.remove(e,[t+"queue",n])}))})}}),x.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?x.queue(this[0],e):void 0===t?this:this.each((function(){var n=x.queue(this,e,t);x._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&x.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){x.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=x.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(n=Y.get(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var ee=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,te=new RegExp("^(?:([+-])=|)("+ee+")([a-z%]*)$","i"),ne=["Top","Right","Bottom","Left"],re=v.documentElement,ie=function(e){return x.contains(e.ownerDocument,e)},oe={composed:!0};re.getRootNode&&(ie=function(e){return x.contains(e.ownerDocument,e)||e.getRootNode(oe)===e.ownerDocument});var ae=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&ie(e)&&"none"===x.css(e,"display")};function se(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return x.css(e,t,"")},u=s(),f=n&&n[3]||(x.cssNumber[t]?"":"px"),c=e.nodeType&&(x.cssNumber[t]||"px"!==f&&+u)&&te.exec(x.css(e,t));if(c&&c[3]!==f){for(u/=2,f=f||c[3],c=+u||1;a--;)x.style(e,t,c+f),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),c/=o;c*=2,x.style(e,t,c+f),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=f,r.start=c,r.end=i)),i}var ue={};function fe(e){var t,n=e.ownerDocument,r=e.nodeName,i=ue[r];return i||(t=n.body.appendChild(n.createElement(r)),i=x.css(t,"display"),t.parentNode.removeChild(t),"none"===i&&(i="block"),ue[r]=i,i)}function ce(e,t){for(var n,r,i=[],o=0,a=e.length;o<a;o++)(r=e[o]).style&&(n=r.style.display,t?("none"===n&&(i[o]=Y.get(r,"display")||null,i[o]||(r.style.display="")),""===r.style.display&&ae(r)&&(i[o]=fe(r))):"none"!==n&&(i[o]="none",Y.set(r,"display",n)));for(o=0;o<a;o++)null!=i[o]&&(e[o].style.display=i[o]);return e}x.fn.extend({show:function(){return ce(this,!0)},hide:function(){return ce(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){ae(this)?x(this).show():x(this).hide()}))}});var le,he,pe=/^(?:checkbox|radio)$/i,de=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,ge=/^$|^module$|\/(?:java|ecma)script/i;le=v.createDocumentFragment().appendChild(v.createElement("div")),(he=v.createElement("input")).setAttribute("type","radio"),he.setAttribute("checked","checked"),he.setAttribute("name","t"),le.appendChild(he),d.checkClone=le.cloneNode(!0).cloneNode(!0).lastChild.checked,le.innerHTML="<textarea>x</textarea>",d.noCloneChecked=!!le.cloneNode(!0).lastChild.defaultValue,le.innerHTML="<option></option>",d.option=!!le.lastChild;var me={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ve(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&_(e,t)?x.merge([e],n):n}function ye(e,t){for(var n=0,r=e.length;n<r;n++)Y.set(e[n],"globalEval",!t||Y.get(t[n],"globalEval"))}me.tbody=me.tfoot=me.colgroup=me.caption=me.thead,me.th=me.td,d.option||(me.optgroup=me.option=[1,"<select multiple='multiple'>","</select>"]);var be=/<|&#?\w+;/;function we(e,t,n,r,i){for(var o,a,s,u,f,c,l=t.createDocumentFragment(),h=[],p=0,d=e.length;p<d;p++)if((o=e[p])||0===o)if("object"===w(o))x.merge(h,o.nodeType?[o]:o);else if(be.test(o)){for(a=a||l.appendChild(t.createElement("div")),s=(de.exec(o)||["",""])[1].toLowerCase(),u=me[s]||me._default,a.innerHTML=u[1]+x.htmlPrefilter(o)+u[2],c=u[0];c--;)a=a.lastChild;x.merge(h,a.childNodes),(a=l.firstChild).textContent=""}else h.push(t.createTextNode(o));for(l.textContent="",p=0;o=h[p++];)if(r&&x.inArray(o,r)>-1)i&&i.push(o);else if(f=ie(o),a=ve(l.appendChild(o),"script"),f&&ye(a),n)for(c=0;o=a[c++];)ge.test(o.type||"")&&n.push(o);return l}var xe=/^([^.]*)(?:\.(.+)|)/;function Ae(){return!0}function Ee(){return!1}function Te(e,t){return e===function(){try{return v.activeElement}catch(e){}}()==("focus"===t)}function Se(e,t,n,r,i,o){var a,s;if("object"==typeof t){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)Se(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Ee;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return x().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=x.guid++)),e.each((function(){x.event.add(this,t,i,r,n)}))}function ke(e,t,n){n?(Y.set(e,t,!1),x.event.add(e,t,{namespace:!1,handler:function(e){var r,i,a=Y.get(this,t);if(1&e.isTrigger&&this[t]){if(a.length)(x.event.special[t]||{}).delegateType&&e.stopPropagation();else if(a=o.call(arguments),Y.set(this,t,a),r=n(this,t),this[t](),a!==(i=Y.get(this,t))||r?Y.set(this,t,!1):i={},a!==i)return e.stopImmediatePropagation(),e.preventDefault(),i&&i.value}else a.length&&(Y.set(this,t,{value:x.event.trigger(x.extend(a[0],x.Event.prototype),a.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Y.get(e,t)&&x.event.add(e,t,Ae)}x.event={global:{},add:function(e,t,n,r,i){var o,a,s,u,f,c,l,h,p,d,g,m=Y.get(e);if($(e))for(n.handler&&(n=(o=n).handler,i=o.selector),i&&x.find.matchesSelector(re,i),n.guid||(n.guid=x.guid++),(u=m.events)||(u=m.events=Object.create(null)),(a=m.handle)||(a=m.handle=function(t){return void 0!==x&&x.event.triggered!==t.type?x.event.dispatch.apply(e,arguments):void 0}),f=(t=(t||"").match(B)||[""]).length;f--;)p=g=(s=xe.exec(t[f])||[])[1],d=(s[2]||"").split(".").sort(),p&&(l=x.event.special[p]||{},p=(i?l.delegateType:l.bindType)||p,l=x.event.special[p]||{},c=x.extend({type:p,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&x.expr.match.needsContext.test(i),namespace:d.join(".")},o),(h=u[p])||((h=u[p]=[]).delegateCount=0,l.setup&&!1!==l.setup.call(e,r,d,a)||e.addEventListener&&e.addEventListener(p,a)),l.add&&(l.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),i?h.splice(h.delegateCount++,0,c):h.push(c),x.event.global[p]=!0)},remove:function(e,t,n,r,i){var o,a,s,u,f,c,l,h,p,d,g,m=Y.hasData(e)&&Y.get(e);if(m&&(u=m.events)){for(f=(t=(t||"").match(B)||[""]).length;f--;)if(p=g=(s=xe.exec(t[f])||[])[1],d=(s[2]||"").split(".").sort(),p){for(l=x.event.special[p]||{},h=u[p=(r?l.delegateType:l.bindType)||p]||[],s=s[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=h.length;o--;)c=h[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(h.splice(o,1),c.selector&&h.delegateCount--,l.remove&&l.remove.call(e,c));a&&!h.length&&(l.teardown&&!1!==l.teardown.call(e,d,m.handle)||x.removeEvent(e,p,m.handle),delete u[p])}else for(p in u)x.event.remove(e,p+t[f],n,r,!0);x.isEmptyObject(u)&&Y.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,a,s=new Array(arguments.length),u=x.event.fix(e),f=(Y.get(this,"events")||Object.create(null))[u.type]||[],c=x.event.special[u.type]||{};for(s[0]=u,t=1;t<arguments.length;t++)s[t]=arguments[t];if(u.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,u)){for(a=x.event.handlers.call(this,u,f),t=0;(i=a[t++])&&!u.isPropagationStopped();)for(u.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!u.isImmediatePropagationStopped();)u.rnamespace&&!1!==o.namespace&&!u.rnamespace.test(o.namespace)||(u.handleObj=o,u.data=o.data,void 0!==(r=((x.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s))&&!1===(u.result=r)&&(u.preventDefault(),u.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,u),u.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,f=e.target;if(u&&f.nodeType&&!("click"===e.type&&e.button>=1))for(;f!==this;f=f.parentNode||this)if(1===f.nodeType&&("click"!==e.type||!0!==f.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=t[n]).selector+" "]&&(a[i]=r.needsContext?x(i,this).index(f)>-1:x.find(i,this,null,[f]).length),a[i]&&o.push(r);o.length&&s.push({elem:f,handlers:o})}return f=this,u<t.length&&s.push({elem:f,handlers:t.slice(u)}),s},addProp:function(e,t){Object.defineProperty(x.Event.prototype,e,{enumerable:!0,configurable:!0,get:g(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[x.expando]?e:new x.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return pe.test(t.type)&&t.click&&_(t,"input")&&ke(t,"click",Ae),!1},trigger:function(e){var t=this||e;return pe.test(t.type)&&t.click&&_(t,"input")&&ke(t,"click"),!0},_default:function(e){var t=e.target;return pe.test(t.type)&&t.click&&_(t,"input")&&Y.get(t,"click")||_(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},x.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},x.Event=function(e,t){if(!(this instanceof x.Event))return new x.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Ae:Ee,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&x.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[x.expando]=!0},x.Event.prototype={constructor:x.Event,isDefaultPrevented:Ee,isPropagationStopped:Ee,isImmediatePropagationStopped:Ee,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Ae,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Ae,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Ae,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},x.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},x.event.addProp),x.each({focus:"focusin",blur:"focusout"},(function(e,t){x.event.special[e]={setup:function(){return ke(this,e,Te),!1},trigger:function(){return ke(this,e),!0},_default:function(t){return Y.get(t.target,e)},delegateType:t}})),x.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){x.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=e.relatedTarget,i=e.handleObj;return r&&(r===this||x.contains(this,r))||(e.type=i.origType,n=i.handler.apply(this,arguments),e.type=t),n}}})),x.fn.extend({on:function(e,t,n,r){return Se(this,e,t,n,r)},one:function(e,t,n,r){return Se(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,x(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Ee),this.each((function(){x.event.remove(this,e,n,t)}))}});var _e=/<script|<style|<link/i,Ce=/checked\s*(?:[^=]|=\s*.checked.)/i,je=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Oe(e,t){return _(e,"table")&&_(11!==t.nodeType?t:t.firstChild,"tr")&&x(e).children("tbody")[0]||e}function De(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Me(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Le(e,t){var n,r,i,o,a,s;if(1===t.nodeType){if(Y.hasData(e)&&(s=Y.get(e).events))for(i in Y.remove(t,"handle events"),s)for(n=0,r=s[i].length;n<r;n++)x.event.add(t,i,s[i][n]);Q.hasData(e)&&(o=Q.access(e),a=x.extend({},o),Q.set(t,a))}}function Pe(e,t,n,r){t=a(t);var i,o,s,u,f,c,l=0,h=e.length,p=h-1,m=t[0],v=g(m);if(v||h>1&&"string"==typeof m&&!d.checkClone&&Ce.test(m))return e.each((function(i){var o=e.eq(i);v&&(t[0]=m.call(this,i,o.html())),Pe(o,t,n,r)}));if(h&&(o=(i=we(t,e[0].ownerDocument,!1,e,r)).firstChild,1===i.childNodes.length&&(i=o),o||r)){for(u=(s=x.map(ve(i,"script"),De)).length;l<h;l++)f=i,l!==p&&(f=x.clone(f,!0,!0),u&&x.merge(s,ve(f,"script"))),n.call(e[l],f,l);if(u)for(c=s[s.length-1].ownerDocument,x.map(s,Me),l=0;l<u;l++)f=s[l],ge.test(f.type||"")&&!Y.access(f,"globalEval")&&x.contains(c,f)&&(f.src&&"module"!==(f.type||"").toLowerCase()?x._evalUrl&&!f.noModule&&x._evalUrl(f.src,{nonce:f.nonce||f.getAttribute("nonce")},c):b(f.textContent.replace(je,""),f,c))}return e}function Be(e,t,n){for(var r,i=t?x.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||x.cleanData(ve(r)),r.parentNode&&(n&&ie(r)&&ye(ve(r,"script")),r.parentNode.removeChild(r));return e}x.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,i,o,a,s,u,f,c=e.cloneNode(!0),l=ie(e);if(!(d.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||x.isXMLDoc(e)))for(a=ve(c),r=0,i=(o=ve(e)).length;r<i;r++)s=o[r],void 0,"input"===(f=(u=a[r]).nodeName.toLowerCase())&&pe.test(s.type)?u.checked=s.checked:"input"!==f&&"textarea"!==f||(u.defaultValue=s.defaultValue);if(t)if(n)for(o=o||ve(e),a=a||ve(c),r=0,i=o.length;r<i;r++)Le(o[r],a[r]);else Le(e,c);return(a=ve(c,"script")).length>0&&ye(a,!l&&ve(e,"script")),c},cleanData:function(e){for(var t,n,r,i=x.event.special,o=0;void 0!==(n=e[o]);o++)if($(n)){if(t=n[Y.expando]){if(t.events)for(r in t.events)i[r]?x.event.remove(n,r):x.removeEvent(n,r,t.handle);n[Y.expando]=void 0}n[Q.expando]&&(n[Q.expando]=void 0)}}}),x.fn.extend({detach:function(e){return Be(this,e,!0)},remove:function(e){return Be(this,e)},text:function(e){return z(this,(function(e){return void 0===e?x.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return Pe(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Oe(this,e).appendChild(e)}))},prepend:function(){return Pe(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Oe(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return Pe(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return Pe(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(x.cleanData(ve(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return x.clone(this,e,t)}))},html:function(t){return z(this,(function(t){var n=this[0]||{},r=0,i=this.length;if(void 0===t&&1===n.nodeType)return n.innerHTML;if("string"==typeof t&&!_e.test(t)&&!me[(de.exec(t)||["",""])[1].toLowerCase()]){t=x.htmlPrefilter(t);try{for(;r<i;r++)1===(n=this[r]||{}).nodeType&&(x.cleanData(ve(n,!1)),n.innerHTML=t);n=0}catch(e){}}n&&this.empty().append(t)}),null,t,arguments.length)},replaceWith:function(){var e=[];return Pe(this,arguments,(function(t){var n=this.parentNode;x.inArray(this,e)<0&&(x.cleanData(ve(this)),n&&n.replaceChild(t,this))}),e)}}),x.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){x.fn[e]=function(e){for(var n,r=[],i=x(e),o=i.length-1,a=0;a<=o;a++)n=a===o?this:this.clone(!0),x(i[a])[t](n),s.apply(r,n.get());return this.pushStack(r)}}));var Ne=new RegExp("^("+ee+")(?!px)[a-z%]+$","i"),Re=/^--/,Ie=function(e){var n=e.ownerDocument.defaultView;return n&&n.opener||(n=t),n.getComputedStyle(e)},Fe=function(e,t,n){var r,i,o={};for(i in t)o[i]=e.style[i],e.style[i]=t[i];for(i in r=n.call(e),t)e.style[i]=o[i];return r},qe=new RegExp(ne.join("|"),"i"),He=new RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g");function ze(e,t,n){var r,i,o,a,s=Re.test(t),u=e.style;return(n=n||Ie(e))&&(a=n.getPropertyValue(t)||n[t],s&&a&&(a=a.replace(He,"$1")||void 0),""!==a||ie(e)||(a=x.style(e,t)),!d.pixelBoxStyles()&&Ne.test(a)&&qe.test(t)&&(r=u.width,i=u.minWidth,o=u.maxWidth,u.minWidth=u.maxWidth=u.width=a,a=n.width,u.width=r,u.minWidth=i,u.maxWidth=o)),void 0!==a?a+"":a}function We(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(c){f.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",re.appendChild(f).appendChild(c);var e=t.getComputedStyle(c);r="1%"!==e.top,u=12===n(e.marginLeft),c.style.right="60%",a=36===n(e.right),i=36===n(e.width),c.style.position="absolute",o=12===n(c.offsetWidth/3),re.removeChild(f),c=null}}function n(e){return Math.round(parseFloat(e))}var r,i,o,a,s,u,f=v.createElement("div"),c=v.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",d.clearCloneStyle="content-box"===c.style.backgroundClip,x.extend(d,{boxSizingReliable:function(){return e(),i},pixelBoxStyles:function(){return e(),a},pixelPosition:function(){return e(),r},reliableMarginLeft:function(){return e(),u},scrollboxSize:function(){return e(),o},reliableTrDimensions:function(){var e,n,r,i;return null==s&&(e=v.createElement("table"),n=v.createElement("tr"),r=v.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",n.style.cssText="border:1px solid",n.style.height="1px",r.style.height="9px",r.style.display="block",re.appendChild(e).appendChild(n).appendChild(r),i=t.getComputedStyle(n),s=parseInt(i.height,10)+parseInt(i.borderTopWidth,10)+parseInt(i.borderBottomWidth,10)===n.offsetHeight,re.removeChild(e)),s}}))}();var Ue=["Webkit","Moz","ms"],Ve=v.createElement("div").style,Xe={};function $e(e){return x.cssProps[e]||Xe[e]||(e in Ve?e:Xe[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),n=Ue.length;n--;)if((e=Ue[n]+t)in Ve)return e}(e)||e)}var Ge=/^(none|table(?!-c[ea]).+)/,Ye={position:"absolute",visibility:"hidden",display:"block"},Qe={letterSpacing:"0",fontWeight:"400"};function Ke(e,t,n){var r=te.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function Je(e,t,n,r,i,o){var a="width"===t?1:0,s=0,u=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(u+=x.css(e,n+ne[a],!0,i)),r?("content"===n&&(u-=x.css(e,"padding"+ne[a],!0,i)),"margin"!==n&&(u-=x.css(e,"border"+ne[a]+"Width",!0,i))):(u+=x.css(e,"padding"+ne[a],!0,i),"padding"!==n?u+=x.css(e,"border"+ne[a]+"Width",!0,i):s+=x.css(e,"border"+ne[a]+"Width",!0,i));return!r&&o>=0&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))||0),u}function Ze(e,t,n){var r=Ie(e),i=(!d.boxSizingReliable()||n)&&"border-box"===x.css(e,"boxSizing",!1,r),o=i,a=ze(e,t,r),s="offset"+t[0].toUpperCase()+t.slice(1);if(Ne.test(a)){if(!n)return a;a="auto"}return(!d.boxSizingReliable()&&i||!d.reliableTrDimensions()&&_(e,"tr")||"auto"===a||!parseFloat(a)&&"inline"===x.css(e,"display",!1,r))&&e.getClientRects().length&&(i="border-box"===x.css(e,"boxSizing",!1,r),(o=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+Je(e,t,n||(i?"border":"content"),o,r,a)+"px"}function et(e,t,n,r,i){return new et.prototype.init(e,t,n,r,i)}x.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=ze(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=X(t),u=Re.test(t),f=e.style;if(u||(t=$e(s)),a=x.cssHooks[t]||x.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:f[t];"string"==(o=typeof n)&&(i=te.exec(n))&&i[1]&&(n=se(e,t,i),o="number"),null!=n&&n==n&&("number"!==o||u||(n+=i&&i[3]||(x.cssNumber[s]?"":"px")),d.clearCloneStyle||""!==n||0!==t.indexOf("background")||(f[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(u?f.setProperty(t,n):f[t]=n))}},css:function(e,t,n,r){var i,o,a,s=X(t);return Re.test(t)||(t=$e(s)),(a=x.cssHooks[t]||x.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=ze(e,t,r)),"normal"===i&&t in Qe&&(i=Qe[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),x.each(["height","width"],(function(e,t){x.cssHooks[t]={get:function(e,n,r){if(n)return!Ge.test(x.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?Ze(e,t,r):Fe(e,Ye,(function(){return Ze(e,t,r)}))},set:function(e,n,r){var i,o=Ie(e),a=!d.scrollboxSize()&&"absolute"===o.position,s=(a||r)&&"border-box"===x.css(e,"boxSizing",!1,o),u=r?Je(e,t,r,s,o):0;return s&&a&&(u-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(o[t])-Je(e,t,"border",!1,o)-.5)),u&&(i=te.exec(n))&&"px"!==(i[3]||"px")&&(e.style[t]=n,n=x.css(e,t)),Ke(0,n,u)}}})),x.cssHooks.marginLeft=We(d.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(ze(e,"marginLeft"))||e.getBoundingClientRect().left-Fe(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),x.each({margin:"",padding:"",border:"Width"},(function(e,t){x.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[e+ne[r]+t]=o[r]||o[r-2]||o[0];return i}},"margin"!==e&&(x.cssHooks[e+t].set=Ke)})),x.fn.extend({css:function(e,t){return z(this,(function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=Ie(e),i=t.length;a<i;a++)o[t[a]]=x.css(e,t[a],!1,r);return o}return void 0!==n?x.style(e,t,n):x.css(e,t)}),e,t,arguments.length>1)}}),x.Tween=et,et.prototype={constructor:et,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||x.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(x.cssNumber[n]?"":"px")},cur:function(){var e=et.propHooks[this.prop];return e&&e.get?e.get(this):et.propHooks._default.get(this)},run:function(e){var t,n=et.propHooks[this.prop];return this.options.duration?this.pos=t=x.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):et.propHooks._default.set(this),this}},et.prototype.init.prototype=et.prototype,et.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=x.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){x.fx.step[e.prop]?x.fx.step[e.prop](e):1!==e.elem.nodeType||!x.cssHooks[e.prop]&&null==e.elem.style[$e(e.prop)]?e.elem[e.prop]=e.now:x.style(e.elem,e.prop,e.now+e.unit)}}},et.propHooks.scrollTop=et.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},x.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},x.fx=et.prototype.init,x.fx.step={};var tt,nt,rt=/^(?:toggle|show|hide)$/,it=/queueHooks$/;function ot(){nt&&(!1===v.hidden&&t.requestAnimationFrame?t.requestAnimationFrame(ot):t.setTimeout(ot,x.fx.interval),x.fx.tick())}function at(){return t.setTimeout((function(){tt=void 0})),tt=Date.now()}function st(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=ne[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function ut(e,t,n){for(var r,i=(ft.tweeners[t]||[]).concat(ft.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function ft(e,t,n){var r,i,o=0,a=ft.prefilters.length,s=x.Deferred().always((function(){delete u.elem})),u=function(){if(i)return!1;for(var t=tt||at(),n=Math.max(0,f.startTime+f.duration-t),r=1-(n/f.duration||0),o=0,a=f.tweens.length;o<a;o++)f.tweens[o].run(r);return s.notifyWith(e,[f,r,n]),r<1&&a?n:(a||s.notifyWith(e,[f,1,0]),s.resolveWith(e,[f]),!1)},f=s.promise({elem:e,props:x.extend({},t),opts:x.extend(!0,{specialEasing:{},easing:x.easing._default},n),originalProperties:t,originalOptions:n,startTime:tt||at(),duration:n.duration,tweens:[],createTween:function(t,n){var r=x.Tween(e,f.opts,t,n,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(r),r},stop:function(t){var n=0,r=t?f.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)f.tweens[n].run(1);return t?(s.notifyWith(e,[f,1,0]),s.resolveWith(e,[f,t])):s.rejectWith(e,[f,t]),this}}),c=f.props;for(function(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=X(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=x.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(c,f.opts.specialEasing);o<a;o++)if(r=ft.prefilters[o].call(f,e,c,f.opts))return g(r.stop)&&(x._queueHooks(f.elem,f.opts.queue).stop=r.stop.bind(r)),r;return x.map(c,ut,f),g(f.opts.start)&&f.opts.start.call(e,f),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always),x.fx.timer(x.extend(u,{elem:e,anim:f,queue:f.opts.queue})),f}x.Animation=x.extend(ft,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return se(n.elem,e,te.exec(t),n),n}]},tweener:function(e,t){g(e)?(t=e,e=["*"]):e=e.match(B);for(var n,r=0,i=e.length;r<i;r++)n=e[r],ft.tweeners[n]=ft.tweeners[n]||[],ft.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,a,s,u,f,c,l="width"in t||"height"in t,h=this,p={},d=e.style,g=e.nodeType&&ae(e),m=Y.get(e,"fxshow");for(r in n.queue||(null==(a=x._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,h.always((function(){h.always((function(){a.unqueued--,x.queue(e,"fx").length||a.empty.fire()}))}))),t)if(i=t[r],rt.test(i)){if(delete t[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!m||void 0===m[r])continue;g=!0}p[r]=m&&m[r]||x.style(e,r)}if((u=!x.isEmptyObject(t))||!x.isEmptyObject(p))for(r in l&&1===e.nodeType&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],null==(f=m&&m.display)&&(f=Y.get(e,"display")),"none"===(c=x.css(e,"display"))&&(f?c=f:(ce([e],!0),f=e.style.display||f,c=x.css(e,"display"),ce([e]))),("inline"===c||"inline-block"===c&&null!=f)&&"none"===x.css(e,"float")&&(u||(h.done((function(){d.display=f})),null==f&&(c=d.display,f="none"===c?"":c)),d.display="inline-block")),n.overflow&&(d.overflow="hidden",h.always((function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]}))),u=!1,p)u||(m?"hidden"in m&&(g=m.hidden):m=Y.access(e,"fxshow",{display:f}),o&&(m.hidden=!g),g&&ce([e],!0),h.done((function(){for(r in g||ce([e]),Y.remove(e,"fxshow"),p)x.style(e,r,p[r])}))),u=ut(g?m[r]:0,r,h),r in m||(m[r]=u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?ft.prefilters.unshift(e):ft.prefilters.push(e)}}),x.speed=function(e,t,n){var r=e&&"object"==typeof e?x.extend({},e):{complete:n||!n&&t||g(e)&&e,duration:e,easing:n&&t||t&&!g(t)&&t};return x.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in x.fx.speeds?r.duration=x.fx.speeds[r.duration]:r.duration=x.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){g(r.old)&&r.old.call(this),r.queue&&x.dequeue(this,r.queue)},r},x.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ae).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=x.isEmptyObject(e),o=x.speed(t,n,r),a=function(){var t=ft(this,x.extend({},e),o);(i||Y.get(this,"finish"))&&t.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each((function(){var t=!0,i=null!=e&&e+"queueHooks",o=x.timers,a=Y.get(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&it.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));!t&&n||x.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,n=Y.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=x.timers,a=r?r.length:0;for(n.finish=!0,x.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<a;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish}))}}),x.each(["toggle","show","hide"],(function(e,t){var n=x.fn[t];x.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(st(t,!0),e,r,i)}})),x.each({slideDown:st("show"),slideUp:st("hide"),slideToggle:st("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){x.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}})),x.timers=[],x.fx.tick=function(){var e,t=0,n=x.timers;for(tt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||x.fx.stop(),tt=void 0},x.fx.timer=function(e){x.timers.push(e),x.fx.start()},x.fx.interval=13,x.fx.start=function(){nt||(nt=!0,ot())},x.fx.stop=function(){nt=null},x.fx.speeds={slow:600,fast:200,_default:400},x.fn.delay=function(e,n){return e=x.fx&&x.fx.speeds[e]||e,n=n||"fx",this.queue(n,(function(n,r){var i=t.setTimeout(n,e);r.stop=function(){t.clearTimeout(i)}}))},function(){var e=v.createElement("input"),t=v.createElement("select").appendChild(v.createElement("option"));e.type="checkbox",d.checkOn=""!==e.value,d.optSelected=t.selected,(e=v.createElement("input")).value="t",e.type="radio",d.radioValue="t"===e.value}();var ct,lt=x.expr.attrHandle;x.fn.extend({attr:function(e,t){return z(this,x.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){x.removeAttr(this,e)}))}}),x.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?x.prop(e,t,n):(1===o&&x.isXMLDoc(e)||(i=x.attrHooks[t.toLowerCase()]||(x.expr.match.bool.test(t)?ct:void 0)),void 0!==n?null===n?void x.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=x.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!d.radioValue&&"radio"===t&&_(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(B);if(i&&1===e.nodeType)for(;n=i[r++];)e.removeAttribute(n)}}),ct={set:function(e,t,n){return!1===t?x.removeAttr(e,n):e.setAttribute(n,n),n}},x.each(x.expr.match.bool.source.match(/\w+/g),(function(e,t){var n=lt[t]||x.find.attr;lt[t]=function(e,t,r){var i,o,a=t.toLowerCase();return r||(o=lt[a],lt[a]=i,i=null!=n(e,t,r)?a:null,lt[a]=o),i}}));var ht=/^(?:input|select|textarea|button)$/i,pt=/^(?:a|area)$/i;function dt(e){return(e.match(B)||[]).join(" ")}function gt(e){return e.getAttribute&&e.getAttribute("class")||""}function mt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(B)||[]}x.fn.extend({prop:function(e,t){return z(this,x.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[x.propFix[e]||e]}))}}),x.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&x.isXMLDoc(e)||(t=x.propFix[t]||t,i=x.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=x.find.attr(e,"tabindex");return t?parseInt(t,10):ht.test(e.nodeName)||pt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),d.optSelected||(x.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),x.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){x.propFix[this.toLowerCase()]=this})),x.fn.extend({addClass:function(e){var t,n,r,i,o,a;return g(e)?this.each((function(t){x(this).addClass(e.call(this,t,gt(this)))})):(t=mt(e)).length?this.each((function(){if(r=gt(this),n=1===this.nodeType&&" "+dt(r)+" "){for(o=0;o<t.length;o++)i=t[o],n.indexOf(" "+i+" ")<0&&(n+=i+" ");a=dt(n),r!==a&&this.setAttribute("class",a)}})):this},removeClass:function(e){var t,n,r,i,o,a;return g(e)?this.each((function(t){x(this).removeClass(e.call(this,t,gt(this)))})):arguments.length?(t=mt(e)).length?this.each((function(){if(r=gt(this),n=1===this.nodeType&&" "+dt(r)+" "){for(o=0;o<t.length;o++)for(i=t[o];n.indexOf(" "+i+" ")>-1;)n=n.replace(" "+i+" "," ");a=dt(n),r!==a&&this.setAttribute("class",a)}})):this:this.attr("class","")},toggleClass:function(e,t){var n,r,i,o,a=typeof e,s="string"===a||Array.isArray(e);return g(e)?this.each((function(n){x(this).toggleClass(e.call(this,n,gt(this),t),t)})):"boolean"==typeof t&&s?t?this.addClass(e):this.removeClass(e):(n=mt(e),this.each((function(){if(s)for(o=x(this),i=0;i<n.length;i++)r=n[i],o.hasClass(r)?o.removeClass(r):o.addClass(r);else void 0!==e&&"boolean"!==a||((r=gt(this))&&Y.set(this,"__className__",r),this.setAttribute&&this.setAttribute("class",r||!1===e?"":Y.get(this,"__className__")||""))})))},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+dt(gt(n))+" ").indexOf(t)>-1)return!0;return!1}});var vt=/\r/g;x.fn.extend({val:function(e){var t,n,r,i=this[0];return arguments.length?(r=g(e),this.each((function(n){var i;1===this.nodeType&&(null==(i=r?e.call(this,n,x(this).val()):e)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=x.map(i,(function(e){return null==e?"":e+""}))),(t=x.valHooks[this.type]||x.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))}))):i?(t=x.valHooks[i.type]||x.valHooks[i.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(vt,""):null==n?"":n:void 0}}),x.extend({valHooks:{option:{get:function(e){var t=x.find.attr(e,"value");return null!=t?t:dt(x.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!_(n.parentNode,"optgroup"))){if(t=x(n).val(),a)return t;s.push(t)}return s},set:function(e,t){for(var n,r,i=e.options,o=x.makeArray(t),a=i.length;a--;)((r=i[a]).selected=x.inArray(x.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),x.each(["radio","checkbox"],(function(){x.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=x.inArray(x(e).val(),t)>-1}},d.checkOn||(x.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})})),d.focusin="onfocusin"in t;var yt=/^(?:focusinfocus|focusoutblur)$/,bt=function(e){e.stopPropagation()};x.extend(x.event,{trigger:function(e,n,r,i){var o,a,s,u,f,c,h,p,d=[r||v],y=l.call(e,"type")?e.type:e,b=l.call(e,"namespace")?e.namespace.split("."):[];if(a=p=s=r=r||v,3!==r.nodeType&&8!==r.nodeType&&!yt.test(y+x.event.triggered)&&(y.indexOf(".")>-1&&(b=y.split("."),y=b.shift(),b.sort()),f=y.indexOf(":")<0&&"on"+y,(e=e[x.expando]?e:new x.Event(y,"object"==typeof e&&e)).isTrigger=i?2:3,e.namespace=b.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+b.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),n=null==n?[e]:x.makeArray(n,[e]),h=x.event.special[y]||{},i||!h.trigger||!1!==h.trigger.apply(r,n))){if(!i&&!h.noBubble&&!m(r)){for(u=h.delegateType||y,yt.test(u+y)||(a=a.parentNode);a;a=a.parentNode)d.push(a),s=a;s===(r.ownerDocument||v)&&d.push(s.defaultView||s.parentWindow||t)}for(o=0;(a=d[o++])&&!e.isPropagationStopped();)p=a,e.type=o>1?u:h.bindType||y,(c=(Y.get(a,"events")||Object.create(null))[e.type]&&Y.get(a,"handle"))&&c.apply(a,n),(c=f&&a[f])&&c.apply&&$(a)&&(e.result=c.apply(a,n),!1===e.result&&e.preventDefault());return e.type=y,i||e.isDefaultPrevented()||h._default&&!1!==h._default.apply(d.pop(),n)||!$(r)||f&&g(r[y])&&!m(r)&&((s=r[f])&&(r[f]=null),x.event.triggered=y,e.isPropagationStopped()&&p.addEventListener(y,bt),r[y](),e.isPropagationStopped()&&p.removeEventListener(y,bt),x.event.triggered=void 0,s&&(r[f]=s)),e.result}},simulate:function(e,t,n){var r=x.extend(new x.Event,n,{type:e,isSimulated:!0});x.event.trigger(r,null,t)}}),x.fn.extend({trigger:function(e,t){return this.each((function(){x.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var n=this[0];if(n)return x.event.trigger(e,t,n,!0)}}),d.focusin||x.each({focus:"focusin",blur:"focusout"},(function(e,t){var n=function(e){x.event.simulate(t,e.target,x.event.fix(e))};x.event.special[t]={setup:function(){var r=this.ownerDocument||this.document||this,i=Y.access(r,t);i||r.addEventListener(e,n,!0),Y.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this.document||this,i=Y.access(r,t)-1;i?Y.access(r,t,i):(r.removeEventListener(e,n,!0),Y.remove(r,t))}}}));var wt=t.location,xt={guid:Date.now()},At=/\?/;x.parseXML=function(n){var r,i;if(!n||"string"!=typeof n)return null;try{r=(new t.DOMParser).parseFromString(n,"text/xml")}catch(e){}return i=r&&r.getElementsByTagName("parsererror")[0],r&&!i||x.error("Invalid XML: "+(i?x.map(i.childNodes,(function(e){return e.textContent})).join("\n"):n)),r};var Et=/\[\]$/,Tt=/\r?\n/g,St=/^(?:submit|button|image|reset|file)$/i,kt=/^(?:input|select|textarea|keygen)/i;function _t(e,t,n,r){var i;if(Array.isArray(t))x.each(t,(function(t,i){n||Et.test(e)?r(e,i):_t(e+"["+("object"==typeof i&&null!=i?t:"")+"]",i,n,r)}));else if(n||"object"!==w(t))r(e,t);else for(i in t)_t(e+"["+i+"]",t[i],n,r)}x.param=function(e,t){var n,r=[],i=function(e,t){var n=g(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!x.isPlainObject(e))x.each(e,(function(){i(this.name,this.value)}));else for(n in e)_t(n,e[n],t,i);return r.join("&")},x.fn.extend({serialize:function(){return x.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=x.prop(this,"elements");return e?x.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!x(this).is(":disabled")&&kt.test(this.nodeName)&&!St.test(e)&&(this.checked||!pe.test(e))})).map((function(e,t){var n=x(this).val();return null==n?null:Array.isArray(n)?x.map(n,(function(e){return{name:t.name,value:e.replace(Tt,"\r\n")}})):{name:t.name,value:n.replace(Tt,"\r\n")}})).get()}});var Ct=/%20/g,jt=/#.*$/,Ot=/([?&])_=[^&]*/,Dt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Mt=/^(?:GET|HEAD)$/,Lt=/^\/\//,Pt={},Bt={},Nt="*/".concat("*"),Rt=v.createElement("a");function It(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(B)||[];if(g(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Ft(e,t,n,r){var i={},o=e===Bt;function a(s){var u;return i[s]=!0,x.each(e[s]||[],(function(e,s){var f=s(t,n,r);return"string"!=typeof f||o||i[f]?o?!(u=f):void 0:(t.dataTypes.unshift(f),a(f),!1)})),u}return a(t.dataTypes[0])||!i["*"]&&a("*")}function qt(e,t){var n,r,i=x.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&x.extend(!0,e,r),e}Rt.href=wt.href,x.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:wt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(wt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Nt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":x.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?qt(qt(e,x.ajaxSettings),t):qt(x.ajaxSettings,e)},ajaxPrefilter:It(Pt),ajaxTransport:It(Bt),ajax:function(n,r){"object"==typeof n&&(r=n,n=void 0),r=r||{};var i,o,a,s,u,f,c,l,h,p,d=x.ajaxSetup({},r),g=d.context||d,m=d.context&&(g.nodeType||g.jquery)?x(g):x.event,y=x.Deferred(),b=x.Callbacks("once memory"),w=d.statusCode||{},A={},E={},T="canceled",S={readyState:0,getResponseHeader:function(e){var t;if(c){if(!s)for(s={};t=Dt.exec(a);)s[t[1].toLowerCase()+" "]=(s[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=s[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return c?a:null},setRequestHeader:function(e,t){return null==c&&(e=E[e.toLowerCase()]=E[e.toLowerCase()]||e,A[e]=t),this},overrideMimeType:function(e){return null==c&&(d.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)S.always(e[S.status]);else for(t in e)w[t]=[w[t],e[t]];return this},abort:function(e){var t=e||T;return i&&i.abort(t),k(0,t),this}};if(y.promise(S),d.url=((n||d.url||wt.href)+"").replace(Lt,wt.protocol+"//"),d.type=r.method||r.type||d.method||d.type,d.dataTypes=(d.dataType||"*").toLowerCase().match(B)||[""],null==d.crossDomain){f=v.createElement("a");try{f.href=d.url,f.href=f.href,d.crossDomain=Rt.protocol+"//"+Rt.host!=f.protocol+"//"+f.host}catch(e){d.crossDomain=!0}}if(d.data&&d.processData&&"string"!=typeof d.data&&(d.data=x.param(d.data,d.traditional)),Ft(Pt,d,r,S),c)return S;for(h in(l=x.event&&d.global)&&0==x.active++&&x.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!Mt.test(d.type),o=d.url.replace(jt,""),d.hasContent?d.data&&d.processData&&0===(d.contentType||"").indexOf("application/x-www-form-urlencoded")&&(d.data=d.data.replace(Ct,"+")):(p=d.url.slice(o.length),d.data&&(d.processData||"string"==typeof d.data)&&(o+=(At.test(o)?"&":"?")+d.data,delete d.data),!1===d.cache&&(o=o.replace(Ot,"$1"),p=(At.test(o)?"&":"?")+"_="+xt.guid+++p),d.url=o+p),d.ifModified&&(x.lastModified[o]&&S.setRequestHeader("If-Modified-Since",x.lastModified[o]),x.etag[o]&&S.setRequestHeader("If-None-Match",x.etag[o])),(d.data&&d.hasContent&&!1!==d.contentType||r.contentType)&&S.setRequestHeader("Content-Type",d.contentType),S.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+Nt+"; q=0.01":""):d.accepts["*"]),d.headers)S.setRequestHeader(h,d.headers[h]);if(d.beforeSend&&(!1===d.beforeSend.call(g,S,d)||c))return S.abort();if(T="abort",b.add(d.complete),S.done(d.success),S.fail(d.error),i=Ft(Bt,d,r,S)){if(S.readyState=1,l&&m.trigger("ajaxSend",[S,d]),c)return S;d.async&&d.timeout>0&&(u=t.setTimeout((function(){S.abort("timeout")}),d.timeout));try{c=!1,i.send(A,k)}catch(e){if(c)throw e;k(-1,e)}}else k(-1,"No Transport");function k(n,r,s,f){var h,p,v,A,E,T=r;c||(c=!0,u&&t.clearTimeout(u),i=void 0,a=f||"",S.readyState=n>0?4:0,h=n>=200&&n<300||304===n,s&&(A=function(e,t,n){for(var r,i,o,a,s=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}(d,S,s)),!h&&x.inArray("script",d.dataTypes)>-1&&x.inArray("json",d.dataTypes)<0&&(d.converters["text script"]=function(){}),A=function(t,n,r,i){var o,a,s,u,f,c={},l=t.dataTypes.slice();if(l[1])for(s in t.converters)c[s.toLowerCase()]=t.converters[s];for(a=l.shift();a;)if(t.responseFields[a]&&(r[t.responseFields[a]]=n),!f&&i&&t.dataFilter&&(n=t.dataFilter(n,t.dataType)),f=a,a=l.shift())if("*"===a)a=f;else if("*"!==f&&f!==a){if(!(s=c[f+" "+a]||c["* "+a]))for(o in c)if((u=o.split(" "))[1]===a&&(s=c[f+" "+u[0]]||c["* "+u[0]])){!0===s?s=c[o]:!0!==c[o]&&(a=u[0],l.unshift(u[1]));break}if(!0!==s)if(s&&t.throws)n=s(n);else try{n=s(n)}catch(e){return{state:"parsererror",error:s?e:"No conversion from "+f+" to "+a}}}return{state:"success",data:n}}(d,A,S,h),h?(d.ifModified&&((E=S.getResponseHeader("Last-Modified"))&&(x.lastModified[o]=E),(E=S.getResponseHeader("etag"))&&(x.etag[o]=E)),204===n||"HEAD"===d.type?T="nocontent":304===n?T="notmodified":(T=A.state,p=A.data,h=!(v=A.error))):(v=T,!n&&T||(T="error",n<0&&(n=0))),S.status=n,S.statusText=(r||T)+"",h?y.resolveWith(g,[p,T,S]):y.rejectWith(g,[S,T,v]),S.statusCode(w),w=void 0,l&&m.trigger(h?"ajaxSuccess":"ajaxError",[S,d,h?p:v]),b.fireWith(g,[S,T]),l&&(m.trigger("ajaxComplete",[S,d]),--x.active||x.event.trigger("ajaxStop")))}return S},getJSON:function(e,t,n){return x.get(e,t,n,"json")},getScript:function(e,t){return x.get(e,void 0,t,"script")}}),x.each(["get","post"],(function(e,t){x[t]=function(e,n,r,i){return g(n)&&(i=i||r,r=n,n=void 0),x.ajax(x.extend({url:e,type:t,dataType:i,data:n,success:r},x.isPlainObject(e)&&e))}})),x.ajaxPrefilter((function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")})),x._evalUrl=function(e,t,n){return x.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){x.globalEval(e,t,n)}})},x.fn.extend({wrapAll:function(e){var t;return this[0]&&(g(e)&&(e=e.call(this[0])),t=x(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return g(e)?this.each((function(t){x(this).wrapInner(e.call(this,t))})):this.each((function(){var t=x(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)}))},wrap:function(e){var t=g(e);return this.each((function(n){x(this).wrapAll(t?e.call(this,n):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){x(this).replaceWith(this.childNodes)})),this}}),x.expr.pseudos.hidden=function(e){return!x.expr.pseudos.visible(e)},x.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},x.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch(e){}};var Ht={0:200,1223:204},zt=x.ajaxSettings.xhr();d.cors=!!zt&&"withCredentials"in zt,d.ajax=zt=!!zt,x.ajaxTransport((function(n){var r,i;if(d.cors||zt&&!n.crossDomain)return{send:function(o,a){var s,u=n.xhr();if(u.open(n.type,n.url,n.async,n.username,n.password),n.xhrFields)for(s in n.xhrFields)u[s]=n.xhrFields[s];for(s in n.mimeType&&u.overrideMimeType&&u.overrideMimeType(n.mimeType),n.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest"),o)u.setRequestHeader(s,o[s]);r=function(e){return function(){r&&(r=i=u.onload=u.onerror=u.onabort=u.ontimeout=u.onreadystatechange=null,"abort"===e?u.abort():"error"===e?"number"!=typeof u.status?a(0,"error"):a(u.status,u.statusText):a(Ht[u.status]||u.status,u.statusText,"text"!==(u.responseType||"text")||"string"!=typeof u.responseText?{binary:u.response}:{text:u.responseText},u.getAllResponseHeaders()))}},u.onload=r(),i=u.onerror=u.ontimeout=r("error"),void 0!==u.onabort?u.onabort=i:u.onreadystatechange=function(){4===u.readyState&&t.setTimeout((function(){r&&i()}))},r=r("abort");try{u.send(n.hasContent&&n.data||null)}catch(e){if(r)throw e}},abort:function(){r&&r()}}})),x.ajaxPrefilter((function(e){e.crossDomain&&(e.contents.script=!1)})),x.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return x.globalEval(e),e}}}),x.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),x.ajaxTransport("script",(function(e){var t,n;if(e.crossDomain||e.scriptAttrs)return{send:function(r,i){t=x("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),v.head.appendChild(t[0])},abort:function(){n&&n()}}}));var Wt,Ut=[],Vt=/(=)\?(?=&|$)|\?\?/;x.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Ut.pop()||x.expando+"_"+xt.guid++;return this[e]=!0,e}}),x.ajaxPrefilter("json jsonp",(function(e,n,r){var i,o,a,s=!1!==e.jsonp&&(Vt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Vt.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return i=e.jsonpCallback=g(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(Vt,"$1"+i):!1!==e.jsonp&&(e.url+=(At.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return a||x.error(i+" was not called"),a[0]},e.dataTypes[0]="json",o=t[i],t[i]=function(){a=arguments},r.always((function(){void 0===o?x(t).removeProp(i):t[i]=o,e[i]&&(e.jsonpCallback=n.jsonpCallback,Ut.push(i)),a&&g(o)&&o(a[0]),a=o=void 0})),"script"})),d.createHTMLDocument=((Wt=v.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Wt.childNodes.length),x.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(d.createHTMLDocument?((r=(t=v.implementation.createHTMLDocument("")).createElement("base")).href=v.location.href,t.head.appendChild(r)):t=v),o=!n&&[],(i=C.exec(e))?[t.createElement(i[1])]:(i=we([e],t,o),o&&o.length&&x(o).remove(),x.merge([],i.childNodes)));var r,i,o},x.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return s>-1&&(r=dt(e.slice(s)),e=e.slice(0,s)),g(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),a.length>0&&x.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done((function(e){o=arguments,a.html(r?x("<div>").append(x.parseHTML(e)).find(r):e)})).always(n&&function(e,t){a.each((function(){n.apply(this,o||[e.responseText,t,e])}))}),this},x.expr.pseudos.animated=function(e){return x.grep(x.timers,(function(t){return e===t.elem})).length},x.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,f=x.css(e,"position"),c=x(e),l={};"static"===f&&(e.style.position="relative"),s=c.offset(),o=x.css(e,"top"),u=x.css(e,"left"),("absolute"===f||"fixed"===f)&&(o+u).indexOf("auto")>-1?(a=(r=c.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),g(t)&&(t=t.call(e,n,x.extend({},s))),null!=t.top&&(l.top=t.top-s.top+a),null!=t.left&&(l.left=t.left-s.left+i),"using"in t?t.using.call(e,l):c.css(l)}},x.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){x.offset.setOffset(this,e,t)}));var t,n,r=this[0];return r?r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===x.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===x.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=x(e).offset()).top+=x.css(e,"borderTopWidth",!0),i.left+=x.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-x.css(r,"marginTop",!0),left:t.left-i.left-x.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===x.css(e,"position");)e=e.offsetParent;return e||re}))}}),x.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var n="pageYOffset"===t;x.fn[e]=function(r){return z(this,(function(e,r,i){var o;if(m(e)?o=e:9===e.nodeType&&(o=e.defaultView),void 0===i)return o?o[t]:e[r];o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):e[r]=i}),e,r,arguments.length)}})),x.each(["top","left"],(function(e,t){x.cssHooks[t]=We(d.pixelPosition,(function(e,n){if(n)return n=ze(e,t),Ne.test(n)?x(e).position()[t]+"px":n}))})),x.each({Height:"height",Width:"width"},(function(e,t){x.each({padding:"inner"+e,content:t,"":"outer"+e},(function(n,r){x.fn[r]=function(i,o){var a=arguments.length&&(n||"boolean"!=typeof i),s=n||(!0===i||!0===o?"margin":"border");return z(this,(function(t,n,i){var o;return m(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===i?x.css(t,n,s):x.style(t,n,i,s)}),t,a?i:void 0,a)}}))})),x.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){x.fn[t]=function(e){return this.on(t,e)}})),x.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),x.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){x.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}));var Xt=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;x.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),g(e))return r=o.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(o.call(arguments)))}).guid=e.guid=e.guid||x.guid++,i},x.holdReady=function(e){e?x.readyWait++:x.ready(!0)},x.isArray=Array.isArray,x.parseJSON=JSON.parse,x.nodeName=_,x.isFunction=g,x.isWindow=m,x.camelCase=X,x.type=w,x.now=Date.now,x.isNumeric=function(e){var t=x.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},x.trim=function(e){return null==e?"":(e+"").replace(Xt,"$1")},"function"==typeof define&&define.amd&&define("jquery",[],(function(){return x}));var $t=t.jQuery,Gt=t.$;return x.noConflict=function(e){return t.$===x&&(t.$=Gt),e&&t.jQuery===x&&(t.jQuery=$t),x},void 0===n&&(t.jQuery=t.$=x),x})),I=I.exports;var F=l(D),q=l(O),H=l(P);function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){(0,H.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var U,V,X,$=([{title:"1",file:"1.png"},{title:"2",file:"2.png"},{title:"3",file:"3.png"},{title:"4",file:"4.png"},{title:"5",file:"5.png"}].map((function(e,t){return W(W({},e),{},{image_id:t})})),function(){for(var e=window.location.search.substring(1).split("&"),t={},n=0;n<e.length;n++){var r=e[n].split("=");t[r[0]]=r[1]}return t}),G={fetchList:(V=(0,q.default)(F.default.mark((function e(t,n){var r,i,o,a,s,u;return F.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=$()).param=JSON.parse('"'.concat(r.param.replaceAll("%22",'\\"'),'"')),e.next=4,I.ajax({type:"POST",url:r.url,data:r.param,headers:{"Content-Type":"application/json"}});case 4:if(0!==(i=e.sent).code){e.next=12;break}for(o=[],a=0;a<150;a++)s=i.data[a%i.data.length],o.push({file:"".concat(1===s.fileType?r.ipfsGateway:r.upload).concat(s.logoURL),title:s.description});return u=o.slice(t,t+n).map((function(e,t){return W(W({},e),{},{image_id:t})})),e.abrupt("return",u);case 12:return alert("Sphere View load error"),e.abrupt("return",[]);case 14:case"end":return e.stop()}}),e)}))),function(e,t){return V.apply(this,arguments)}),fetchImage:(U=(0,q.default)(F.default.mark((function e(t,n){var r,i;return F.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.file,e.next=3,fetch(r).then((function(e){return e.blob()}));case 3:return i=e.sent,e.abrupt("return",{title:t.title,image:i});case 5:case"end":return e.stop()}}),e)}))),function(e,t){return U.apply(this,arguments)})},Y=document.createElement("canvas"),Q=Y.width=Y.height=1024,K=Y.getContext("2d");K.mozImageSmoothingEnabled=!1,K.webkitImageSmoothingEnabled=!1,K.font="32px Verdana",K.textBaseline="bottom",K.fillStyle="#aaa",X={init:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Q,r=[];!function e(t,n,r,i){var o,a,s,u=n,f=0,c=0,l=n.split(" ");for(a=s=l.length;t.measureText(u).width>r&&a>1;){a--,u=o="";for(var h=0;h<s;h++)h<a?(u+=l[h],h+1<a&&(u+=" ")):(o+=l[h],h+1<s&&(o+=" "))}return i.push(u),c=t.measureText(u).width,o&&(f=e(t,o,r,i))>c&&(c=f),c}(K,t,Math.min(n*Q,Q),r),K.clearRect(0,0,Y.width,Y.height);for(var i=0;i<r.length;i++)K.fillText(r[i],0,Y.height-32*(Math.max(r.length,3)-i));return e({data:Y,min:"mipmap",mipmap:"nice",flipY:!0})},draw:function(e){return e({frag:"\n            precision mediump float;\n            uniform sampler2D tex;\n            varying vec2 uv;\n        \n            void main () {\n                float c = texture2D(tex, uv).r;\n                gl_FragColor = vec4(0,0,0, c);\n            }",vert:"\n            precision highp float;\n            uniform mat4 proj, view, model;\n            uniform float yScale;\n            attribute vec2 pos;\n            varying vec2 uv;\n            void main () {\n                uv = pos;\n                vec4 mpos = model * vec4(pos, 0.001, 1);\n                mpos.y *= yScale;\n                gl_Position = proj * view * mpos;\n            }",attributes:{pos:[0,0,1,0,0,1,1,1,0,1,1,0]},uniforms:{model:e.prop("textmodel"),tex:e.prop("text")},count:6,blend:{enable:!0,func:{srcRGB:"src alpha",srcAlpha:"one minus src alpha",dstRGB:"one minus src alpha",dstAlpha:1},color:[0,0,0,0]}})}};var J=l(D),Z=l(P),ee=l(v),te=l(O);function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(n),!0).forEach((function(t){(0,Z.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ie={},oe=[],ae=document.createElement("canvas");ae.width=ae.height=2048;var se=ae.getContext("2d");se.mozImageSmoothingEnabled=!1,se.webkitImageSmoothingEnabled=!1;var ue=!1,fe=function(e){return[(oe.pop()||e.texture)([[[200,200,200]]]),function(t){return(oe.pop()||e.texture)([[[0,0,0,0]]])},1]};function ce(e,t,n){return le.apply(this,arguments)}function le(){return(le=(0,te.default)(J.default.mark((function e(t,n,r){var i,o,a;return J.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!1===ue&&(ue=t.hasExtension("EXT_texture_filter_anisotropic")?t._gl.getParameter(t._gl.getExtension("EXT_texture_filter_anisotropic").MAX_TEXTURE_MAX_ANISOTROPY_EXT):0,console.log(ue)),e.prev=1,e.next=4,G.fetchImage(n,(s=r,(!navigator.connection||navigator.connection.downlink<2)&&(s="high"==s?"mid":"low"),s));case 4:return a=e.sent,o=a.title,e.next=8,createImageBitmap(a.image);case 8:i=e.sent,se.drawImage(i,0,0,ae.width,ae.height),e.next=23;break;case 12:if(e.prev=12,e.t0=e.catch(1),console.error(e.t0),"high"!=r){e.next=21;break}return e.next=18,ce(t,n,"low");case 18:e.t1=e.sent,e.next=22;break;case 21:e.t1=fe(t);case 22:return e.abrupt("return",e.t1);case 23:return e.abrupt("return",[(oe.pop()||t.texture)({data:ae,min:"mipmap",mipmap:"nice",aniso:ue,flipY:!0}),function(e){return X.init(oe.pop()||t.texture,o,e)},i.width/i.height]);case 24:case"end":return e.stop()}var s}),e,null,[[1,12]])})))).apply(this,arguments)}var he=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"low",r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,o=Object.keys(ie).length;G.fetchList(o,t).then((function(o){t=o.length,o.map((function(o){ie[o.image_id]?0==--t&&i():(ie[o.image_id]=o,ce(e,o,n).then((function(e){var n=(0,ee.default)(e,3),a=n[0],s=n[1],u=n[2];r(re(re({},o),{},{tex:a,textGen:s,aspect:u})),0==--t&&i()})))}))}))},pe=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"low";t.tex||t.loading||(t.loading=!0,ce(e,t,n).then((function(e){var n=(0,ee.default)(e,2),r=n[0],i=n[1];t.loading=!1,t.tex=r,t.text=i})))},de=function(e){e.tex&&(oe.push(e.tex),e.tex=void 0),e.text&&(oe.push(e.text),e.text=void 0)},ge=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},me=ge,ve=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],f=t[7],c=t[8],l=t[9],h=t[10],p=t[11],d=t[12],g=t[13],m=t[14],v=t[15],y=n*s-r*a,b=n*u-i*a,w=n*f-o*a,x=r*u-i*s,A=r*f-o*s,E=i*f-o*u,T=c*g-l*d,S=c*m-h*d,k=c*v-p*d,_=l*m-h*g,C=l*v-p*g,j=h*v-p*m,O=y*j-b*C+w*_+x*k-A*S+E*T;return O?(O=1/O,e[0]=(s*j-u*C+f*_)*O,e[1]=(i*C-r*j-o*_)*O,e[2]=(g*E-m*A+v*x)*O,e[3]=(h*A-l*E-p*x)*O,e[4]=(u*k-a*j-f*S)*O,e[5]=(n*j-i*k+o*S)*O,e[6]=(m*w-d*E-v*b)*O,e[7]=(c*E-h*w+p*b)*O,e[8]=(a*C-s*k+f*T)*O,e[9]=(r*k-n*C-o*T)*O,e[10]=(d*A-g*w+v*y)*O,e[11]=(l*w-c*A-p*y)*O,e[12]=(s*S-a*_-u*T)*O,e[13]=(n*_-r*S+i*T)*O,e[14]=(g*b-d*x-m*y)*O,e[15]=(c*x-l*b+h*y)*O,e):null},ye=function(e,t,n){var r,i,o,a,s,u,f,c,l,h,p,d,g=n[0],m=n[1],v=n[2];return t===e?(e[12]=t[0]*g+t[4]*m+t[8]*v+t[12],e[13]=t[1]*g+t[5]*m+t[9]*v+t[13],e[14]=t[2]*g+t[6]*m+t[10]*v+t[14],e[15]=t[3]*g+t[7]*m+t[11]*v+t[15]):(r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],f=t[6],c=t[7],l=t[8],h=t[9],p=t[10],d=t[11],e[0]=r,e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=u,e[6]=f,e[7]=c,e[8]=l,e[9]=h,e[10]=p,e[11]=d,e[12]=r*g+s*m+l*v+t[12],e[13]=i*g+u*m+h*v+t[13],e[14]=o*g+f*m+p*v+t[14],e[15]=a*g+c*m+d*v+t[15]),e},be=function(e,t,n){var r=n[0],i=n[1],o=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},we=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[4],a=t[5],s=t[6],u=t[7],f=t[8],c=t[9],l=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+f*r,e[5]=a*i+c*r,e[6]=s*i+l*r,e[7]=u*i+h*r,e[8]=f*i-o*r,e[9]=c*i-a*r,e[10]=l*i-s*r,e[11]=h*i-u*r,e},xe=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],a=t[1],s=t[2],u=t[3],f=t[8],c=t[9],l=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i-f*r,e[1]=a*i-c*r,e[2]=s*i-l*r,e[3]=u*i-h*r,e[8]=o*r+f*i,e[9]=a*r+c*i,e[10]=s*r+l*i,e[11]=u*r+h*i,e},Ae=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e},Ee=function(e,t,n,r,i){var o=1/Math.tan(t/2),a=1/(r-i);return e[0]=o/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(i+r)*a,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*i*r*a,e[15]=0,e},Te=l(P);function Se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(n),!0).forEach((function(t){(0,Te.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _e,Ce,je=Math.PI/32,Oe="high",De=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e},Me=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(n*n+r*r+i*i)},Le=function(e){var t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)},Pe=function(e,t){var n=t[0],r=t[1],i=t[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o),e},Be=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},Ne=((Ce=new Float32Array(3))[0]=0,Ce[1]=0,Ce[2]=0,{copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},set:function(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e},add:function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e},sub:De,scale:function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e},dist:Me,len:Le,normalize:Pe,dot:Be,transformMat4:function(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return a=a||1,e[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/a,e[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,e[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,e},rotateX:function(e,t,n,r){var i=n[1],o=n[2],a=t[1]-i,s=t[2]-o,u=Math.sin(r),f=Math.cos(r);return e[0]=t[0],e[1]=i+a*f-s*u,e[2]=o+a*u+s*f,e},rotateY:function(e,t,n,r){var i=n[0],o=n[2],a=t[0]-i,s=t[2]-o,u=Math.sin(r),f=Math.cos(r);return e[0]=i+s*u+a*f,e[1]=t[1],e[2]=o+s*f-a*u,e}}),Re={},Ie=Object.create||function(e){var t=function(){};return t.prototype=e,new t},Fe=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return n},qe=Function.prototype.bind||function(e){var t=this;return function(){return t.apply(e,arguments)}};function He(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=Ie(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}Re=He,He.EventEmitter=He,He.prototype._events=void 0,He.prototype._maxListeners=void 0;var ze,We=10;try{var Ue={};Object.defineProperty&&Object.defineProperty(Ue,"x",{value:0}),ze=0===Ue.x}catch(Ln){ze=!1}function Ve(e){return void 0===e._maxListeners?He.defaultMaxListeners:e._maxListeners}function Xe(e,t,n,r){var i,o,a;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((o=e._events)?(o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),a=o[t]):(o=e._events=Ie(null),e._eventsCount=0),a){if("function"==typeof a?a=o[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),!a.warned&&(i=Ve(e))&&i>0&&a.length>i){a.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+a.length+' "'+String(t)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');s.name="MaxListenersExceededWarning",s.emitter=e,s.type=t,s.count=a.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",s.name,s.message)}}else a=o[t]=n,++e._eventsCount;return e}function $e(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e)}}function Ge(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=qe.call($e,r);return i.listener=n,r.wrapFn=i,i}function Ye(e,t,n){var r=e._events;if(!r)return[];var i=r[t];return i?"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):Ke(i,i.length):[]}function Qe(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function Ke(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}ze?Object.defineProperty(He,"defaultMaxListeners",{enumerable:!0,get:function(){return We},set:function(e){if("number"!=typeof e||e<0||e!=e)throw new TypeError('"defaultMaxListeners" must be a positive number');We=e}}):He.defaultMaxListeners=We,He.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},He.prototype.getMaxListeners=function(){return Ve(this)},He.prototype.emit=function(e){var t,n,r,i,o,a,s="error"===e;if(a=this._events)s=s&&null==a.error;else if(!s)return!1;if(s){if(arguments.length>1&&(t=arguments[1]),t instanceof Error)throw t;var u=new Error('Unhandled "error" event. ('+t+")");throw u.context=t,u}if(!(n=a[e]))return!1;var f="function"==typeof n;switch(r=arguments.length){case 1:!function(e,t,n){if(t)e.call(n);else for(var r=e.length,i=Ke(e,r),o=0;o<r;++o)i[o].call(n)}(n,f,this);break;case 2:!function(e,t,n,r){if(t)e.call(n,r);else for(var i=e.length,o=Ke(e,i),a=0;a<i;++a)o[a].call(n,r)}(n,f,this,arguments[1]);break;case 3:!function(e,t,n,r,i){if(t)e.call(n,r,i);else for(var o=e.length,a=Ke(e,o),s=0;s<o;++s)a[s].call(n,r,i)}(n,f,this,arguments[1],arguments[2]);break;case 4:!function(e,t,n,r,i,o){if(t)e.call(n,r,i,o);else for(var a=e.length,s=Ke(e,a),u=0;u<a;++u)s[u].call(n,r,i,o)}(n,f,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(r-1),o=1;o<r;o++)i[o-1]=arguments[o];!function(e,t,n,r){if(t)e.apply(n,r);else for(var i=e.length,o=Ke(e,i),a=0;a<i;++a)o[a].apply(n,r)}(n,f,this,i)}return!0},He.prototype.addListener=function(e,t){return Xe(this,e,t,!1)},He.prototype.on=He.prototype.addListener,He.prototype.prependListener=function(e,t){return Xe(this,e,t,!0)},He.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,Ge(this,e,t)),this},He.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,Ge(this,e,t)),this},He.prototype.removeListener=function(e,t){var n,r,i,o,a;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Ie(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),r.removeListener&&this.emit("removeListener",e,a||t)}return this},He.prototype.removeAllListeners=function(e){var t,n,r;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=Ie(null),this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=Ie(null):delete n[e]),this;if(0===arguments.length){var i,o=Fe(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Ie(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},He.prototype.listeners=function(e){return Ye(this,e,!0)},He.prototype.rawListeners=function(e){return Ye(this,e,!1)},He.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):Qe.call(e,t)},He.prototype.listenerCount=Qe,He.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var Je={};Je="function"==typeof Object.create?function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}};var Ze,et,tt={},nt=tt={};function rt(){throw new Error("setTimeout has not been defined")}function it(){throw new Error("clearTimeout has not been defined")}function ot(t){if(Ze===setTimeout)return setTimeout(t,0);if((Ze===rt||!Ze)&&setTimeout)return Ze=setTimeout,setTimeout(t,0);try{return Ze(t,0)}catch(e){try{return Ze.call(null,t,0)}catch(e){return Ze.call(this,t,0)}}}!function(){try{Ze="function"==typeof setTimeout?setTimeout:rt}catch(e){Ze=rt}try{et="function"==typeof clearTimeout?clearTimeout:it}catch(e){et=it}}();var at,st=[],ut=!1,ft=-1;function ct(){ut&&at&&(ut=!1,at.length?st=at.concat(st):ft=-1,st.length&&lt())}function lt(){if(!ut){var t=ot(ct);ut=!0;for(var n=st.length;n;){for(at=st,st=[];++ft<n;)at&&at[ft].run();ft=-1,n=st.length}at=null,ut=!1,function(t){if(et===clearTimeout)return clearTimeout(t);if((et===it||!et)&&clearTimeout)return et=clearTimeout,clearTimeout(t);try{et(t)}catch(e){try{return et.call(null,t)}catch(e){return et.call(this,t)}}}(t)}}function ht(e,t){this.fun=e,this.array=t}function pt(){}nt.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];st.push(new ht(e,t)),1!==st.length||ut||ot(lt)},ht.prototype.run=function(){this.fun.apply(null,this.array)},nt.title="browser",nt.browser=!0,nt.env={},nt.argv=[],nt.version="",nt.versions={},nt.on=pt,nt.addListener=pt,nt.once=pt,nt.off=pt,nt.removeListener=pt,nt.removeAllListeners=pt,nt.emit=pt,nt.prependListener=pt,nt.prependOnceListener=pt,nt.listeners=function(e){return[]},nt.binding=function(e){throw new Error("process.binding is not supported")},nt.cwd=function(){return"/"},nt.chdir=function(e){throw new Error("process.chdir is not supported")},nt.umask=function(){return 0};var dt={};(function(e){(function(){"use strict";dt=void 0===e||!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?{nextTick:function(t,n,r,i){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o,a,s=arguments.length;switch(s){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick((function(){t.call(null,n)}));case 3:return e.nextTick((function(){t.call(null,n,r)}));case 4:return e.nextTick((function(){t.call(null,n,r,i)}));default:for(o=new Array(s-1),a=0;a<o.length;)o[a++]=arguments[a];return e.nextTick((function(){t.apply(null,o)}))}}}:e}).call(this)}).call(this,tt);for(var gt={}.toString,mt=Array.isArray||function(e){return"[object Array]"==gt.call(e)},vt=Re.EventEmitter,yt={toByteArray:function(e){var t,n,r=St(e),i=r[0],o=r[1],a=new xt(function(e,t,n){return 3*(t+n)/4-n}(0,i,o)),s=0,u=o>0?i-4:i;for(n=0;n<u;n+=4)t=wt[e.charCodeAt(n)]<<18|wt[e.charCodeAt(n+1)]<<12|wt[e.charCodeAt(n+2)]<<6|wt[e.charCodeAt(n+3)],a[s++]=t>>16&255,a[s++]=t>>8&255,a[s++]=255&t;return 2===o&&(t=wt[e.charCodeAt(n)]<<2|wt[e.charCodeAt(n+1)]>>4,a[s++]=255&t),1===o&&(t=wt[e.charCodeAt(n)]<<10|wt[e.charCodeAt(n+1)]<<4|wt[e.charCodeAt(n+2)]>>2,a[s++]=t>>8&255,a[s++]=255&t),a},fromByteArray:function(e){for(var t,n=e.length,r=n%3,i=[],o=0,a=n-r;o<a;o+=16383)i.push(kt(e,o,o+16383>a?a:o+16383));return 1===r?(t=e[n-1],i.push(bt[t>>2]+bt[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],i.push(bt[t>>10]+bt[t>>4&63]+bt[t<<2&63]+"=")),i.join("")}},bt=[],wt=[],xt="undefined"!=typeof Uint8Array?Uint8Array:Array,At="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Et=0,Tt=At.length;Et<Tt;++Et)bt[Et]=At[Et],wt[At.charCodeAt(Et)]=Et;function St(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function kt(e,t,n){for(var r,i,o=[],a=t;a<n;a+=3)r=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),o.push(bt[(i=r)>>18&63]+bt[i>>12&63]+bt[i>>6&63]+bt[63&i]);return o.join("")}wt["-".charCodeAt(0)]=62,wt["_".charCodeAt(0)]=63;var _t={read:function(e,t,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,f=u>>1,c=-7,l=n?i-1:0,h=n?-1:1,p=e[t+l];for(l+=h,o=p&(1<<-c)-1,p>>=-c,c+=s;c>0;o=256*o+e[t+l],l+=h,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+e[t+l],l+=h,c-=8);if(0===o)o=1-f;else{if(o===u)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),o-=f}return(p?-1:1)*a*Math.pow(2,o-r)},write:function(e,t,n,r,i,o){var a,s,u,f=8*o-i-1,c=(1<<f)-1,l=c>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),(t+=a+l>=1?h/u:h*Math.pow(2,1-l))*u>=2&&(a++,u/=2),a+l>=c?(s=0,a=c):a+l>=1?(s=(t*u-1)*Math.pow(2,i),a+=l):(s=t*Math.pow(2,l-1)*Math.pow(2,i),a=0));i>=8;e[n+p]=255&s,p+=d,s/=256,i-=8);for(a=a<<i|s,f+=i;f>0;e[n+p]=255&a,p+=d,a/=256,f-=8);e[n+p-d]|=128*g}},Ct={},jt=s({}),Ot=jt.Buffer;function Dt(e,t){for(var n in e)t[n]=e[n]}function Mt(e,t,n){return Ot(e,t,n)}function Lt(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}Ot.from&&Ot.alloc&&Ot.allocUnsafe&&Ot.allocUnsafeSlow?Ct=jt:(Dt(jt,Ct),Ct.Buffer=Mt),Dt(Ot,Mt),Mt.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return Ot(e,t,n)},Mt.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=Ot(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},Mt.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return Ot(e)},Mt.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return jt.SlowBuffer(e)};var Pt={};(function(e){(function(){function t(e){return Object.prototype.toString.call(e)}Pt.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===t(e)},Pt.isBoolean=function(e){return"boolean"==typeof e},Pt.isNull=function(e){return null===e},Pt.isNullOrUndefined=function(e){return null==e},Pt.isNumber=function(e){return"number"==typeof e},Pt.isString=function(e){return"string"==typeof e},Pt.isSymbol=function(e){return"symbol"==typeof e},Pt.isUndefined=function(e){return void 0===e},Pt.isRegExp=function(e){return"[object RegExp]"===t(e)},Pt.isObject=function(e){return"object"==typeof e&&null!==e},Pt.isDate=function(e){return"[object Date]"===t(e)},Pt.isError=function(e){return"[object Error]"===t(e)||e instanceof Error},Pt.isFunction=function(e){return"function"==typeof e},Pt.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},Pt.isBuffer=e.isBuffer}).call(this)}).call(this,{isBuffer:function(e){return null!=e&&(Lt(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&Lt(e.slice(0,0))}(e)||!!e._isBuffer)}});var Bt={},Nt={},Rt=Ct.Buffer;function It(e,t){e.emit("error",t)}Nt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return Rt.alloc(0);if(1===this.length)return this.head.data;for(var t,n,r=Rt.allocUnsafe(e>>>0),i=this.head,o=0;i;)t=r,n=o,i.data.copy(t,n),o+=i.data.length,i=i.next;return r},e}(),Bt&&Bt.inspect&&Bt.inspect.custom&&(Nt.prototype[Bt.inspect.custom]=function(){var e=Bt.inspect({length:this.length});return this.constructor.name+" "+e});var Ft={destroy:function(e,t){var n=this,r=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return r||i?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||dt.nextTick(It,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?(dt.nextTick(It,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}},qt={};(function(e){(function(){function t(t){try{if(!e.localStorage)return!1}catch(r){return!1}var n=e.localStorage[t];return null!=n&&"true"===String(n).toLowerCase()}qt=function(e,n){if(t("noDeprecation"))return e;var r=!1;return function(){if(!r){if(t("throwDeprecation"))throw new Error(n);t("traceDeprecation")?console.trace(n):console.warn(n),r=!0}return e.apply(this,arguments)}}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var Ht=Vt,zt=i({}),Wt=Object.create(Pt);function Ut(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function Vt(e){if(!(this instanceof Vt))return new Vt(e);zt.call(this,e),this._transformState={afterTransform:Ut.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",Xt)}function Xt(){var e=this;"function"==typeof this._flush?this._flush((function(t,n){$t(e,t,n)})):$t(this,null,null)}function $t(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}Wt.inherits=Je,Wt.inherits(Vt,zt),Vt.prototype.push=function(e,t){return this._transformState.needTransform=!1,zt.prototype.push.call(this,e,t)},Vt.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},Vt.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},Vt.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},Vt.prototype._destroy=function(e,t){var n=this;zt.prototype._destroy.call(this,e,(function(e){t(e),n.emit("close")}))};var Gt=Qt,Yt=Object.create(Pt);function Qt(e){if(!(this instanceof Qt))return new Qt(e);Ht.call(this,e)}Yt.inherits=Je,Yt.inherits(Qt,Ht),Qt.prototype._transform=function(e,t,n){n(null,e)};var Kt={};(Kt=Kt=n({})).Stream=Kt,Kt.Readable=Kt,Kt.Writable=o({}),Kt.Duplex=i({}),Kt.Transform=Ht,Kt.PassThrough=Gt;var Jt=o({}),Zt=i({}),en=Kt.Transform,tn=Kt.PassThrough,nn=on,rn=Re.EventEmitter;function on(){rn.call(this)}Je(on,rn),on.Readable=Kt,on.Writable=Jt,on.Duplex=Zt,on.Transform=en,on.PassThrough=tn,on.Stream=on,on.prototype.pipe=function(e,t){var n=this;function r(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function i(){n.readable&&n.resume&&n.resume()}n.on("data",r),e.on("drain",i),e._isStdio||t&&!1===t.end||(n.on("end",a),n.on("close",s));var o=!1;function a(){o||(o=!0,e.end())}function s(){o||(o=!0,"function"==typeof e.destroy&&e.destroy())}function u(e){if(f(),0===rn.listenerCount(this,"error"))throw e}function f(){n.removeListener("data",r),e.removeListener("drain",i),n.removeListener("end",a),n.removeListener("close",s),n.removeListener("error",u),e.removeListener("error",u),n.removeListener("end",f),n.removeListener("close",f),e.removeListener("close",f)}return n.on("error",u),e.on("error",u),n.on("end",f),n.on("close",f),e.on("close",f),e.emit("pipe",n),e};var an={};an=fn,fn.available=function(){return!!cn(document.body)};var sn=Re.EventEmitter,un=nn.Stream;function fn(e){var t,n,r,i=e.addEventListener||e.attachEvent,o=e.removeEventListener||e.detachEvent,a=e.ownerDocument,s=a.body,u=cn(e),f={dx:0,dy:0,dt:0},c=new sn,l=null,h=!1;i.call(e,"mousedown",m,!1),i.call(e,"mouseup",v,!1),i.call(s,"mousemove",x,!1);for(var p=["","webkit","moz","ms","o"],d=0,g=p.length;d<g;++d)i.call(a,p[d]+"pointerlockchange",y),i.call(a,p[d]+"pointerlockerror",b);return c.release=w,c.target=A,c.request=m,c.destroy=function(){o.call(e,"mouseup",v,!1),o.call(e,"mousedown",m,!1),o.call(e,"mousemove",x,!1)},cn||setTimeout((function(){c.emit("error",new Error("pointer lock is not supported"))}),0),c;function m(t){A()||(r=+new Date,u.call(e))}function v(e){h&&(c.emit("needs-fullscreen"),h=!1)}function y(e){A()?((l=new un).readable=!0,l.initial={x:t,y:n,t:Date.now()},c.emit("attain",l)):l&&w()}function b(e){+new Date-r<100?h=!0:(c.emit("error"),l&&l.emit("error",e),l=null)}function w(){c.emit("release"),l&&(l.emit("end"),l.readable=!1,l.emit("close"),l=null),A()&&(a.exitPointerLock||a.mozExitPointerLock||a.webkitExitPointerLock||a.msExitPointerLock||a.oExitPointerLock).call(a)}function x(e){t=e.pageX,n=e.pageY,l&&(f.dx=e.movementX||e.webkitMovementX||e.mozMovementX||e.msMovementX||e.oMovementX||0,f.dy=e.movementY||e.webkitMovementY||e.mozMovementY||e.msMovementY||e.oMovementY||0,f.dt=Date.now()-l.initial.t,c.emit("data",f),l.emit("data",f))}function A(){return a.pointerLockElement||a.mozPointerLockElement||a.webkitPointerLockElement||a.msPointerLockElement||a.oPointerLockElement||null}}function cn(e){return e.requestPointerLock||e.webkitRequestPointerLock||e.mozRequestPointerLock||e.msRequestPointerLock||e.oRequestPointerLock||null}var ln=l(v),hn=l(x);function pn(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return dn(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dn(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function dn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var gn=Math.PI/4,mn=Math.PI/6,vn=function(e,t,n,r,i){var o=Ne.sub(r,e,t),a=Ne.sub(i,n,t),s=Math.max(Math.min(Ne.dot(o,a)/Ne.dot(a,a),1),0);return Ne.dist(o,Ne.scale(a,a,s))},yn=function(e,t,n){var r=-(Ne.dot(e,n)-n[3])/Ne.dot(t,n),i=Ne.scale([],t,r);return Ne.add(i,i,e),{dist:r,intersection:i}},bn=function(e,t,n){return(1-e)*t+e*n},wn=!0,xn=function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},An=function(){return xn(window.innerWidth/window.innerHeight,16/9,9/16,1.7,Math.PI/3)};navigator.userAgent.match(/(iPad)|(iPhone)|(iPod)|(android)|(webOS)/i)&&(wn=!1,An=function(){return xn(window.innerWidth/window.innerHeight,16/9,9/16,1.5,Math.PI/3)});var En,Tn,Sn,kn,_n,Cn,jn=new u;jn.showPanel(0),En=c({extensions:["OES_element_index_uint","OES_standard_derivatives"],optionalExtensions:["EXT_texture_filter_anisotropic"],attributes:{alpha:!1}}),Tn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.25,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:7,o=t*Math.pow(2,e),a=S(e+1,n,r).map((function(e){return[e[0]*o,e[1]*o]}));console.time("gen mesh");var s=a.slice(0,-1).map((function(e,t){return[e,a[t+1]]})),u=s.map((function(e){var t=(0,A.default)(e,2),n=(0,A.default)(t[0],2),r=n[0],i=n[1],o=(0,A.default)(t[1],2),a=o[0],s=o[1];return[Math.sign(i-s),0,Math.sign(a-r)]})).flatMap((function(e){return Array(4).fill(e)})),f=s.flat().flatMap((function(e){var t=(0,A.default)(e,2),n=t[0],r=t[1];return[[n,0,r],[n,i,r]]})),c=_(s,e,t),l=c.getAreaIndex,h=c.getGridSegments,p=c.getGridParts,d=c.placements;u.push([0,-1,0],[0,-1,0],[0,-1,0],[0,-1,0],[0,1,0],[0,1,0],[0,1,0],[0,1,0]),f.push([0,i,0],[0,i,o],[o,i,0],[o,i,o],[0,0,0],[o,0,0],[0,0,o],[o,0,o]);var g=Array(f.length/4).fill().flatMap((function(e,t){return[4*t,4*t+2,4*t+1,4*t+1,4*t+2,4*t+3]}));return console.timeEnd("gen mesh"),console.log(d.length+" available painting placements"),{placements:d,getAreaIndex:l,getGridSegments:h,getGridParts:p,position:f,normal:u,elements:g}}(),Sn=function(e,t,n){var r=e.texture(),i=e.texture();return R(r,"res/wall.jpg"),R(i,"res/floor.jpg"),e({frag:"\n        precision lowp float;\n        varying vec3 v_pos, v_relativepos, v_normal;\n        uniform sampler2D wallTexture;\n        uniform sampler2D floorTexture;\n\n        vec3 hue2rgb(float h) {\n            vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n            vec3 p = abs(fract(vec3(h) + K.xyz) * 6.0 - K.www);\n            return mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), 0.08);\n        }\n\n        void main() {\n            vec3 totalLight = texture2D(wallTexture, vec2(v_pos.x + v_pos.z, 7.0-v_pos.y)/8.0).rgb;\n            float dist = length(v_relativepos);\n            totalLight = mix(totalLight, vec3(90.0,92.0,95.0)/255.0, step(6.99, v_pos.y));\n            totalLight *= mix(0.7, 1.0, smoothstep(0.1, 0.12, v_pos.y));\n            totalLight *= abs(v_normal.x)/64.0 + 1.0;\n            if(v_normal.y > 0.0) {\n                totalLight = 0.47+0.1*texture2D(floorTexture, v_pos.xz / 8.0).rgb;\n            }\n            totalLight *= (0.5 + 0.5*hue2rgb(0.5 + (v_pos.x + v_pos.z) / 160.0)); //color variation\n            float alpha = .98+smoothstep(150.,0.,dist)-v_normal.y; // reflexion\n            gl_FragColor = vec4(totalLight, ".concat(n?"alpha":"1.0",");\n        }"),vert:"\n        precision highp float;\n        uniform mat4 proj, view;\n        attribute vec3 position, normal;\n        varying vec3 v_pos, v_relativepos, v_normal;\n        uniform float yScale;\n        void main() {\n            vec3 pos = position;\n            v_pos = pos;\n            v_relativepos = (view * vec4(pos, 1)).xyz;\n            pos.y *= yScale;\n            v_normal = normal;\n            gl_Position = proj * view * vec4(pos, 1);\n        }",attributes:{position:t.position,normal:t.normal},blend:n?{enable:!0,func:{src:"src alpha",dst:"one minus src alpha"}}:{},uniforms:{wallTexture:r,floorTexture:i},elements:new Uint32Array(t.elements)})}(En,Tn,wn),kn=function(e,t){var n=t.placements,r=t.getAreaIndex,i=[],o=[],a=!0,s=function(e){var t=n[i.length],r=[t[1][0]-t[0][0],t[1][1]-t[0][1]],o=[t[1][1]-t[0][1],t[0][0]-t[1][0]],a=Math.hypot(r[0],r[1]),s=4.5/(3+e.aspect);s=Math.min(s,a/e.aspect/2.2),s=Math.min(s,2/1.2);var u=[(t[0][0]+t[1][0])/2,2.1-s,(t[0][1]+t[1][1])/2],f=Math.atan2(r[1],r[0]),c=Math.abs(f%3)<1?1:0,l=1-c,h=[2*s*e.aspect*c+.1*l,2*s,2*s*e.aspect*l+.1*c],p=e.textGen(s*e.aspect),d=s*e.aspect/a,g=.005/Math.hypot(o[0],o[1]),m=[[u[0]-r[0]*d*2,u[2]-r[1]*d],[u[0]+r[0]*d*2,u[2]+r[1]*d]];u[0]-=r[0]*d+o[0]*g,u[2]-=r[1]*d+o[1]*g;var v=[];Ae(v,u),be(v,v,h),xe(v,v,-f);var y=[];Ae(y,[u[0],1.7-s,u[2]]),be(y,y,[2,2,2]),xe(y,y,-f),i.push(ke(ke({},e),{},{vseg:m,angle:f,model:v,textmodel:y,text:p,textGen:null}))};return he(e,20,Oe,s,(function(){return a=!1})),{update:function(t,n,u){var f=r(t[0],t[2],4);-1!==f&&(i.slice(0,Math.max(0,f-40)).map((function(e){return de(e)})),i.slice(f+40).map((function(e){return de(e)})),(o=i.slice(Math.max(0,f-20),f+20)).map((function(t){return pe(e,t,Oe)})),o=o.filter((function(e){return e.tex&&function(e,t,n,r){for(var i=r.vseg,o=r.angle,a=i[0][0]-e[0],s=i[0][1]-e[2],u=i[1][0]-e[0],f=i[1][1]-e[2],c=0,l=[o,t-n/2-je+Math.PI/2,t+n/2+je-Math.PI/2];c<l.length;c++){var h=l[c],p=Math.sin(h),d=-Math.cos(h);if(p*a+d*s<0&&p*u+d*f<0)return!1}return!0}(t,n,u,e)})),f<=i.length-20||(a||(he(e,10,Oe,s,(function(){return a=!1})),a=!0),Oe="low",_e&&clearTimeout(_e),_e=setTimeout((function(){return Oe="high"}),3e3)))},batch:function(){return o}}}(En,Tn),_n=function(e){var t=X.draw(e),n=e({frag:"\n\tprecision lowp float;\n\tuniform sampler2D tex;\n\tvarying vec3 uv;\n\n\t// http://madebyevan.com/shaders/fast-rounded-rectangle-shadows/\n\t// This approximates the error function, needed for the gaussian integral\n\tvec4 erf(vec4 x) {\n\t\tvec4 s = sign(x), a = abs(x);\n\t\tx = 1.0 + (0.278393 + (0.230389 + 0.078108 * (a * a)) * a) * a;\n\t\tx *= x;\n\t\treturn s - s / (x * x);\n\t}\n\n\t// Return the mask for the shadow of a box from lower to upper\n\tfloat boxShadow(vec2 lower, vec2 upper, vec2 point, float sigma) {\n\t\tvec4 query = vec4(point - lower, upper - point);\n\t\tvec4 integral = 0.5 + 0.5 * erf(query * (sqrt(0.5) / sigma));\n\t\treturn (integral.z - integral.x) * (integral.w - integral.y);\n\t}\n\n\tvoid main () {\n\t\tfloat frontMask = smoothstep(0.9, 1.0, uv.z);\n\t\tfloat paintingMask = step(0.001, uv.z);\n\t\tfloat shadowAlpha = boxShadow(vec2(.5), vec2(.7), abs(uv.xy-vec2(.5)), 0.02);\n\t\tfloat wrapping = 0.005 * sign(uv.x-.5) * (1.-uv.z);\n\t\tfloat sideShading = pow(uv.z/4.0, 0.1);\n\t\tvec3 col = texture2D(tex, uv.xy - vec2(wrapping, 0.)).rgb;\n\t\tcol *= mix(sideShading, 1., frontMask);\n\t\tgl_FragColor = mix(vec4(0.,0.,0.,shadowAlpha), vec4(col,1.), paintingMask);\n\t}",vert:"\n\tprecision highp float;\n\tuniform mat4 proj, view, model;\n\tuniform float yScale;\n\tattribute vec3 pos;\n\tvarying vec3 uv;\n\tvoid main () {\n\t\tuv = pos;\n\t\tvec4 mpos = model * vec4(pos, 1);\n\t\tmpos.y *= yScale;\n\t\tgl_Position = proj * view * mpos;\n\t}",attributes:{pos:[0,0,1,1,0,1,0,1,1,1,1,1,0,0,0,1,0,0,0,1,0,1,1,0,-.1,-.1,0,1.1,-.1,0,-.1,1.1,0,1.1,1.1,0]},elements:[0,1,2,3,2,1,1,0,5,4,5,0,3,1,7,5,7,1,0,2,4,6,4,2,8,9,4,5,4,9,9,11,5,7,5,11,11,10,7,6,7,10,10,8,6,4,6,8],uniforms:{model:e.prop("model"),tex:e.prop("tex")},blend:{enable:!0,func:{srcRGB:"src alpha",srcAlpha:"one minus src alpha",dstRGB:"one minus src alpha",dstAlpha:1},color:[0,0,0,0]}});return function(e){n(e),t(e)}}(En),Cn=function(e,t){var n=e.getGridSegments,r=e.getGridParts,i=[0,3*Math.PI/4],o=[0,3*Math.PI/4],a=[0,0,0],s=[2,2,2],u=[.707,0,.707],f=[0,1,0],c=[0,0,0],l=.5,h=me([]),p=me([]),d=!1,g=[0,0,0],m=[0,0,0],v=1,y=function(e,t,n){e=Math.max(Math.min(e,100),-100),t=Math.max(Math.min(t,100),-100);var r=1;Math.abs(i[0])>mn&&Math.sign(i[0])==Math.sign(t)&&(r=(gn-Math.abs(i[0]))/(gn-mn)),i[0]+=r*t*n,i[1]+=e*n},b=an(document.body);b.on("attain",(function(e){e.on("data",(function(e){y(e.dx,e.dy,.002)}))}));var w=!1,x=!1,A=0,E=function(e){if(b&&(b.destroy(),b=!1),"touchstart"===e.type)w=x=e.touches[0],A=e.timeStamp;else if("touchend"===e.type){var t=Math.hypot(w.pageX-x.pageX,w.pageY-x.pageY);if(e.timeStamp-A<300&&t<20){var i=[],o=[],a=[],u=[2*x.pageX/window.innerWidth-1,1-2*x.pageY/window.innerHeight,0];Ne.transformMat4(u,u,ve(i,p)),Ne.transformMat4(u,u,ve(i,h)),Ne.sub(u,u,s),Ne.normalize(u,u);var f=yn(s,u,[0,1,0,0]),c=f.intersection,l=f.dist,d=yn(s,u,[0,1,0,5]).dist,E=s[0],T=s[2],S=u[0],k=u[2];S/=Math.hypot(S,k),k/=Math.hypot(S,k);for(var _=n(E,T),C=0;C<10;C++)E+=4*S,T+=4*k,_=[].concat((0,hn.default)(_),(0,hn.default)(n(E,T)));console.log((0,hn.default)(new Set(_)));var j=(0,hn.default)(new Set(_)).map((function(e){var t=(0,ln.default)(e,2),n=t[0],r=t[1];return function(e,t,n,r){var i=n[0]-r[0],o=n[1]-r[1],a=-o,s=i,u=n[0]*a+n[1]*s,f=yn(e,t,[a,0,s,u]),c=f.dist,l=f.intersection,h=n[0]*i+n[1]*o,p=r[0]*i+r[1]*o,d=l[0]*i+l[2]*o;return(d>h)+(d>p)!==1&&(c=1/0),{a:n,b:r,dist:c,intersection:l}}(s,u,n,r)})).filter((function(e){var t=e.dist;return t>0&&t<Math.max(l,d)&&t<40}));if(j.sort((function(e,t){return e.dist-t.dist})),0!==j.length){var O,D=(0,ln.default)(j[0].intersection,3),M=D[0],L=D[2],P=pn(r(M,L));try{for(P.s();!(O=P.n()).done;){var B=(0,ln.default)(O.value,2),N=B[0],R=B[1],I=(N[0]+R[0])/2,F=(N[1]+R[1])/2;if(Math.hypot(M-I,L-F)<1.3){M=I,L=F;break}}}catch(Ln){P.e(Ln)}finally{P.f()}Ne.copy(g,s),Ne.set(m,M,s[1],L)}else{if(!(l>0))return;Ne.copy(g,s),Ne.set(m,c[0],s[1],c[2])}var q=n(m[0],m[2]).map((function(e){var t=(0,ln.default)(e,2),n=(0,ln.default)(t[0],2),r=n[0],i=n[1],o=(0,ln.default)(t[1],2);return[[r,2,i],[o[0],2,o[1]]]})).map((function(e){var t=(0,ln.default)(e,2),n=t[0],r=t[1];return{a:n,b:r,dist:vn(m,n,r,o,a)}})).filter((function(e){return e.dist<3}));if(q.sort((function(e,t){return e.dist-t.dist})),0!==q.length){var H,z=pn(q);try{for(z.s();!(H=z.n()).done;){var W=H.value,U=W.a,V=W.b,X=3-vn(m,U,V,o,a);if(!(X<0)){var $=Ne.sub(o,V,U).reverse();$[0]=-$[0],Ne.normalize($,$),Ne.scale($,$,X),Ne.add(m,m,$)}}}catch(Ln){z.e(Ln)}finally{z.f()}}v=0}w=x=!1}else"touchmove"===e.type&&x&&(y(e.touches[0].pageX-x.pageX,e.touches[0].pageY-x.pageY,.008),x=e.touches[0])};window.addEventListener("touchstart",E),window.addEventListener("touchmove",E),window.addEventListener("touchend",E);var T={},S=function(e){if(!(e.defaultPrevented||e.ctrlKey||e.altKey||e.metaKey)){T[e.code]="keydown"===e.type,d=e.shiftKey;var t=T.KeyA||T.ArrowLeft?1:0,n=T.KeyD||T.ArrowRight?1:0,r=T.KeyW||T.ArrowUp?1:0,i=T.KeyS||T.ArrowDown?1:0;a=[n-t,0,i-r],e.preventDefault()}};window.addEventListener("keydown",S),window.addEventListener("keyup",S);var k=0;return{pos:s,fmouse:o,forward:u,up:f,view:function(){return h},proj:function(){return Ee(p,t(),window.innerWidth/window.innerHeight,.1,100),p},tick:function(e){var t=e.time,r=t-k;k=t;var p=[0,0,0],y=[];Ne.set(u,1,0,0),Ne.set(f,0,1,0),Ne.rotateY(c,a,p,-i[1]),Ne.rotateY(u,u,p,-i[1]),Ne.rotateX(u,u,p,-i[0]),Ne.rotateX(f,f,p,-i[0]),Ne.normalize(c,c);var b=d?12:7;Ne.scale(c,c,b*r),s[1]=2;var w=Ne.add([],s,c),x=n(w[0],w[2]).map((function(e){var t=(0,ln.default)(e,2),n=(0,ln.default)(t[0],2),r=n[0],i=n[1],o=(0,ln.default)(t[1],2);return[[r,2,i],[o[0],2,o[1]]]})).filter((function(e){var t=(0,ln.default)(e,2),n=t[0],r=t[1];return vn(w,n,r,p,y)<.5}));if(0!==x.length){var A,E=pn(x);try{for(E.s();!(A=E.n()).done;){var T=(0,ln.default)(A.value,2),S=T[0],_=T[1],C=.5-vn(w,S,_,p,y),j=Ne.sub(p,_,S).reverse();j[0]=-j[0],Ne.normalize(j,j),Ne.scale(j,j,C),Ne.add(c,c,j)}}catch(Ln){E.e(Ln)}finally{E.f()}}var O,D=Ne.len(c);if(0===D&&.25!==l&&(.01+(l=.8*(Math.abs((l+.5)%1-.5)-.25)+.25))%.25<.02&&(l=.25),l+=D/(d?5:3.6),s[1]=2+.03*Math.cos(2*Math.PI*l),Ne.add(s,s,c),v<1){v+=r/1;var M=(O=v=Math.min(v,1))<.5?2*O*O:1-Math.pow(-2*O+2,2)/2;Ne.set(s,bn(M,g[0],m[0]),s[1],bn(M,g[2],m[2]))}o[0]=.95*i[0]+(1-.95)*o[0],o[1]=.95*i[1]+(1-.95)*o[1],me(h),we(h,h,o[0]),xe(h,h,o[1]),ye(h,h,Ne.scale(p,s,-1))}}}(Tn,(function(){return 2*Math.atan(Math.tan(.5*An())*window.innerHeight/window.innerWidth)}));var On=En({cull:{enable:!0,face:"back"},uniforms:{view:Cn.view,proj:Cn.proj,yScale:1}}),Dn=En({cull:{enable:!0,face:"front"},uniforms:{yScale:-1}});En.frame((function(e){var t=e.time;jn.begin(),Cn.tick({time:t}),kn.update(Cn.pos,Cn.fmouse[1],An()),En.clear({color:[0,0,0,1],depth:1}),On((function(){wn&&Dn((function(){Sn(),_n(kn.batch())})),Sn(),_n(kn.batch())})),jn.end()}))}();